import{r as x,j as s,B as i}from"./vendor-C1l_5e97.js";import{u as j}from"./BloodThemeContext-E2xwPxg0.js";const w=({categories:p,onCategoryClick:n})=>{const{theme:t,mode:u}=j(),[f,d]=x.useState(null),[c,h]=x.useState(null),v=e=>e>=85?{bg:`${t.status.optimal}33`,border:t.status.optimal,text:t.status.optimal}:e>=70?{bg:`${t.status.normal}33`,border:t.status.normal,text:t.status.normal}:e>=50?{bg:`${t.status.suboptimal}33`,border:t.status.suboptimal,text:t.status.suboptimal}:{bg:`${t.status.critical}33`,border:t.status.critical,text:t.status.critical},m=e=>{h(c===e?null:e),n==null||n(e)};return s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",role:"region","aria-label":"Heatmap des catégories de biomarqueurs",children:p.map((e,b)=>{const a=v(e.score),r=f===e.key,l=c===e.key;return s.jsx(i.button,{type:"button",role:"button","aria-label":`${e.label}: score ${e.score}%, ${e.markerCount} biomarqueurs, ${e.criticalCount} critiques`,"aria-pressed":l,tabIndex:0,className:"relative group text-left focus-visible:outline focus-visible:outline-2 focus-visible:outline-cyan-400 focus-visible:outline-offset-2",onClick:()=>m(e.key),onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),m(e.key))},onHoverStart:()=>d(e.key),onHoverEnd:()=>d(null),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:b*.1,duration:.5},whileHover:{scale:1.05,y:-4},whileTap:{scale:.98},children:s.jsxs("div",{className:"relative overflow-hidden rounded-xl p-6 h-full",style:{background:r||l?a.bg:t.surfaceMuted,backdropFilter:"blur(8px)",border:`2px solid ${r||l?a.border:t.borderSubtle}`,transition:"all 0.3s ease"},children:[s.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")`}}),s.jsx(i.div,{className:"absolute inset-0 rounded-xl pointer-events-none",style:{boxShadow:`inset 0 0 60px ${a.bg}`,opacity:0},animate:{opacity:r||l?1:0},transition:{duration:.3}}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("h3",{className:"text-sm uppercase tracking-wider font-semibold mb-4",style:{color:t.textTertiary},children:e.label}),s.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[s.jsx(i.span,{className:"text-5xl font-bold font-mono tabular-nums",style:{color:a.text,textShadow:u==="dark"?`0 0 30px ${a.bg}`:"none"},animate:r?{scale:[1,1.1,1],textShadow:u==="dark"?[`0 0 30px ${a.bg}`,`0 0 50px ${a.bg}`,`0 0 30px ${a.bg}`]:["none","none","none"]}:{},transition:{duration:.6},children:e.score}),s.jsx("span",{className:"text-xl",style:{color:t.textTertiary},children:"/100"})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs",style:{color:t.textTertiary},children:[s.jsxs("span",{children:[e.markerCount," marqueurs"]}),e.criticalCount>0&&s.jsxs("span",{className:"px-2 py-0.5 rounded-full font-semibold",style:{background:`${t.status.critical}33`,color:t.status.critical},children:[e.criticalCount," critique",e.criticalCount>1?"s":""]})]}),s.jsx("div",{className:"mt-4 h-1.5 rounded-full overflow-hidden",style:{background:t.borderSubtle},children:s.jsx(i.div,{className:"h-full rounded-full",style:{background:`linear-gradient(90deg, ${a.border}, ${a.text})`},initial:{width:0},animate:{width:`${e.score}%`},transition:{delay:b*.1+.5,duration:1,ease:"easeOut"}})})]}),l&&s.jsx(i.div,{className:"absolute top-3 right-3 w-6 h-6 rounded-full flex items-center justify-center",style:{background:a.border,color:t.surface},initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:s.jsx("span",{className:"text-sm",children:"✓"})})]})},e.key)})})};export{w as I};
