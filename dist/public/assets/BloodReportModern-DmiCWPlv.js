import{j as e,at as z,bN as L,aq as f,c0 as B,aj as M,bi as C,B as u,c1 as O,bb as $,E as R,r as k,c2 as E,aI as F,aC as V,c3 as D,bw as A,aB as H,au as _,c4 as T,bf as G,aV as J}from"./vendor-C1l_5e97.js";import{u as h,B as U}from"./BloodThemeContext-E2xwPxg0.js";import{B as Q}from"./BloodHeader-CUKNa-oi.js";import{R as W,A as P}from"./AnimatedStatCard-B2ff_uex.js";import{M as Y,B as Z,P as X,p as K}from"./markdown-utils-64wLV4M7.js";import{u as I,a as ee}from"./useBloodCalculations-DWVh3LxI.js";import"./button-DbeSfvws.js";import"./index-CImFIChq.js";import"./badge-CpqRZvJG.js";const se=[{key:"overview",label:"Vue d'ensemble",icon:z},{key:"biomarkers",label:"Biomarqueurs",icon:L},{key:"analysis",label:"Analyse IA",icon:f},{key:"protocols",label:"Protocoles",icon:B},{key:"trends",label:"Tendances",icon:M,badge:"Bient√¥t"},{key:"sources",label:"Sources",icon:C}];function te({activeTab:t,onTabChange:s,tabs:r=se}){const{theme:i}=h();return e.jsx("div",{className:"sticky top-[73px] z-30 border-b backdrop-blur",style:{backgroundColor:`${i.background}CC`,borderColor:i.borderSubtle},children:e.jsx("div",{className:"mx-auto max-w-6xl px-6",children:e.jsx("div",{className:"flex gap-1 overflow-x-auto scrollbar-hide",children:r.map(a=>{const l=a.icon,n=t===a.key,j=!!a.badge;return e.jsxs("button",{onClick:()=>!j&&s(a.key),disabled:j,className:"relative flex items-center gap-2 whitespace-nowrap px-4 py-4 text-sm font-medium transition-colors",style:{color:n?i.primaryBlue:i.textSecondary,cursor:j?"not-allowed":"pointer",opacity:j?.5:1},children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:a.label}),a.badge&&e.jsx("span",{className:"ml-1 rounded-full px-2 py-0.5 text-[10px] font-semibold",style:{backgroundColor:i.surfaceMuted,color:i.textTertiary},children:a.badge}),n&&e.jsx(u.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5",style:{backgroundColor:i.primaryBlue},transition:{type:"spring",stiffness:500,damping:30}})]},a.key)})})})})}function le({globalScore:t,optimalMarkers:s,watchMarkers:r,actionMarkers:i,panelGroups:a,patientInfo:l}){const{theme:n}=h(),g=(m=>{if(!m)return null;const o=new Date(m),d=new Date,p=d.getFullYear()-o.getFullYear(),b=d.getMonth()-o.getMonth();return b<0||b===0&&d.getDate()<o.getDate()?p-1:p})(l==null?void 0:l.dob),v=l!=null&&l.poids&&(l!=null&&l.taille)?(l.poids/Math.pow(l.taille/100,2)).toFixed(1):null,x=[(l==null?void 0:l.prenom)&&{label:"Pr√©nom",value:l.prenom},(l==null?void 0:l.gender)&&{label:"Genre",value:l.gender==="homme"?"Homme":"Femme"},g&&{label:"√Çge",value:`${g} ans`},v&&{label:"IMC",value:v},(l==null?void 0:l.sleepHours)&&{label:"Sommeil",value:`${l.sleepHours}h/nuit`},(l==null?void 0:l.stressLevel)&&{label:"Stress",value:`${l.stressLevel}/10`}].filter(Boolean);return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-8 pb-10",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border p-8",style:{borderColor:n.borderDefault,backgroundColor:n.surface},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:n.textPrimary},children:"Score global"}),e.jsx("p",{className:"mt-2 text-sm",style:{color:n.textSecondary},children:"Vue d'ensemble de ta sant√© m√©tabolique"}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(W,{score:t,size:220,strokeWidth:8})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(P,{label:"Optimal",value:s.length,color:n.status.optimal,icon:O}),e.jsx(P,{label:"√Ä surveiller",value:r.length,color:n.status.suboptimal,icon:$}),e.jsx(P,{label:"Action requise",value:i.length,color:n.status.critical,icon:R})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",style:{color:n.textPrimary},children:"Marqueurs cl√©s par syst√®me"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(a).map(([m,o])=>{if(!o.length)return null;const d=o.reduce((w,c)=>{const y=c.status==="optimal"?100:c.status==="normal"?80:c.status==="suboptimal"?55:30;return w+y},0)/o.length,p={hormonal:"Hormonal",metabolic:"M√©tabolique",thyroid:"Thyro√Øde",inflammation:"Inflammatoire",vitamins:"Vitamines",liver_kidney:"Foie & Reins"},b=d>=80?"optimal":d>=60?"normal":d>=40?"suboptimal":"critical";return e.jsx(Y,{title:p[m]||m,value:Math.round(d),unit:"/100",status:b},m)})})]}),x.length>0&&e.jsxs("div",{className:"rounded-2xl border p-6",style:{borderColor:n.borderDefault,backgroundColor:n.surface},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:n.textPrimary},children:"Informations personnelles"}),e.jsx("div",{className:"mt-4 grid gap-3 text-sm sm:grid-cols-2",style:{color:n.textSecondary},children:x.map(m=>e.jsxs("div",{children:[e.jsxs("span",{style:{color:n.textTertiary},children:[m.label,":"]})," ",e.jsx("span",{style:{color:n.textPrimary},children:m.value})]},m.label))})]})]})}function re({markers:t}){const{theme:s}=h(),[r,i]=k.useState("all"),[a,l]=k.useState("all"),[n,j]=k.useState(""),g={hormonal:"Hormonal",metabolic:"M√©tabolique",thyroid:"Thyro√Øde",inflammation:"Inflammatoire",vitamins:"Vitamines",liver_kidney:"Foie & Reins"},v={all:"Tous",optimal:"Optimal",normal:"Normal",suboptimal:"Sous-optimal",critical:"Critique"},x=t.filter(o=>{const d=r==="all"||o.status===r,p=a==="all"||o.panel===a,b=!n||o.name.toLowerCase().includes(n.toLowerCase())||o.code.toLowerCase().includes(n.toLowerCase());return d&&p&&b}),m={all:t.length,optimal:t.filter(o=>o.status==="optimal").length,normal:t.filter(o=>o.status==="normal").length,suboptimal:t.filter(o=>o.status==="suboptimal").length,critical:t.filter(o=>o.status==="critical").length};return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"sticky top-0 z-20 rounded-xl border p-4 backdrop-blur",style:{backgroundColor:s.surface,opacity:.97,borderColor:s.borderDefault},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(E,{className:"h-4 w-4",style:{color:s.textSecondary}}),e.jsx("h3",{className:"text-sm font-semibold",style:{color:s.textPrimary},children:"Filtres"})]}),e.jsx("input",{type:"text",placeholder:"Rechercher un marqueur...",value:n,onChange:o=>j(o.target.value),className:"w-full rounded-lg border px-4 py-2 text-sm outline-none transition-colors",style:{backgroundColor:s.background,borderColor:s.borderSubtle,color:s.textPrimary}}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Object.keys(v).map(o=>{const d=r===o,p=m[o];return e.jsxs("button",{onClick:()=>i(o),className:"rounded-full px-3 py-1.5 text-xs font-medium transition-colors",style:{backgroundColor:d?s.primaryBlue:s.surfaceMuted,color:d?"white":s.textSecondary,border:`1px solid ${d?s.primaryBlue:s.borderSubtle}`},children:[v[o]," (",p,")"]},o)})}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>l("all"),className:"rounded-full px-3 py-1.5 text-xs font-medium transition-colors",style:{backgroundColor:a==="all"?s.primaryBlue:s.surfaceMuted,color:a==="all"?"white":s.textSecondary,border:`1px solid ${a==="all"?s.primaryBlue:s.borderSubtle}`},children:"Tous les syst√®mes"}),Object.keys(g).map(o=>{const d=a===o,p=t.filter(b=>b.panel===o).length;return p===0?null:e.jsxs("button",{onClick:()=>l(o),className:"rounded-full px-3 py-1.5 text-xs font-medium transition-colors",style:{backgroundColor:d?s.primaryBlue:s.surfaceMuted,color:d?"white":s.textSecondary,border:`1px solid ${d?s.primaryBlue:s.borderSubtle}`},children:[g[o]," (",p,")"]},o)})]})]}),e.jsxs("div",{className:"text-sm",style:{color:s.textSecondary},children:[x.length," marqueur",x.length!==1?"s":""," trouv√©",x.length!==1?"s":""]}),e.jsx(F,{mode:"popLayout",children:x.length>0?e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid gap-4 md:grid-cols-2",children:x.map((o,d)=>e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},children:e.jsx(Z,{marker:{name:o.name,value:o.value,unit:o.unit,status:o.status,normalMin:o.normalMin,normalMax:o.normalMax}})},o.code))},"grid"):e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"rounded-xl border p-8 text-center",style:{borderColor:s.borderDefault,backgroundColor:s.surface},children:e.jsx("p",{className:"text-sm",style:{color:s.textSecondary},children:"Aucun marqueur ne correspond √† vos crit√®res de recherche."})},"empty")})]})}function N({title:t,content:s,icon:r,iconColor:i}){const{theme:a}=h();return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border p-6",style:{borderColor:a.borderDefault,backgroundColor:a.surface},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"rounded-lg p-2",style:{backgroundColor:`${i}20`,color:i},children:e.jsx(r,{className:"h-5 w-5"})}),e.jsx("h3",{className:"text-lg font-semibold",style:{color:a.textPrimary},children:t})]}),e.jsx("div",{className:"prose prose-sm max-w-none",style:{color:a.textSecondary},children:e.jsx(D,{components:{h1:({children:l})=>e.jsx("h1",{className:"text-xl font-bold mt-6 mb-3",style:{color:a.textPrimary},children:l}),h2:({children:l})=>e.jsx("h2",{className:"text-lg font-semibold mt-5 mb-2",style:{color:a.textPrimary},children:l}),h3:({children:l})=>e.jsx("h3",{className:"text-base font-medium mt-4 mb-2",style:{color:a.textPrimary},children:l}),p:({children:l})=>e.jsx("p",{className:"mb-3 leading-relaxed",children:l}),ul:({children:l})=>e.jsx("ul",{className:"list-disc list-inside mb-3 space-y-1",children:l}),li:({children:l})=>e.jsx("li",{className:"ml-2",children:l}),strong:({children:l})=>e.jsx("strong",{className:"font-semibold",children:l})},children:s})})]})}function oe({aiSections:t}){const{theme:s}=h();return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"rounded-xl border p-4",style:{borderColor:s.borderDefault,backgroundColor:s.surfaceMuted},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5",style:{color:s.primaryBlue}}),e.jsx("h2",{className:"text-xl font-semibold",style:{color:s.textPrimary},children:"Analyse IA compl√®te"})]}),e.jsx("p",{className:"mt-2 text-sm",style:{color:s.textSecondary},children:"Analyse d√©taill√©e de vos biomarqueurs par notre IA, avec contexte scientifique et recommandations personnalis√©es."})]}),t.alerts&&e.jsx(N,{title:t.alerts.title||"Alertes prioritaires",content:t.alerts.content,icon:R,iconColor:s.status.critical}),t.systems&&e.jsx(N,{title:t.systems.title||"Analyse syst√®me par syst√®me",content:t.systems.content,icon:V,iconColor:s.primaryBlue}),t.deepDive&&e.jsx(N,{title:t.deepDive.title||"Deep Dive - Marqueurs prioritaires",content:t.deepDive.content,icon:M,iconColor:s.status.suboptimal}),t.interconnections&&e.jsx(N,{title:t.interconnections.title||"Interconnexions cl√©s",content:t.interconnections.content,icon:f,iconColor:s.status.optimal}),Object.entries(t).map(([r,i])=>!i||["alerts","systems","deepDive","interconnections","synthesis","quality","potential","plan90","nutrition","supplements","annexes","sources"].includes(r)?null:e.jsx(N,{title:i.title,content:i.content,icon:f,iconColor:s.textSecondary},r)),!Object.values(t).some(Boolean)&&e.jsxs("div",{className:"rounded-xl border p-8 text-center",style:{borderColor:s.borderDefault,backgroundColor:s.surface},children:[e.jsx(f,{className:"mx-auto h-12 w-12 mb-4",style:{color:s.textTertiary}}),e.jsx("p",{className:"text-sm",style:{color:s.textSecondary},children:"L'analyse IA est en cours de g√©n√©ration. Veuillez patienter quelques instants."})]})]})}function S({title:t,content:s,icon:r,iconColor:i}){const{theme:a}=h();return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border p-6",style:{borderColor:a.borderDefault,backgroundColor:a.surface},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"rounded-lg p-2",style:{backgroundColor:`${i}20`,color:i},children:e.jsx(r,{className:"h-5 w-5"})}),e.jsx("h3",{className:"text-lg font-semibold",style:{color:a.textPrimary},children:t})]}),e.jsx("div",{className:"prose prose-sm max-w-none",style:{color:a.textSecondary},children:e.jsx(D,{components:{h1:({children:l})=>e.jsx("h1",{className:"text-xl font-bold mt-6 mb-3",children:l}),h2:({children:l})=>e.jsx("h2",{className:"text-lg font-semibold mt-5 mb-2",children:l}),h3:({children:l})=>e.jsx("h3",{className:"text-base font-medium mt-4 mb-2",children:l}),p:({children:l})=>e.jsx("p",{className:"mb-3 leading-relaxed",children:l}),ul:({children:l})=>e.jsx("ul",{className:"list-disc list-inside mb-3 space-y-1",children:l}),li:({children:l})=>e.jsx("li",{className:"ml-2",children:l}),strong:({children:l})=>e.jsx("strong",{className:"font-semibold",children:l}),table:({children:l})=>e.jsx("div",{className:"overflow-x-auto my-4",children:e.jsx("table",{className:"w-full text-sm border-collapse",children:l})}),th:({children:l})=>e.jsx("th",{className:"border px-3 py-2 text-left font-semibold",children:l}),td:({children:l})=>e.jsx("td",{className:"border px-3 py-2",children:l})},children:s})})]})}function ae({aiSections:t,protocolPhases:s}){const{theme:r}=h();return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"rounded-xl border p-4",style:{borderColor:r.borderDefault,backgroundColor:r.surfaceMuted},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5",style:{color:r.primaryBlue}}),e.jsx("h2",{className:"text-xl font-semibold",style:{color:r.textPrimary},children:"Protocoles personnalis√©s"})]}),e.jsx("p",{className:"mt-2 text-sm",style:{color:r.textSecondary},children:"Plan d'action d√©taill√© sur 90 jours pour optimiser vos biomarqueurs."})]}),s&&s.length>0&&e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border p-6",style:{borderColor:r.borderDefault,backgroundColor:r.surface},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(A,{className:"h-5 w-5",style:{color:r.primaryBlue}}),e.jsx("h3",{className:"text-lg font-semibold",style:{color:r.textPrimary},children:"Timeline 90 jours"})]}),e.jsx(X,{phases:s,currentPhase:1})]}),t.plan90&&e.jsx(S,{title:t.plan90.title||"Plan 90 jours d√©taill√©",content:t.plan90.content,icon:A,iconColor:r.primaryBlue}),t.nutrition&&e.jsx(S,{title:t.nutrition.title||"Nutrition & Lifestyle",content:t.nutrition.content,icon:H,iconColor:r.status.optimal}),t.supplements&&e.jsx(S,{title:t.supplements.title||"Suppl√©ments recommand√©s",content:t.supplements.content,icon:_,iconColor:r.status.suboptimal}),!t.plan90&&!t.nutrition&&!t.supplements&&e.jsxs("div",{className:"rounded-xl border p-8 text-center",style:{borderColor:r.borderDefault,backgroundColor:r.surface},children:[e.jsx(B,{className:"mx-auto h-12 w-12 mb-4",style:{color:r.textTertiary}}),e.jsx("p",{className:"text-sm",style:{color:r.textSecondary},children:"Les protocoles personnalis√©s sont en cours de g√©n√©ration. Veuillez patienter quelques instants."})]})]})}function ie({aiSections:t}){const{theme:s}=h();return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"rounded-xl border p-4",style:{borderColor:s.borderDefault,backgroundColor:s.surfaceMuted},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5",style:{color:s.primaryBlue}}),e.jsx("h2",{className:"text-xl font-semibold",style:{color:s.textPrimary},children:"Sources scientifiques"})]}),e.jsx("p",{className:"mt-2 text-sm",style:{color:s.textSecondary},children:"R√©f√©rences scientifiques et ressources utilis√©es pour votre analyse."})]}),t.sources?e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-2xl border p-6",style:{borderColor:s.borderDefault,backgroundColor:s.surface},children:e.jsx("div",{className:"prose prose-sm max-w-none",style:{color:s.textSecondary},children:e.jsx(D,{components:{h1:({children:r})=>e.jsx("h1",{className:"text-xl font-bold mt-6 mb-3",style:{color:s.textPrimary},children:r}),h2:({children:r})=>e.jsx("h2",{className:"text-lg font-semibold mt-5 mb-2",style:{color:s.textPrimary},children:r}),h3:({children:r})=>e.jsx("h3",{className:"text-base font-medium mt-4 mb-2",style:{color:s.textPrimary},children:r}),p:({children:r})=>e.jsx("p",{className:"mb-3 leading-relaxed",style:{color:s.textSecondary},children:r}),ul:({children:r})=>e.jsx("ul",{className:"list-none mb-3 space-y-2",style:{color:s.textSecondary},children:r}),li:({children:r})=>e.jsxs("li",{className:"flex items-start gap-2",style:{color:s.textSecondary},children:[e.jsx(C,{className:"h-4 w-4 mt-0.5 flex-shrink-0",style:{color:s.primaryBlue}}),e.jsx("span",{children:r})]}),a:({href:r,children:i})=>e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 hover:underline",style:{color:s.primaryBlue},children:[i,e.jsx(T,{className:"h-3 w-3"})]}),strong:({children:r})=>e.jsx("strong",{style:{color:s.textPrimary,fontWeight:600},children:r})},children:t.sources.content})})}):e.jsxs("div",{className:"rounded-xl border p-8 text-center",style:{borderColor:s.borderDefault,backgroundColor:s.surface},children:[e.jsx(C,{className:"mx-auto h-12 w-12 mb-4",style:{color:s.textTertiary}}),e.jsx("p",{className:"text-sm",style:{color:s.textSecondary},children:"Les r√©f√©rences scientifiques sont en cours de compilation."}),e.jsx("p",{className:"mt-2 text-xs",style:{color:s.textTertiary},children:"Nous utilisons des sources de Huberman Lab, Peter Attia, Examine.com, Renaissance Periodization, et autres experts reconnus."})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-2xl border p-6",style:{borderColor:s.borderDefault,backgroundColor:s.surface},children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:s.textPrimary},children:"Ressources recommand√©es"}),e.jsx("div",{className:"space-y-3",children:[{name:"Huberman Lab",url:"https://hubermanlab.com",description:"Neuroscience & optimisation de la performance"},{name:"Peter Attia MD",url:"https://peterattiamd.com",description:"Long√©vit√© & m√©decine pr√©ventive"},{name:"Examine.com",url:"https://examine.com",description:"Base de donn√©es sur les suppl√©ments"},{name:"Renaissance Periodization",url:"https://rpstrength.com",description:"Science de la nutrition & training"}].map(r=>e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-3 rounded-lg border p-3 transition-colors hover:bg-opacity-80",style:{borderColor:s.borderSubtle,backgroundColor:s.surfaceMuted},children:[e.jsx(T,{className:"h-4 w-4 mt-1 flex-shrink-0",style:{color:s.primaryBlue}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",style:{color:s.textPrimary},children:r.name}),e.jsx("div",{className:"text-xs",style:{color:s.textSecondary},children:r.description})]})]},r.name))})]})]})}function ne(){const{theme:t}=h();return e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6 pb-10",children:e.jsxs("div",{className:"rounded-xl border p-8 text-center",style:{borderColor:t.borderDefault,backgroundColor:t.surface},children:[e.jsx("div",{className:"mx-auto w-fit rounded-full p-4 mb-4",style:{backgroundColor:`${t.primaryBlue}20`},children:e.jsx(M,{className:"h-12 w-12",style:{color:t.primaryBlue}})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:t.textPrimary},children:"Tendances disponibles bient√¥t"}),e.jsx("p",{className:"text-sm mb-6",style:{color:t.textSecondary},children:"Cette fonctionnalit√© sera disponible lorsque vous aurez plusieurs analyses sanguines. Vous pourrez suivre l'√©volution de vos biomarqueurs dans le temps."}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3 text-left",children:[e.jsxs("div",{className:"rounded-lg border p-4",style:{borderColor:t.borderSubtle,backgroundColor:t.surfaceMuted},children:[e.jsx(A,{className:"h-8 w-8 mb-3",style:{color:t.primaryBlue}}),e.jsx("div",{className:"text-sm font-semibold mb-1",style:{color:t.textPrimary},children:"Suivi temporel"}),e.jsx("div",{className:"text-xs",style:{color:t.textSecondary},children:"Visualisez l'√©volution de chaque marqueur sur 3, 6 ou 12 mois"})]}),e.jsxs("div",{className:"rounded-lg border p-4",style:{borderColor:t.borderSubtle,backgroundColor:t.surfaceMuted},children:[e.jsx(L,{className:"h-8 w-8 mb-3",style:{color:t.status.optimal}}),e.jsx("div",{className:"text-sm font-semibold mb-1",style:{color:t.textPrimary},children:"Comparaison avant/apr√®s"}),e.jsx("div",{className:"text-xs",style:{color:t.textSecondary},children:"Mesurez l'impact de vos protocoles sur vos biomarqueurs"})]}),e.jsxs("div",{className:"rounded-lg border p-4",style:{borderColor:t.borderSubtle,backgroundColor:t.surfaceMuted},children:[e.jsx(M,{className:"h-8 w-8 mb-3",style:{color:t.status.suboptimal}}),e.jsx("div",{className:"text-sm font-semibold mb-1",style:{color:t.textPrimary},children:"Pr√©dictions IA"}),e.jsx("div",{className:"text-xs",style:{color:t.textSecondary},children:"Recevez des alertes si une tendance n√©gative est d√©tect√©e"})]})]}),e.jsxs("div",{className:"mt-6 rounded-lg border p-4 text-left",style:{borderColor:t.borderSubtle,backgroundColor:`${t.primaryBlue}10`},children:[e.jsx("p",{className:"text-xs font-semibold mb-2",style:{color:t.primaryBlue},children:"üí° Conseil"}),e.jsx("p",{className:"text-xs",style:{color:t.textSecondary},children:"Pour un suivi optimal, nous recommandons de refaire une analyse compl√®te tous les 90 jours apr√®s avoir appliqu√© les protocoles."})]})]})})}const q={optimal:100,normal:80,suboptimal:55,critical:30};function ce(){const{reportId:t}=G(),[s,r]=k.useState("overview"),{theme:i}=h(),{data:a,isLoading:l,error:n}=I(t),{normalizedMarkers:j,panelGroups:g,globalScore:v}=ee(a||null),x=a!=null&&a.aiReport?K(a.aiReport):{},m=j.map(c=>({code:c.id,name:c.name,value:c.value,unit:c.unit,status:c.status,normalMin:c.normalMin??null,normalMax:c.normalMax??null,optimalMin:c.optimalMin??null,optimalMax:c.optimalMax??null,panel:c.panelId||"metabolic",score:q[c.status]||80})),o=m.filter(c=>c.status==="optimal"),d=m.filter(c=>c.status==="normal"||c.status==="suboptimal"),p=m.filter(c=>c.status==="critical"),b=Object.fromEntries(g.map(c=>[c.id,(c.markers||[]).map(y=>({code:y.id,name:y.name,value:y.value,unit:y.unit,status:y.status,normalMin:y.normalMin??null,normalMax:y.normalMax??null,optimalMin:y.optimalMin??null,optimalMax:y.optimalMax??null,panel:y.panelId||c.id,score:q[y.status]||80}))])),w=x.plan90?[{id:1,title:"Phase 1: Attaque",duration:"Jours 1-30",description:"Corriger les marqueurs critiques et initier les protocoles",items:["Optimiser sommeil 7-9h","Suppl√©mentation de base","Ajuster nutrition"],completed:!1},{id:2,title:"Phase 2: Optimisation",duration:"Jours 31-60",description:"Affiner les protocoles selon la r√©ponse initiale",items:["Stack avanc√©","Training adapt√©","Suivi hebdomadaire"],completed:!1},{id:3,title:"Phase 3: Consolidation",duration:"Jours 61-90",description:"Stabiliser les acquis et pr√©parer le retest",items:["Maintenir protocoles","Ajuster dosages","Pr√©parer retest"],completed:!1}]:void 0;return l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",style:{backgroundColor:i.background},children:e.jsx(J,{className:"h-8 w-8 animate-spin",style:{color:i.primaryBlue}})}):n||!a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",style:{backgroundColor:i.background},children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-semibold",style:{color:i.textPrimary},children:"Erreur de chargement"}),e.jsx("p",{className:"text-sm",style:{color:i.textSecondary},children:(n==null?void 0:n.message)||"Rapport introuvable"})]})}):e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:i.background},children:[e.jsx(Q,{title:"Analyse Sanguine",subtitle:`Rapport du ${new Date(a.createdAt||Date.now()).toLocaleDateString("fr-FR")}`}),e.jsx(te,{activeTab:s,onTabChange:r}),e.jsx("div",{className:"mx-auto max-w-6xl px-6 pt-6",children:e.jsx(F,{mode:"wait",children:s==="overview"?e.jsx(le,{globalScore:v,optimalMarkers:o,watchMarkers:d,actionMarkers:p,panelGroups:b,patientInfo:a.profile},"overview"):s==="biomarkers"?e.jsx(re,{markers:m},"biomarkers"):s==="analysis"?e.jsx(oe,{aiSections:x},"analysis"):s==="protocols"?e.jsx(ae,{aiSections:x,protocolPhases:w},"protocols"):s==="trends"?e.jsx(ne,{},"trends"):s==="sources"?e.jsx(ie,{aiSections:x},"sources"):null})})]})}function ge(){return e.jsx(U,{children:e.jsx(ce,{})})}export{ge as default};
