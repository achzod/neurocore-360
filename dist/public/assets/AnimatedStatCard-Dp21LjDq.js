import{r as y,j as t,B as i,cp as N}from"./vendor-C1l_5e97.js";import{u as w}from"./BloodThemeContext-E2xwPxg0.js";const M=({score:d,maxScore:o=100,size:s=280,strokeWidth:u=14,label:n="Score Global",sublabel:r,targetScore:x,percentile:f,showComparison:p=!1})=>{const{theme:e}=w(),[h,j]=y.useState(0),m=(s-u*2)/2,a=2*Math.PI*m,b=d/o*100,g=a-b/100*a;y.useEffect(()=>{let c=0;const v=d,k=(v-c)/(2e3/16),$=setInterval(()=>{c+=k,c>=v?(j(v),clearInterval($)):j(Math.floor(c))},16);return()=>clearInterval($)},[d]);const l=(c=>c>=85?{from:e.status.optimal,to:e.status.normal,glow:`${e.status.optimal}4D`}:c>=70?{from:e.status.normal,to:e.primaryBlue,glow:`${e.status.normal}4D`}:c>=50?{from:e.status.suboptimal,to:e.status.suboptimal,glow:`${e.status.suboptimal}4D`}:{from:e.status.critical,to:e.status.critical,glow:`${e.status.critical}4D`})(b);return t.jsxs("div",{className:"relative inline-flex items-center justify-center",role:"figure","aria-label":`${n}: ${d} sur ${o}${r?`, ${r}`:""}${f!==void 0&&p?`, Top ${100-f}%`:""}`,children:[t.jsxs("svg",{width:s,height:s,className:"transform -rotate-90",role:"img","aria-hidden":"true",children:[t.jsxs("defs",{children:[t.jsx("pattern",{id:"scoreGrid",width:"12",height:"12",patternUnits:"userSpaceOnUse",children:t.jsx("path",{d:"M 12 0 L 0 0 0 12",fill:"none",stroke:e.grid,strokeWidth:"0.5"})}),t.jsxs("linearGradient",{id:"scoreGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:l.from}),t.jsx("stop",{offset:"100%",stopColor:l.to})]}),t.jsxs("filter",{id:"scoreGlow",children:[t.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),t.jsxs("feMerge",{children:[t.jsx("feMergeNode",{in:"coloredBlur"}),t.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),t.jsx("circle",{cx:s/2,cy:s/2,r:m,fill:"url(#scoreGrid)",stroke:e.borderSubtle,strokeWidth:u}),x&&t.jsx(i.circle,{cx:s/2,cy:s/2,r:m,fill:"none",stroke:`${e.status.optimal}4D`,strokeWidth:u/2,strokeDasharray:a,strokeDashoffset:a-x/o*a,strokeLinecap:"round",initial:{strokeDashoffset:a},animate:{strokeDashoffset:a-x/o*a},transition:{duration:2,delay:.5,ease:"easeOut"}}),t.jsx(i.circle,{cx:s/2,cy:s/2,r:m,fill:"none",stroke:"url(#scoreGradient)",strokeWidth:u,strokeLinecap:"round",strokeDasharray:a,initial:{strokeDashoffset:a},animate:{strokeDashoffset:g},transition:{duration:2,ease:[.22,1,.36,1]},filter:"url(#scoreGlow)"}),t.jsx(i.circle,{cx:s/2,cy:s/2,r:m,fill:"none",stroke:l.from,strokeWidth:u/3,strokeLinecap:"round",strokeDasharray:a,strokeDashoffset:g,opacity:.5,animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{filter:"blur(6px)"}})]}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[t.jsx(i.div,{className:"text-7xl font-bold font-mono tabular-nums",style:{color:l.from,textShadow:`0 0 40px ${l.glow}`},initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:200},"aria-live":"polite","aria-atomic":"true",children:h}),t.jsx("div",{className:"text-xs uppercase tracking-widest text-slate-500 mt-2 font-semibold",children:n}),r&&t.jsx("div",{className:"text-[10px] text-slate-600 mt-1",children:r}),f!==void 0&&p&&t.jsxs(i.div,{className:"mt-4 px-3 py-1.5 rounded-full text-xs font-semibold",style:{background:`linear-gradient(135deg, ${l.glow}, transparent)`,border:`1px solid ${l.from}`,color:l.from},initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.5},children:["Top ",100-f,"%"]})]}),x&&t.jsxs(i.div,{className:"absolute text-xs text-emerald-400 font-semibold",style:{top:"20%",right:"10%"},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:1.5,duration:.5},children:["Objectif: ",x]})]})},B=({label:d,value:o,unit:s,icon:u,color:n="#06b6d4",trend:r})=>{const[x,f]=y.useState(0),p=y.useRef(null),e=N(p,{once:!0,margin:"-100px"});return y.useEffect(()=>{if(!e)return;let h=0;const m=o/(2e3/16),a=setInterval(()=>{h+=m,h>=o?(f(o),clearInterval(a)):f(Math.floor(h))},16);return()=>clearInterval(a)},[e,o]),t.jsx(i.div,{ref:p,className:"relative group cursor-default",initial:{opacity:0,y:20},animate:e?{opacity:1,y:0}:{},transition:{duration:.5},whileHover:{scale:1.05,y:-4},role:"article","aria-label":`${d}: ${o}${s||""}${r?`, tendance ${r.direction==="up"?"en hausse":"en baisse"} de ${r.value}`:""}`,children:t.jsxs("div",{className:"rounded-xl p-6",style:{background:"var(--color-surface, rgba(26, 29, 36, 0.4))",backdropFilter:"blur(8px)",border:"1px solid var(--color-border, rgba(148, 163, 184, 0.2))"},children:[t.jsx(i.div,{className:"w-12 h-12 rounded-xl flex items-center justify-center mb-4",style:{background:`${n}20`,border:`1px solid ${n}40`},whileHover:{rotate:15},transition:{duration:.3},children:t.jsx(u,{className:"w-6 h-6",style:{color:n}})}),t.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[t.jsx(i.span,{className:"text-4xl font-bold font-mono tabular-nums",style:{color:n,textShadow:`0 0 20px ${n}40`},"aria-live":"polite","aria-atomic":"true",children:x}),s&&t.jsx("span",{className:"text-lg",style:{color:"var(--color-text-muted, #94a3b8)"},children:s})]}),t.jsx("div",{className:"text-sm",style:{color:"var(--color-text-muted, #94a3b8)"},children:d}),r&&t.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs",style:{color:r.direction==="up"?"#10b981":"#f43f5e"},children:[t.jsx("span",{children:r.direction==="up"?"↑":"↓"}),t.jsx("span",{className:"font-semibold",children:r.value})]}),t.jsx(i.div,{className:"absolute inset-0 rounded-xl pointer-events-none",style:{boxShadow:`inset 0 0 40px ${n}20`,opacity:0},whileHover:{opacity:1},transition:{duration:.3}})]})})};export{B as A,M as R};
