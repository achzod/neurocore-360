import{bf as ys,j as e,r as p,aV as Ee,E as gs,s as vs,bJ as Te,bK as js,M as Ns,at as ws,ce as te,aq as oe,ba as $e,ax as ks,az as Le,cf as Ss,bv as Cs,aB as Ps,aC as le,ay as Rs,bb as Ms,an as As,aR as De,aO as Es,bj as Ts}from"./vendor-Bxh4p1l9.js";import{S as $s}from"./Sidebar-7kWo1Fni.js";import{R as ze,M as Ls,P as Ds}from"./Charts-4d3Qwem6.js";import{U as zs}from"./themes-DjiGQari.js";import{R as Bs,g as Is,f as re,C as qs}from"./ReportErrorBoundary-98xBjMWV.js";const Be=zs,Ie=a=>{const r=a==null?"":String(a);return r?r.trim().split(/\s+/).map(u=>u&&u[0].toUpperCase()+u.slice(1).toLowerCase()).join(" "):"Profil"},qe={sommeil:Rs,stress:oe,energie:le,digestion:$e,training:Le,nutrition:Ps,lifestyle:Cs,mindset:Ss,entrainement:Le,cardio:ks,metabolisme:$e,hormones:oe},z=a=>a>=8?{label:"FORT",color:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"}:a>=6?{label:"MOYEN",color:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"}:a>=4?{label:"FAIBLE",color:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"}:{label:"CRITIQUE",color:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"},He=a=>/<\s*[a-z][\s\S]*>/i.test(a),Fe="KAN0746",Hs="fr.iherb.com",_e=a=>{if(!a||!a.includes("iherb.com"))return a;const r=w=>{let f=w.replace(/https?:\/\/[^/]*iherb\.com\//i,`https://${Hs}/`);return/rcode=/i.test(f)?f=f.replace(/rcode=[^&\"']*/i,`rcode=${Fe}`):f+=`${f.includes("?")?"&":"?"}rcode=${Fe}`,f},u=/https?:\/\/[^\s"'<>]*iherb\.com[^\s"'<>]*/gi;return a.replace(u,w=>r(w))},_=(a,r)=>{const u=a.replace("#","");if(u.length!==6)return a;const w=parseInt(u.slice(0,2),16),f=parseInt(u.slice(2,4),16),R=parseInt(u.slice(4,6),16);return`rgba(${w}, ${f}, ${R}, ${r})`},i=a=>a?typeof a=="string"?a:Array.isArray(a)?a.map(r=>i(r)).filter(Boolean).join(`

`):typeof a=="object"?Object.values(a).map(r=>i(r)).filter(Boolean).join(`

`):String(a):"",Fs=a=>a&&a.split(`
`).filter(r=>{const u=r.trim();return u?!(/^(sources?|references?|références?)\s*[:\-]/i.test(u)||/\bpmid\b/i.test(u)||/\bdoi\b/i.test(u)||/pubmed/i.test(u)):!0}).join(`
`),P=a=>{const r=i(a);return Fs(r)},_s=a=>{const r=P(a);if(!r)return{paragraphs:[],bullets:[],promoLine:"",bonusLine:"",emailLine:"",siteLine:""};const u=r.split(`
`).map(s=>s.trim()).filter(Boolean).filter(s=>!/^[-=]{3,}$/.test(s)).filter(s=>!/rapport genere/i.test(s)).filter(s=>!/^tu\s+as\s+les\s+cl(?:e|\u00e9)s/i.test(s)).filter(s=>!/^prochaines?\s+etapes?/i.test(s)),w=u.find(s=>/code promo/i.test(s))||"",f=u.find(s=>/bonus/i.test(s))||"",R=u.find(s=>/^email\s*:/i.test(s))||"",k=u.find(s=>/^site\s*:/i.test(s))||"",q=u.filter(s=>/^(\+|\-|\d+\.)\s+/.test(s)).map(s=>s.replace(/^(\+|\-|\d+\.)\s+/,"").trim());return{paragraphs:u.filter(s=>/^(rappel coaching|rappel important|infos importantes|coaching apexlabs|prochaines etapes|pret a transformer ces insights)$/i.test(s)||/^tu\s+as\s+les\s+cl(?:e|\u00e9)s/i.test(s)||/^prochaines?\s+etapes?/i.test(s)||/^(formules?\s+disponibles|mes\s+formules)$/i.test(s)||s===w||s===f||s===R||s===k?!1:!/^(\+|\-|\d+\.)\s+/.test(s)),bullets:q,promoLine:w,bonusLine:f,emailLine:R,siteLine:k}},Os=a=>/analyse/i.test(a.title),Us=({auditId:a})=>{const[r,u]=p.useState(null),[w,f]=p.useState(!0),[R,k]=p.useState(null),[q,B]=p.useState("dashboard"),[s,Oe]=p.useState(Be[0]),[ae,O]=p.useState(!1),[Ue,Ve]=p.useState(0),[Ge,Ke]=p.useState("Profil"),[We,ne]=p.useState(""),[ce,ie]=p.useState(0),[Je,de]=p.useState(""),U=p.useRef(null),$=p.useRef(null),[V,Ye]=p.useState(0),[H,Ze]=p.useState(""),[G,me]=p.useState(""),[ue,xe]=p.useState(!1),[Qe,Xe]=p.useState(!1),[pe,K]=p.useState(null);p.useEffect(()=>{let t=!1;const l=async()=>{var h;const d=await fetch(`/api/audits/${a}/narrative`);if(!d.ok)throw new Error("Erreur chargement rapport");const m=await d.json();if(m.error||m.message)throw new Error(m.error||m.message);u(m),((h=m.sections)==null?void 0:h.length)>0&&B(m.sections[0].id)},o=async(d=0)=>{if(!t){try{const h=await(await fetch(`/api/audits/${a}/narrative-status`)).json();if(ne(h.status||""),ie(h.progress??0),de(h.currentSection||""),h.status==="completed"){await l(),f(!1);return}if(h.status==="failed"){k(h.error||"Generation echouee. Reessaie dans quelques minutes."),f(!1);return}}catch{k("Erreur de connexion"),f(!1);return}d<120?U.current=window.setTimeout(()=>o(d+1),5e3):(k("Generation trop longue. Reviens plus tard."),f(!1))}},c=async()=>{var d,m;if(!a){k("ID audit manquant"),f(!1);return}try{const h=await fetch(`/api/audits/${a}?light=1`);if(!h.ok){k("Audit non trouve"),f(!1);return}const n=await h.json();if(Ke(Ie(((d=n.responses)==null?void 0:d.prenom)||((m=n.email)==null?void 0:m.split("@")[0])||"Profil")),me(n.email||""),n.reportDeliveryStatus!=="READY"&&n.reportDeliveryStatus!=="SENT"){ne("generating"),ie(0),de("Initialisation..."),await fetch(`/api/audits/${a}/generate-narrative`,{method:"POST"}),await o(0);return}await l(),f(!1)}catch{k("Erreur de connexion"),f(!1)}};return f(!0),k(null),c(),()=>{t=!0,U.current&&clearTimeout(U.current)}},[a]),p.useEffect(()=>{const t=document.documentElement;t.style.setProperty("--color-bg",s.colors.background),t.style.setProperty("--color-surface",s.colors.surface),t.style.setProperty("--color-border",s.colors.border),t.style.setProperty("--color-text",s.colors.text),t.style.setProperty("--color-text-muted",s.colors.textMuted),t.style.setProperty("--color-primary",s.colors.primary),t.style.setProperty("--color-grid",s.colors.grid),t.style.setProperty("--color-on-primary",s.type==="dark"?"#000":"#fff"),t.style.setProperty("--text",s.colors.text),t.style.setProperty("--text-secondary",s.colors.textMuted),t.style.setProperty("--text-muted",s.colors.textMuted),t.style.setProperty("--surface-1",s.colors.surface),t.style.setProperty("--surface-2",s.colors.background),t.style.setProperty("--border",s.colors.border),t.style.setProperty("--primary",s.colors.primary),t.style.setProperty("--accent-ok",s.colors.primary),t.style.setProperty("--accent-warning",s.colors.primary)},[s]);const he=t=>{const l=i(t);return l?He(l)?l:l.split(/\n\s*\n/).map(o=>o.trim()).filter(Boolean).map(o=>`<p>${o}</p>`).join(""):""},es=t=>{const l=P(t.introduction).trim(),o=[{label:"Analyse",text:l},{label:"Ce qui bloque",text:P(t.whatIsWrong)},{label:"Analyse personnalisee",text:P(t.personalizedAnalysis)},{label:"Recommandations",text:P(t.recommendations)},{label:"Plan d'action",text:P(t.actionPlan)},{label:"Science",text:P(t.scienceDeepDive)}].filter(c=>c.text&&c.text.trim().length>0);return l&&He(l)&&o.length===1?l:o.map(c=>`<h4>${c.label}</h4>${he(c.text||"")}`).join("")},I=(Array.isArray(r==null?void 0:r.sections)?r.sections:[]).filter(t=>!!(t&&typeof t=="object")).map((t,l)=>{const o=i(t.id)||`section-${l+1}`,c=i(t.title)||`Section ${l+1}`,d=typeof t.score=="number"?t.score:Number(t.score),m=Number.isFinite(d)?d:0;return{...t,id:o,title:c,score:m}}),W=Array.isArray(r==null?void 0:r.supplementStack)?r.supplementStack:[],ss=(Array.isArray(r==null?void 0:r.radarMetrics)?r.radarMetrics:[]).filter(t=>!!(t&&typeof t=="object")).map((t,l)=>{const o=typeof t.value=="number"?t.value:Number(t.value),c=typeof t.max=="number"?t.max:Number(t.max),d=i(t.label)||`Metric ${l+1}`,m=i(t.key)||d.toLowerCase().replace(/\s+/g,"-");return{...t,label:d,key:m,value:Number.isFinite(o)?o:0,max:Number.isFinite(c)&&c>0?c:10}}),j=p.useMemo(()=>{var m,h,n,x;if(!r)return[];const t=I.map(b=>{const N=b.score>0?`Score ${Math.round(b.score)}%`:b.level?b.level.toUpperCase():"";return{id:b.id,title:b.title,subtitle:N,content:es(b)}}),l=!!(r.supplementsHtml||W.length>0),o=!!((m=r.weeklyPlan)!=null&&m.week1||(h=r.weeklyPlan)!=null&&h.week2||(n=r.weeklyPlan)!=null&&n.weeks3_4||(x=r.weeklyPlan)!=null&&x.months2_3),c=I.some(b=>{const N=`${i(b.title)} ${i(b.id)}`.toLowerCase();return N.includes("visuelle")||N.includes("postural")||N.includes("posture")||N.includes("biomecanique")||N.includes("photo")}),d=!!r.photoAnalysis&&!c;return[{id:"dashboard",title:"Dashboard",subtitle:"Vue globale",content:""},...r.ctaDebut?[{id:"cta-debut",title:"Rappel Coaching",subtitle:"Important",content:""}]:[],...t,...d?[{id:"photo-analysis",title:"Analyse Photo",subtitle:"Visuelle",content:""}]:[],...l?[{id:"supplements",title:"Stack Supplements",subtitle:"Protocole",content:""}]:[],...o?[{id:"plan",title:"Plan 12 Semaines",subtitle:"Action",content:""}]:[],...r.ctaFin?[{id:"cta-fin",title:"Coaching",subtitle:"Prochaine etape",content:""}]:[],{id:"review",title:"Ton Avis",subtitle:"Feedback",content:""}]},[r]);p.useEffect(()=>{const t=()=>{if(!$.current||j.length===0)return;const o=$.current,c=o.scrollHeight-o.clientHeight,d=c>0?o.scrollTop/c*100:0;Ve(d);const m=j.map(n=>document.getElementById(n.id)),h=o.scrollTop+300;for(let n=m.length-1;n>=0;n--){const x=m[n];if(x&&x.offsetTop<=h){B(j[n].id);break}}},l=$.current;if(l)return l.addEventListener("scroll",t),t(),()=>l.removeEventListener("scroll",t)},[j]),p.useEffect(()=>{j.length>0&&B(j[0].id)},[j]);const J=Ie(Ge),Y=I.map(t=>t.score).filter(t=>Number.isFinite(t)),Z=Y.length>0?Math.round(Y.reduce((t,l)=>t+l,0)/Y.length):0,fe=r&&Number.isFinite(r.global)?r.global:Z,be=fe<=10&&Z>=20?Z:fe,S=Number.isFinite(be)?be:60,M=Math.round(S/10*10)/10,y=s.colors.primary,Q=_(y,.12),A=_(y,.35),ts={"analyse-visuelle-et-posturale-complete":"Posture","analyse-biomecanique-et-sangle-profonde":"Biomeca","analyse-entrainement-et-periodisation":"Entrainement","analyse-systeme-cardiovasculaire":"Cardio","analyse-metabolisme-et-nutrition":"Metabolisme","analyse-sommeil-et-recuperation":"Sommeil","analyse-digestion-et-microbiote":"Digestion","analyse-axes-hormonaux":"Hormones","analyse-energie-et-recuperation":"Energie"},rs=(t,l)=>{const c=t.replace(/^analyse\s+/i,"").replace(/^protocole\s+/i,"").replace(/^plan\s+/i,"").replace(/^synthese\s+/i,"").replace(/^kpi\s+et\s+tableau\s+de\s+bord\s*/i,"KPI ").trim().split(/\s+/);return c.length>1?c.slice(0,2).join(" "):l},ye=I.filter(Os),os=(ye.length>0?ye:I).slice(0,8),ls=t=>{const l=ts[t.id];if(l)return l;const o=t.title.toLowerCase().normalize("NFD").replace(/[̀-ͯ]/g,"");return o.includes("entrainement")?"Entrainement":o.includes("cardio")||o.includes("cardiovasculaire")||o.includes("hrv")?"Cardio":o.includes("metabolisme")||o.includes("nutrition")?"Metabolisme":o.includes("sommeil")?"Sommeil":o.includes("digestion")?"Digestion":o.includes("hormon")?"Hormones":o.includes("postur")||o.includes("biomecanique")?"Posture":o.includes("energie")?"Energie":rs(t.title,t.title)},as=os.map((t,l)=>{const o=t.score>0?t.score:S;return{label:i(ls(t))||`Metric ${l+1}`,value:Math.round(o/10*10)/10,max:10,description:i(t.title)||`Metric ${l+1}`,key:i(t.id)||`metric-${l+1}`}}),X=ss,ns=X.map(t=>i(t.label).toLowerCase()),ge=X.length>=4&&ns.some(t=>t&&!t.includes("analyse"))?X:as,E=M>0?M:6.5,ve=[{label:"Entrainement",value:E,max:10,description:"Entrainement",key:"entrainement"},{label:"Cardio",value:E,max:10,description:"Cardio",key:"cardio"},{label:"Metabolisme",value:E,max:10,description:"Metabolisme",key:"metabolisme"},{label:"Sommeil",value:E,max:10,description:"Sommeil",key:"sommeil"},{label:"Digestion",value:E,max:10,description:"Digestion",key:"digestion"},{label:"Hormones",value:E,max:10,description:"Hormones",key:"hormones"}],je=(ge.length?ge:ve).map((t,l)=>{const o=typeof t.value=="number"&&!Number.isNaN(t.value)?t.value:E,c=i(t.label)||`Metric ${l+1}`,d=i(t.key)||c.toLowerCase().replace(/\s+/g,"-");return{...t,label:c,key:d,value:Math.max(1,Math.min(10,o)),max:10}}).filter(t=>typeof t.value=="number"),Ne=je.length>=4?je:ve,ee=[...Ne].sort((t,l)=>t.value-l.value),g=ee[0],v=ee[ee.length-1],cs=j.filter(t=>t.id!=="dashboard"),se=t=>{const l=document.getElementById(t);l&&$.current&&$.current.scrollTo({top:l.offsetTop-100,behavior:"smooth"}),B(t),O(!1)},we=t=>{if(!r)return;const l=j.findIndex(c=>c.id===q);let o=t==="next"?l+1:l-1;o=Math.max(0,Math.min(o,j.length-1)),se(j[o].id)},is=async t=>{if(t.preventDefault(),!a||V===0||H.length<10||!G){K("Veuillez remplir tous les champs (commentaire 10 caracteres minimum)");return}xe(!0);try{const o=await(await fetch("/api/submit-review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auditId:a,email:G,auditType:"ULTIMATE_SCAN",rating:V,comment:H})})).json();if(o.success)Xe(!0);else{const c=Array.isArray(o.details)?o.details.map(d=>d.message).filter(Boolean).join(" "):"";K(c||o.error||"Erreur")}}catch{K("Erreur de connexion")}finally{xe(!1)}};if(w)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:s.colors.background,color:s.colors.text},children:e.jsxs("div",{className:"text-center max-w-md px-6",children:[e.jsx(Ee,{className:"w-12 h-12 animate-spin mx-auto mb-4",style:{color:s.colors.primary}}),e.jsx("p",{className:"font-semibold mb-2",children:"Preparation du rapport Ultimate..."}),We&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm",style:{color:s.colors.textMuted},children:Je||"Analyse en cours"}),e.jsx("div",{className:"mt-4 h-2 w-full rounded-full overflow-hidden",style:{backgroundColor:s.colors.surface},children:e.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${ce}%`,backgroundColor:s.colors.primary}})}),e.jsxs("p",{className:"text-xs mt-2",style:{color:s.colors.textMuted},children:[ce,"%"]})]})]})});if(R||!r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:s.colors.background,color:s.colors.text},children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[e.jsx(gs,{className:"w-16 h-16 mx-auto mb-4",style:{color:s.colors.primary}}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:R||"Rapport non disponible"}),e.jsx("p",{className:"text-sm mb-6",style:{color:s.colors.textMuted},children:"Le rapport n'est pas encore accessible. Reessaie dans quelques minutes."}),e.jsx(vs,{href:"/dashboard",children:e.jsx("button",{className:"px-6 py-3 font-bold rounded-lg transition",style:{backgroundColor:s.colors.primary,color:s.type==="dark"?"#000":"#fff"},children:"Retour au dashboard"})})]})});const ds={"--color-bg":s.colors.background,"--color-surface":s.colors.surface,"--color-border":s.colors.border,"--color-text":s.colors.text,"--color-text-muted":s.colors.textMuted,"--color-primary":s.colors.primary,"--color-grid":s.colors.grid,"--color-on-primary":s.type==="dark"?"#000":"#fff","--text":s.colors.text,"--text-secondary":s.colors.textMuted,"--text-muted":s.colors.textMuted,"--surface-1":s.colors.surface,"--surface-2":s.colors.background,"--border":s.colors.border,"--primary":s.colors.primary,"--accent-ok":s.colors.primary,"--accent-warning":s.colors.primary},ke=t=>{const l=t>0;return e.jsxs("div",{className:"mt-6 rounded-xl border overflow-hidden",style:{borderColor:s.colors.border},children:[e.jsxs("div",{className:"px-4 py-3 flex flex-wrap items-center justify-between gap-2",style:{backgroundColor:Q,borderBottom:`1px solid ${A}`},children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",style:{color:y},children:"Formules coaching"}),e.jsx("span",{className:"text-xs",style:{color:s.colors.textMuted},children:l?`Deduction appliquee : -${re(t)}`:"Aucune deduction appliquee sur ce rapport"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{color:s.colors.textMuted},children:[e.jsx("th",{className:"text-left font-semibold px-4 py-3",children:"Offre"}),e.jsx("th",{className:"text-left font-semibold px-4 py-3",children:"Duree"}),e.jsx("th",{className:"text-right font-semibold px-4 py-3",children:"Prix standard"}),e.jsx("th",{className:"text-right font-semibold px-4 py-3",children:"Prix apres deduction"})]})}),e.jsx("tbody",{children:qs.map(o=>e.jsxs(te.Fragment,{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 pt-4 pb-2",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest",style:{color:s.colors.textMuted},children:o.label}),e.jsxs("a",{href:o.href,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold",style:{color:y},children:["Voir ",o.label]})]})})}),o.offers.map((c,d)=>{const m=Math.max(0,c.price-t);return e.jsxs("tr",{style:{borderBottom:`1px solid ${s.colors.border}`},children:[e.jsx("td",{className:"px-4 py-3",children:o.label}),e.jsx("td",{className:"px-4 py-3",children:c.duration}),e.jsx("td",{className:"px-4 py-3 text-right",style:{color:s.colors.textMuted},children:e.jsx("span",{style:l?{textDecoration:"line-through"}:void 0,children:re(c.price)})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold",style:{color:y},children:re(m)})]},`${o.id}-${d}`)})]},o.id))})]})}),e.jsx("div",{className:"px-4 py-3 text-xs",style:{color:s.colors.textMuted},children:"Le montant de ton scan est deduit a 100% sur chaque formule. Tu gardes la meme qualite de suivi, simplement moins cher."})]})},Se=(t,l,o)=>{var c;try{const d=_s(t),{paragraphs:m,bullets:h,promoLine:n,bonusLine:x,emailLine:b,siteLine:N}=d,L=b.replace(/^email\s*:\s*/i,"").trim()||"coaching@achzodcoaching.com",T=N.replace(/^site\s*:\s*/i,"").trim()||"achzodcoaching.com",C=((c=n.match(/[A-Z0-9_-]{6,}/i))==null?void 0:c[0])||"",D=m.join(" ").replace(/\s+/g," ").trim(),Ce=D.length>380?`${D.slice(0,380).trim()}...`:D,Pe=T.startsWith("http")?T:`https://${T}`,F=o==="debut",Re=F?"Rappel coaching":"Passe a l'action",Me=F?"Deduction 100% du scan":"Execution + ajustements",Ae=Is(r==null?void 0:r.auditType),ps=F?["Deduction 100% du scan si coaching","Ajustements hebdo personnalises","Acces direct pour accelerer les decisions"]:["Pilotage des KPIs et corrections","Protocoles adaptes a ton quotidien","Suivi humain, pas un plan generique"],hs=h.length>0?h.slice(0,6):ps;return F?e.jsxs("div",{className:"rounded-xl border p-6 md:p-8",style:{background:`linear-gradient(135deg, ${y}12 0%, ${s.colors.surface} 100%)`,borderColor:A},children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest px-2 py-1 rounded-full",style:{backgroundColor:Q,color:y,border:`1px solid ${A}`},children:l}),e.jsx("span",{className:"text-xs uppercase tracking-widest",style:{color:s.colors.textMuted},children:Me})]}),e.jsx("h4",{className:"text-2xl font-bold",style:{color:s.colors.text},children:Re}),e.jsx("p",{className:"text-sm leading-relaxed",style:{color:s.colors.textMuted},children:Ce||"Tu as la cartographie. Maintenant, il faut executer avec methode."})]}),C&&e.jsx("span",{className:"text-xs font-mono px-2 py-1 rounded",style:{color:y,border:`1px solid ${A}`},children:C})]}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-3 mb-6",children:hs.map((fs,bs)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",style:{color:s.colors.textMuted},children:[e.jsx("span",{style:{color:y},children:"-"}),e.jsx("span",{children:fs})]},bs))}),ke(Ae),x&&e.jsx("div",{className:"text-xs uppercase tracking-widest mb-4",style:{color:y},children:x}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs",style:{color:s.colors.textMuted},children:[e.jsxs("span",{children:["Email: ",e.jsx("a",{href:`mailto:${L}`,className:"font-semibold",style:{color:s.colors.text},children:L})]}),e.jsxs("span",{children:["Site: ",e.jsx("a",{href:Pe,target:"_blank",rel:"noreferrer",className:"font-semibold",style:{color:s.colors.text},children:T})]})]})]}):e.jsxs("div",{className:"rounded-xl border p-6 md:p-8",style:{backgroundColor:s.colors.surface,borderColor:s.colors.border},children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest px-2 py-1 rounded-full",style:{backgroundColor:Q,color:y,border:`1px solid ${A}`},children:l}),e.jsx("span",{className:"text-xs uppercase tracking-widest",style:{color:s.colors.textMuted},children:Me})]}),e.jsx("h4",{className:"text-2xl font-bold mb-2",style:{color:s.colors.text},children:Re}),e.jsx("p",{className:"text-sm leading-relaxed",style:{color:s.colors.textMuted},children:Ce||"Tu as la cartographie. Ce qui manque, c'est l'execution avec feedback et ajustements continus."})]}),C&&e.jsx("span",{className:"text-xs font-mono px-2 py-1 rounded",style:{color:y,border:`1px solid ${A}`},children:C})]}),ke(Ae),e.jsxs("div",{className:"mt-6 p-4 rounded-lg",style:{background:_(y,.08),border:`1px solid ${A}`},children:[e.jsx("p",{className:"text-sm font-medium",style:{color:y},children:"Deduction 100% du scan sur le coaching"}),e.jsxs("p",{className:"text-xs mt-1",style:{color:s.colors.textMuted},children:[C?`Code promo : ${C}.`:"Code promo disponible apres validation."," Pour toute question, ecris-moi."]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-xs",style:{color:s.colors.textMuted},children:[e.jsxs("span",{children:["Email: ",e.jsx("a",{href:`mailto:${L}`,className:"font-semibold",style:{color:s.colors.text},children:L})]}),e.jsxs("span",{children:["Site: ",e.jsx("a",{href:Pe,target:"_blank",rel:"noreferrer",className:"font-semibold",style:{color:s.colors.text},children:T})]})]})]})}catch(d){console.error("[Ultimate CTA] Render error:",d);const m=P(t);return e.jsx("div",{className:"rounded-xl border p-6 md:p-8 text-sm whitespace-pre-wrap",style:{backgroundColor:s.colors.surface,borderColor:s.colors.border,color:s.colors.text},children:m||"CTA indisponible pour le moment."})}},ms=S>=75?"Une base solide.":S>=60?"Des axes d'optimisation identifies.":"Plusieurs blocages a debloquer.",us=()=>e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(De,{className:"w-10 h-10 mx-auto mb-4",style:{color:s.colors.primary}}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Ton avis compte"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:["Laisse un avis et recois ton code promo ",e.jsx("strong",{children:"-20%"})," sur le coaching Achzod par email."]})]}),Qe?e.jsxs("div",{className:"text-center p-8 rounded-sm",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx(Es,{className:"w-16 h-16 mx-auto mb-4 text-green-500"}),e.jsx("h4",{className:"text-xl font-bold mb-2",children:"Merci pour ton avis !"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"Ton retour m'aide a livrer des analyses encore plus precises."})]}):e.jsxs("form",{onSubmit:is,className:"space-y-6 p-8 rounded-sm",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"text-sm font-medium block mb-3",style:{color:"var(--color-text-muted)"},children:"Ta note"}),e.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>Ye(t),className:"p-1 transition-transform hover:scale-110",children:e.jsx(De,{size:32,className:t<=V?"fill-yellow-400 text-yellow-400":"text-gray-400"})},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium block mb-2",style:{color:"var(--color-text-muted)"},children:"Ton email (pour recevoir le code promo)"}),e.jsx("input",{type:"email",value:G,onChange:t=>me(t.target.value),placeholder:"ton@email.com",required:!0,className:"w-full px-4 py-3 rounded text-sm focus:outline-none focus:ring-2 transition-all",style:{backgroundColor:"var(--color-bg)",border:"1px solid var(--color-border)",color:"var(--color-text)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium block mb-2",style:{color:"var(--color-text-muted)"},children:"Ton commentaire (min. 10 caracteres)"}),e.jsx("textarea",{value:H,onChange:t=>Ze(t.target.value),placeholder:"Ton retour sur l'Ultimate Scan...",rows:4,required:!0,minLength:10,className:"w-full px-4 py-3 rounded text-sm focus:outline-none focus:ring-2 transition-all resize-none",style:{backgroundColor:"var(--color-bg)",border:"1px solid var(--color-border)",color:"var(--color-text)"}}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--color-text-muted)"},children:[H.length,"/10 caracteres minimum"]})]}),pe&&e.jsx("div",{className:"text-red-500 text-sm text-center p-3 rounded-lg bg-red-500/10",children:pe}),e.jsx("button",{type:"submit",disabled:ue,className:"w-full py-3 rounded font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:s.colors.primary,color:s.type==="dark"?"#000":"#fff"},children:ue?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 animate-spin"}),"Envoi..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ts,{className:"w-4 h-4"}),"Envoyer mon avis"]})})]})]}),xs=t=>{var c,d,m,h;if(t.id==="cta-debut"&&r.ctaDebut)return Se(r.ctaDebut,"Rappel","debut");if(t.id==="cta-fin"&&r.ctaFin)return Se(r.ctaFin,"Execution","fin");if(t.id==="photo-analysis"){if(!r.photoAnalysis||typeof r.photoAnalysis!="object")return e.jsxs("div",{className:"p-6 rounded-sm border",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ms,{className:"w-5 h-5",style:{color:s.colors.primary}}),e.jsx("p",{className:"font-semibold",children:"Photos non disponibles"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"Les photos n'ont pas ete soumises ou traitees. Ajoute les photos (face/profil/dos) pour activer l'analyse complete."})]});const n=r.photoAnalysis,x={summary:i(n.summary)||i(n.medicalObservations),posture:i(n.postureAnalysis)||i(n.posture),muscular:i(n.muscularAnalysis)||i(n.muscularBalance),fat:i(n.fatAnalysis)||i(n.fatDistribution),recommendations:i(n.correctiveProtocol)||i(n.recommendations)||i(n.medicalObservations),score:typeof n.score=="number"?n.score:void 0},b=typeof x.score=="number"?x.score:Math.round(S);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-sm border",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",style:{color:s.colors.primary},children:[e.jsx(As,{size:18}),e.jsx("span",{className:"text-sm font-semibold uppercase tracking-widest",children:"Synthese visuelle"})]}),e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(ze,{score:Math.round(b),max:100,size:160,strokeWidth:4,color:s.colors.primary})}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:x.summary||"Analyse photo en cours de synthese."})]}),e.jsxs("div",{className:"p-6 rounded-sm border",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx("h4",{className:"text-sm font-bold mb-3",style:{color:s.colors.primary},children:"Observations cles"}),e.jsxs("div",{className:"space-y-3 text-sm",style:{color:"var(--color-text-muted)"},children:[e.jsxs("p",{children:[e.jsx("strong",{style:{color:s.colors.text},children:"Posture:"})," ",x.posture||"Analyse en attente."]}),e.jsxs("p",{children:[e.jsx("strong",{style:{color:s.colors.text},children:"Musculature:"})," ",x.muscular||"Analyse en attente."]}),e.jsxs("p",{children:[e.jsx("strong",{style:{color:s.colors.text},children:"Graisse:"})," ",x.fat||"Analyse en attente."]})]})]})]}),e.jsxs("div",{className:"p-6 rounded-sm border",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx("h4",{className:"text-sm font-bold mb-3",style:{color:s.colors.primary},children:"Correctifs prioritaires"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:x.recommendations||"Protocoles correctifs en cours de consolidation."})]})]})}if(t.id==="supplements"){const n=r.supplementsHtml?_e(r.supplementsHtml):"";return e.jsxs("div",{className:"p-6 rounded-sm border",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[n&&e.jsx("div",{className:`mb-8 prose max-w-none ${s.type==="dark"?"prose-invert":""}`,style:{color:s.colors.text,"--tw-prose-body":s.colors.text,"--tw-prose-headings":s.colors.text,"--tw-prose-strong":s.colors.text,"--tw-prose-bullets":s.colors.primary},dangerouslySetInnerHTML:{__html:n}}),W.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[var(--color-border)]",children:[e.jsx("th",{className:"text-left py-3 px-2 text-[var(--color-text-muted)] font-bold",children:"Supplement"}),e.jsx("th",{className:"text-left py-3 px-2 text-[var(--color-text-muted)] font-bold",children:"Dosage"}),e.jsx("th",{className:"text-left py-3 px-2 text-[var(--color-text-muted)] font-bold",children:"Timing"}),e.jsx("th",{className:"text-left py-3 px-2 text-[var(--color-text-muted)] font-bold hidden md:table-cell",children:"Duree"})]})}),e.jsx("tbody",{children:W.slice(0,10).map((x,b)=>{const N=i(x.name),L=i(x.dosage),T=i(x.timing),C=i(x.duration),D=Array.isArray(x.brands)&&x.brands.length>0?i(x.brands[0]):"";return e.jsxs("tr",{className:"border-b border-[var(--color-border)]/50",children:[e.jsxs("td",{className:"py-3 px-2",children:[e.jsx("span",{className:"font-medium",style:{color:s.colors.primary},children:N}),D&&e.jsx("div",{className:"text-xs text-[var(--color-text-muted)]",children:D})]}),e.jsx("td",{className:"py-3 px-2",children:e.jsx("span",{className:"px-2 py-1 rounded bg-[var(--color-bg)] text-xs font-mono",children:L})}),e.jsx("td",{className:"py-3 px-2 text-[var(--color-text-muted)]",children:T}),e.jsx("td",{className:"py-3 px-2 text-[var(--color-text-muted)] hidden md:table-cell",children:C})]},b)})})]})})]})}if(t.id==="plan")return e.jsx("div",{className:"space-y-4",children:[{title:"Semaine 1",subtitle:"Fondations",content:i((c=r.weeklyPlan)==null?void 0:c.week1),alpha:.7},{title:"Semaine 2",subtitle:"Consolidation",content:i((d=r.weeklyPlan)==null?void 0:d.week2),alpha:.55},{title:"Semaines 3-4",subtitle:"Optimisation",content:i((m=r.weeklyPlan)==null?void 0:m.weeks3_4),alpha:.45},{title:"Mois 2-3",subtitle:"Maintenance",content:i((h=r.weeklyPlan)==null?void 0:h.months2_3),alpha:.35}].map((n,x)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-1 rounded-full",style:{backgroundColor:_(y,n.alpha)}}),e.jsxs("div",{className:"flex-1 p-4 rounded border",style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-bold",children:n.title}),e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-[var(--color-bg)] text-[var(--color-text-muted)]",children:n.subtitle})]}),e.jsx("p",{className:"text-sm text-[var(--color-text-muted)] leading-relaxed",children:n.content})]})]},x))});if(t.id==="review")return us();const l=typeof t.content=="string"?t.content:he(t.content),o=_e(l);return e.jsx("div",{className:`prose prose-lg max-w-none ${s.type==="dark"?"prose-invert":""} prose-p:text-[var(--color-text)] prose-p:leading-relaxed prose-headings:text-[var(--color-text)] prose-strong:text-[var(--color-text)]`,style:{color:s.colors.text,"--tw-prose-body":s.colors.text,"--tw-prose-headings":s.colors.text,"--tw-prose-strong":s.colors.text,"--tw-prose-bullets":s.colors.primary},dangerouslySetInnerHTML:{__html:o}})};return e.jsxs("div",{className:"ultrahuman-report flex h-screen font-sans overflow-hidden selection:bg-white/20 relative transition-colors duration-500",style:{...ds,backgroundColor:s.colors.background,color:s.colors.text},children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 z-[60]",style:{backgroundColor:"var(--color-border)"},children:e.jsx("div",{className:"h-full transition-all duration-150 ease-out",style:{width:`${Ue}%`,backgroundColor:s.colors.primary}})}),e.jsx("div",{className:"fixed inset-0 pointer-events-none",style:{backgroundImage:`linear-gradient(to right, ${s.colors.grid} 1px, transparent 1px), linear-gradient(to bottom, ${s.colors.grid} 1px, transparent 1px)`,backgroundSize:"60px 60px"}}),e.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-80 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 ${ae?"translate-x-0":"-translate-x-full"} border-r flex flex-col`,style:{backgroundColor:"var(--color-bg)",borderColor:"var(--color-border)"},children:e.jsx($s,{sections:j,activeSection:q,onNavigate:se,themes:Be,currentTheme:s,onThemeChange:Oe,clientName:J,auditType:"ULTIMATE_SCAN"})}),ae&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>O(!1)}),e.jsxs("main",{ref:$,className:"flex-1 overflow-y-auto relative z-10 scroll-smooth",children:[e.jsxs("div",{className:"fixed bottom-8 right-8 z-50 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>se("dashboard"),className:"w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-xl",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",color:"var(--color-text-muted)"},children:e.jsx(Te,{size:16})}),e.jsxs("div",{className:"flex flex-col rounded-full shadow-xl overflow-hidden",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx("button",{onClick:()=>we("prev"),className:"w-10 h-10 flex items-center justify-center hover:opacity-70 transition-colors",style:{color:"var(--color-text)"},children:e.jsx(Te,{size:16})}),e.jsx("div",{className:"h-[1px] w-full",style:{backgroundColor:"var(--color-border)"}}),e.jsx("button",{onClick:()=>we("next"),className:"w-10 h-10 flex items-center justify-center hover:opacity-70 transition-colors",style:{color:"var(--color-text)"},children:e.jsx(js,{size:16})})]})]}),e.jsxs("div",{className:"lg:hidden sticky top-0 z-40 backdrop-blur-md px-4 py-4 flex items-center justify-between",style:{backgroundColor:"var(--color-bg)",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("span",{className:"font-bold text-sm tracking-widest uppercase",children:J}),e.jsx("button",{onClick:()=>O(!0),children:e.jsx(Ns,{size:20})})]}),e.jsxs("div",{className:"max-w-[1200px] mx-auto p-6 lg:p-12 space-y-12 lg:space-y-32",children:[e.jsxs("div",{id:"dashboard",className:"pt-8 lg:pt-12",children:[e.jsxs("header",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-8 mb-12",children:[e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full",style:{border:"1px solid var(--color-border)",backgroundColor:"var(--color-surface)"},children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full animate-pulse bg-green-500"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",style:{color:"var(--color-text-muted)"},children:"Ultimate Scan"})]}),e.jsxs("h1",{className:"text-5xl lg:text-7xl font-medium tracking-tighter leading-[0.9]",children:[J,", ",e.jsx("br",{}),e.jsx("span",{style:{color:s.colors.textMuted},children:"voici ton ultimate scan."})]}),e.jsxs("p",{className:"text-lg leading-relaxed max-w-lg",style:{color:"var(--color-text-muted)"},children:[Math.round(S),"/100 — ",ms]})]}),e.jsx("div",{className:"flex gap-4 items-end",children:e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsxs("div",{className:"text-3xl font-bold font-mono",children:[Math.round(S),e.jsx("span",{className:"text-lg opacity-50",children:"/100"})]}),e.jsx("div",{className:"text-[10px] uppercase tracking-widest",style:{color:"var(--color-text-muted)"},children:"Score Global"})]})})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"lg:col-span-1 lg:row-span-2 rounded-sm p-8 flex flex-col justify-between relative overflow-hidden group",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity duration-500",children:e.jsx(ws,{size:80})}),e.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest",style:{color:"var(--color-text-muted)"},children:"Performance Globale"}),e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ze,{score:Math.round(S),max:100,size:180,strokeWidth:4,color:s.colors.primary})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full ${z(M).color}`,children:z(M).label})})]}),e.jsxs("div",{className:"lg:col-span-2 lg:row-span-2 rounded-sm p-1 relative group",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx("div",{className:"absolute top-6 left-6 z-10",children:e.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest",style:{color:"var(--color-text-muted)"},children:"Balance Systemique"})}),e.jsx("div",{className:"h-full w-full min-h-[300px] flex items-center justify-center pt-8",children:e.jsx(Ls,{data:Ne,color:s.colors.primary,gridColor:s.colors.grid,labelColor:s.colors.textMuted,tooltipBg:s.colors.surface,tooltipBorder:s.colors.border,tooltipText:s.colors.text})})]}),e.jsxs("div",{className:"rounded-sm p-6 flex flex-col justify-between hover:opacity-90 transition-colors cursor-default",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[te.createElement(qe[(g==null?void 0:g.key)||"stress"]||oe,{size:20,style:{color:"var(--color-text-muted)"}}),e.jsx("span",{className:`text-[10px] font-mono px-1.5 py-0.5 rounded ${z((g==null?void 0:g.value)||0).color}`,children:z((g==null?void 0:g.value)||0).label})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-medium mt-4",children:[(g==null?void 0:g.value)??M,e.jsx("span",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"/10"})]}),e.jsx("div",{className:"text-xs font-mono uppercase mt-1",style:{color:"var(--color-text-muted)"},children:(g==null?void 0:g.label)||"Priorite"})]})]}),e.jsxs("div",{className:"rounded-sm p-6 flex flex-col justify-between hover:opacity-90 transition-colors cursor-default",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[te.createElement(qe[(v==null?void 0:v.key)||"energie"]||le,{size:20,style:{color:"var(--color-text-muted)"}}),e.jsx("span",{className:`text-[10px] font-mono px-1.5 py-0.5 rounded ${z((v==null?void 0:v.value)||0).color}`,children:z((v==null?void 0:v.value)||0).label})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-medium mt-4",children:[(v==null?void 0:v.value)??M,e.jsx("span",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"/10"})]}),e.jsx("div",{className:"text-xs font-mono uppercase mt-1",style:{color:"var(--color-text-muted)"},children:(v==null?void 0:v.label)||"Point fort"})]})]}),e.jsxs("div",{className:"lg:col-span-4 rounded-sm p-6 relative overflow-hidden flex flex-col md:flex-row gap-8 items-center",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsxs("h3",{className:"text-sm font-bold mb-2 flex items-center gap-2",style:{color:"var(--color-primary)"},children:[e.jsx(le,{size:16})," Potentiel"]}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"En debloquant tes systemes prioritaires, projection d'amelioration sur 90 jours."})]}),e.jsx("div",{className:"w-full md:w-2/3 h-[150px]",children:e.jsx(Ds,{color:s.colors.primary,currentScore:M})})]})]})]}),e.jsxs("div",{className:"space-y-0 relative",children:[e.jsx("div",{className:"absolute left-0 lg:left-[240px] top-0 bottom-0 w-[1px] hidden lg:block",style:{backgroundColor:"var(--color-border)"}}),cs.map((t,l)=>e.jsx("section",{id:t.id,className:"scroll-mt-32 group relative pb-24 lg:pb-32",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-24",children:[e.jsx("div",{className:"lg:w-[240px] flex-shrink-0",children:e.jsxs("div",{className:"sticky top-24 pr-8 lg:text-right",children:[e.jsx("span",{className:"font-mono text-4xl lg:text-5xl font-bold group-hover:opacity-50 transition-colors block mb-2 opacity-20",style:{color:"var(--color-border)"},children:l+1<10?`0${l+1}`:l+1}),e.jsx("h2",{className:"text-xl font-bold tracking-tight mb-2 leading-tight",style:{color:"var(--color-text)"},children:t.title}),t.subtitle&&e.jsx("p",{className:"text-xs font-mono uppercase tracking-widest mb-4",style:{color:s.colors.primary},children:t.subtitle}),t.chips&&t.chips.length>0&&e.jsx("div",{className:"flex flex-wrap lg:justify-end gap-2 mt-4",children:t.chips.map(o=>e.jsx("span",{className:"px-2 py-1 text-[9px] font-mono uppercase rounded",style:{border:"1px solid var(--color-border)",color:"var(--color-text-muted)"},children:o},o))})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:xs(t)})]})},t.id))]})]})]})]})},Xs=()=>{const{auditId:a}=ys(),r=()=>{a&&fetch(`/api/audit/${a}/regenerate`,{method:"POST"}).catch(()=>{}),typeof window<"u"&&window.location.reload()};return e.jsx(Bs,{onRetry:r,children:e.jsx(Us,{auditId:a})})};export{Xs as default};
