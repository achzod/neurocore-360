import{r as h,j as t,B as n,cp as S}from"./vendor-C1l_5e97.js";import{u as I}from"./BloodThemeContext-E2xwPxg0.js";const E=({score:u,maxScore:i=100,size:s=280,strokeWidth:f=14,label:l="Score Global",sublabel:a,targetScore:o,percentile:m,showComparison:y=!1})=>{const{theme:e}=I(),x=h.useId().replace(/:/g,""),p=`scoreGrid${x}`,v=`scoreGradient${x}`,$=`scoreGlow${x}`,[g,k]=h.useState(0),j=(s-f*2)/2,r=2*Math.PI*j,w=Math.max(0,Math.min(100,u/i*100)),N=r-w/100*r;h.useEffect(()=>{let d=0;const b=u,M=(b-d)/(2e3/16),D=setInterval(()=>{d+=M,d>=b?(k(b),clearInterval(D)):k(Math.floor(d))},16);return()=>clearInterval(D)},[u]);const c=(d=>d>=85?{from:e.status.optimal,to:e.status.normal,glow:`${e.status.optimal}4D`}:d>=70?{from:e.status.normal,to:e.primaryBlue,glow:`${e.status.normal}4D`}:d>=50?{from:e.status.suboptimal,to:e.status.suboptimal,glow:`${e.status.suboptimal}4D`}:{from:e.status.critical,to:e.status.critical,glow:`${e.status.critical}4D`})(w);return t.jsxs("div",{className:"relative inline-flex items-center justify-center",role:"figure","aria-label":`${l}: ${u} sur ${i}${a?`, ${a}`:""}${m!==void 0&&y?`, Top ${100-m}%`:""}`,children:[t.jsxs("svg",{width:s,height:s,className:"transform -rotate-90",role:"img","aria-hidden":"true",children:[t.jsxs("defs",{children:[t.jsx("pattern",{id:p,width:"12",height:"12",patternUnits:"userSpaceOnUse",children:t.jsx("path",{d:"M 12 0 L 0 0 0 12",fill:"none",stroke:e.grid,strokeWidth:"0.5"})}),t.jsxs("linearGradient",{id:v,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:c.from}),t.jsx("stop",{offset:"100%",stopColor:c.to})]}),t.jsxs("filter",{id:$,children:[t.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),t.jsxs("feMerge",{children:[t.jsx("feMergeNode",{in:"coloredBlur"}),t.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),t.jsx("circle",{cx:s/2,cy:s/2,r:j,fill:`url(#${p})`,stroke:e.borderSubtle,strokeWidth:f}),o&&t.jsx(n.circle,{cx:s/2,cy:s/2,r:j,fill:"none",stroke:`${e.status.optimal}4D`,strokeWidth:f/2,strokeDasharray:r,strokeDashoffset:r-o/i*r,strokeLinecap:"round",initial:{strokeDashoffset:r},animate:{strokeDashoffset:r-o/i*r},transition:{duration:2,delay:.5,ease:"easeOut"}}),t.jsx(n.circle,{cx:s/2,cy:s/2,r:j,fill:"none",stroke:`url(#${v})`,strokeWidth:f,strokeLinecap:"round",strokeDasharray:r,initial:{strokeDashoffset:r},animate:{strokeDashoffset:N},transition:{duration:2,ease:[.22,1,.36,1]},filter:`url(#${$})`}),t.jsx(n.circle,{cx:s/2,cy:s/2,r:j,fill:"none",stroke:c.from,strokeWidth:f/3,strokeLinecap:"round",strokeDasharray:r,strokeDashoffset:N,opacity:.5,animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{filter:"blur(6px)"}})]}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[t.jsx(n.div,{className:"text-7xl font-bold font-mono tabular-nums",style:{color:c.from,textShadow:`0 0 40px ${c.glow}`},initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:200},"aria-live":"polite","aria-atomic":"true",children:g}),t.jsx("div",{className:"text-xs uppercase tracking-widest mt-2 font-semibold",style:{color:e.textTertiary},children:l}),a&&t.jsx("div",{className:"text-[10px] mt-1",style:{color:e.textTertiary},children:a}),m!==void 0&&y&&t.jsxs(n.div,{className:"mt-4 px-3 py-1.5 rounded-full text-xs font-semibold",style:{background:`linear-gradient(135deg, ${c.glow}, transparent)`,border:`1px solid ${c.from}`,color:c.from},initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.5},children:["Top ",100-m,"%"]})]}),o&&t.jsxs(n.div,{className:"absolute text-xs font-semibold",style:{top:"20%",right:"10%",color:e.status.optimal},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:1.5,duration:.5},children:["Objectif: ",o]})]})},L=({label:u,value:i,unit:s,icon:f,color:l="#06b6d4",trend:a})=>{const{theme:o}=I(),[m,y]=h.useState(0),e=h.useRef(null),x=S(e,{once:!0,margin:"-100px"});return h.useEffect(()=>{if(!x)return;let p=0;const $=i/(2e3/16),g=setInterval(()=>{p+=$,p>=i?(y(i),clearInterval(g)):y(Math.floor(p))},16);return()=>clearInterval(g)},[x,i]),t.jsx(n.div,{ref:e,className:"relative group cursor-default",initial:{opacity:0,y:20},animate:x?{opacity:1,y:0}:{},transition:{duration:.5},whileHover:{scale:1.05,y:-4},role:"article","aria-label":`${u}: ${i}${s||""}${a?`, tendance ${a.direction==="up"?"en hausse":"en baisse"} de ${a.value}`:""}`,children:t.jsxs("div",{className:"rounded-xl p-6",style:{background:`${o.surfaceElevated}66`,backdropFilter:"blur(8px)",border:`1px solid ${o.borderDefault}`},children:[t.jsx(n.div,{className:"w-12 h-12 rounded-xl flex items-center justify-center mb-4",style:{background:`${l}20`,border:`1px solid ${l}40`},whileHover:{rotate:15},transition:{duration:.3},children:t.jsx(f,{className:"w-6 h-6",style:{color:l}})}),t.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[t.jsx(n.span,{className:"text-4xl font-bold font-mono tabular-nums",style:{color:l,textShadow:`0 0 20px ${l}40`},"aria-live":"polite","aria-atomic":"true",children:m}),s&&t.jsx("span",{className:"text-lg",style:{color:o.textTertiary},children:s})]}),t.jsx("div",{className:"text-sm",style:{color:o.textSecondary},children:u}),a&&t.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs",style:{color:a.direction==="up"?"#10b981":"#f43f5e"},children:[t.jsx("span",{children:a.direction==="up"?"↑":"↓"}),t.jsx("span",{className:"font-semibold",children:a.value})]}),t.jsx(n.div,{className:"absolute inset-0 rounded-xl pointer-events-none",style:{boxShadow:`inset 0 0 40px ${l}20`,opacity:0},whileHover:{opacity:1},transition:{duration:.3}})]})})};export{L as A,E as R};
