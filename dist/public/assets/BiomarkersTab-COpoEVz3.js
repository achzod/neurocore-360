import{j as s,aU as P,bb as I,bh as R,aO as X,B as w,aA as z,at as S,aX as E,ba as F,aj as U,ax as _}from"./vendor-C1l_5e97.js";import{n as k,g,b as B}from"./useBloodCalculations-B2exXnzR.js";import{u as A}from"./BloodThemeContext-E2xwPxg0.js";const L={optimal:X,normal:R,suboptimal:I,critical:P};function W({status:a,label:l,className:e=""}){const o=k(a),t=g(o),r=L[o];return s.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-[11px] font-semibold ${e}`,style:{color:t.primary,background:t.bg,borderColor:t.border},children:[s.jsx(r,{className:"h-3.5 w-3.5"}),l||B(o)]})}const h=(a,l,e)=>Math.min(Math.max(a,l),e);function q({value:a,unit:l,status:e,normalMin:o,normalMax:t,optimalMin:r,optimalMax:u,normalLabel:n,optimalLabel:x,className:N=""}){const{theme:c}=A(),d=k(e),b=g(d),i=typeof o=="number"&&typeof t=="number"&&t>o,p=i?o:a-1,m=(i?t:a+1)-p||1,f=h((a-p)/m*100,0,100),j=i?h((o-p)/m*100,0,100):0,v=i?h((t-o)/m*100,0,100):100,O=h(100-j-v,0,100),$=i&&typeof r=="number"?(r-p)/m*100:null,C=i&&typeof r=="number"&&typeof u=="number"?(u-r)/m*100:null;return s.jsxs("div",{className:`space-y-2 ${N}`,children:[s.jsxs("div",{className:"flex items-center justify-between text-[11px]",style:{color:c.textTertiary},children:[s.jsx("span",{children:n||(i?`Normal: ${o}-${t}`:"Normal: N/A")}),s.jsx("span",{children:x||(r!==void 0&&u!==void 0?`Optimal: ${r}-${u}`:"Optimal: N/A")})]}),s.jsxs("div",{className:"relative h-3 overflow-hidden rounded-full",style:{backgroundColor:c.borderSubtle},children:[s.jsxs("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{style:{width:`${j}%`,backgroundColor:`${c.status.critical}40`}}),s.jsx("div",{style:{width:`${v}%`,backgroundColor:`${c.status.suboptimal}40`}}),s.jsx("div",{style:{width:`${O}%`,backgroundColor:`${c.status.critical}40`}})]}),$!==null&&C!==null&&s.jsx(w.div,{className:"absolute top-0 h-full rounded-full",style:{left:`${h($,0,100)}%`,width:`${h(C,0,100)}%`,backgroundColor:`${c.status.optimal}73`},initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.8,ease:"easeOut"}}),s.jsx(w.div,{className:"absolute top-1/2 h-3 w-3 -translate-y-1/2 rounded-full border-2",style:{left:`calc(${f}% - 6px)`,backgroundColor:c.textPrimary||"#000000",borderColor:b.primary,boxShadow:`0 0 12px ${b.primary}`},initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.6,ease:"easeOut"}})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:"font-semibold",style:{color:b.primary},children:[a," ",l]}),s.jsx("span",{className:"text-[11px]",style:{color:c.textTertiary},children:B(d)})]})]})}function H({value:a,unit:l,normalMin:e,normalMax:o,optimalMin:t,optimalMax:r,status:u="normal"}){const{theme:n}=A(),x=g(u),N=typeof e=="number"?e:typeof t=="number"?t:a-1,c=typeof o=="number"?o:typeof r=="number"?r:a+1,d=Math.max(0,Math.min(N*.5,a*.5)),b=Math.max(c*1.5,a*1.5),i=b-d,p=(a-d)/i*100,y=e?(e-d)/i*100:0,m=o?(o-d)/i*100:100,f=t?(t-d)/i*100:y,j=r?(r-d)/i*100:m;return s.jsxs("div",{className:"w-full space-y-2",children:[s.jsxs("div",{className:"flex items-baseline justify-between",children:[s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-bold font-mono tabular-nums",style:{color:x.primary},children:a}),l&&s.jsx("span",{className:"text-sm opacity-60",children:l})]}),s.jsx("div",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:`${x.primary}20`,color:x.primary},children:u})]}),s.jsxs("div",{className:"relative h-12 mb-8",children:[s.jsx("div",{className:"absolute inset-0 rounded-lg",style:{backgroundColor:n.surfaceMuted}}),s.jsx("div",{className:"absolute top-0 bottom-0 rounded-lg",style:{left:`${y}%`,width:`${m-y}%`,backgroundColor:`${n.status.normal}30`,border:`1px solid ${n.status.normal}60`}}),t!==void 0&&r!==void 0&&s.jsx("div",{className:"absolute top-0 bottom-0 rounded-lg",style:{left:`${f}%`,width:`${j-f}%`,backgroundColor:`${n.status.optimal}30`,border:`1px solid ${n.status.optimal}80`}}),s.jsx("div",{className:"absolute top-0 bottom-0 w-1 rounded-full transition-all duration-300",style:{left:`${p}%`,backgroundColor:x.primary,boxShadow:`0 0 12px ${x.primary}`},children:s.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-3 h-3 rounded-full",style:{backgroundColor:x.primary,border:`2px solid ${n.surface}`}})}),s.jsxs("div",{className:"absolute -bottom-5 left-0 right-0 flex justify-between text-xs opacity-40",children:[s.jsx("span",{children:d.toFixed(0)}),s.jsx("span",{children:b.toFixed(0)})]})]}),s.jsxs("div",{className:"flex gap-4 text-xs opacity-60 mt-6",children:[e!==void 0&&o!==void 0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:`${n.status.normal}60`}}),s.jsxs("span",{children:["Normal: ",e,"-",o]})]}),t!==void 0&&r!==void 0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:`${n.status.optimal}80`}}),s.jsxs("span",{children:["Optimal: ",t,"-",r]})]})]})]})}const T={hormonal:U,thyroid:S,metabolic:F,inflammation:E,vitamins:S,liver_kidney:z};function K({panelGroups:a,currentTheme:l}){return s.jsx("div",{className:"space-y-8 sm:space-y-10",children:a.map(e=>{const o=T[e.id]||_;return s.jsxs("section",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(o,{className:"w-5 h-5 flex-shrink-0",style:{color:l.colors.primary}}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:e.title}),s.jsx("p",{className:"text-xs sm:text-sm",style:{color:l.colors.textMuted},children:e.subtitle})]})]}),e.markers.length===0?s.jsx("div",{className:"rounded border p-4 text-sm",style:{backgroundColor:l.colors.surface,borderColor:l.colors.border},children:"Aucun biomarqueur renseignÃ© pour ce panel."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:e.markers.map(t=>s.jsxs("div",{className:"rounded border p-3 sm:p-4",style:{backgroundColor:l.colors.surface,borderColor:l.colors.border},children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 sm:gap-3 mb-3 sm:mb-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold break-words",children:t.name}),s.jsxs("p",{className:"text-xs sm:text-sm",style:{color:l.colors.textMuted},children:[t.value," ",t.unit]})]}),s.jsx(W,{status:t.status})]}),s.jsx(H,{value:t.value,unit:t.unit,status:t.status,normalMin:t.normalMin,normalMax:t.normalMax,optimalMin:t.optimalMin,optimalMax:t.optimalMax}),s.jsx(q,{value:t.value,unit:t.unit,status:t.status,normalMin:t.normalMin,normalMax:t.normalMax,optimalMin:t.optimalMin,optimalMax:t.optimalMax}),t.interpretation&&s.jsx("p",{className:"text-xs sm:text-sm mt-3 break-words",style:{color:l.colors.textMuted},children:t.interpretation})]},t.id))})]},e.id)})})}export{K as BiomarkersTab};
