import{r as j,j as e,B as l,c5 as w,c6 as $,c7 as C,l as S,aW as P,aI as z,n as R}from"./vendor-Bxh4p1l9.js";import{u as b}from"./BloodThemeContext-MSlOtGFX.js";const q={optimal:"▲",normal:"●",suboptimal:"▼",critical:"⚠"},X=j.memo(function({marker:a}){const{theme:t}=b(),r=t.status[a.status];return e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},whileHover:{scale:1.02,transition:{duration:.2}},className:"BiomarkerCardPremium relative overflow-hidden rounded-xl border p-6 transition-all duration-300",style:{backgroundColor:`${r}0D`,borderColor:`${r}33`,boxShadow:`0 12px 30px ${r}1A`},children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-display text-sm font-bold uppercase tracking-wide",style:{color:t.textPrimary},children:a.name}),e.jsx("span",{className:"text-2xl",style:{color:r},"aria-hidden":"true",children:q[a.status]})]}),e.jsxs("div",{className:"mt-4 flex items-baseline gap-2",children:[e.jsx("span",{className:"font-data text-4xl font-bold",style:{color:r},children:a.value}),e.jsx("span",{className:"font-data text-lg",style:{color:t.textSecondary},children:a.unit})]}),a.normalMin!==null&&a.normalMax!==null&&e.jsxs("div",{className:"mt-3 font-body text-xs",style:{color:t.textSecondary},children:["Normal: ",a.normalMin," - ",a.normalMax," ",a.unit]}),e.jsx(l.div,{className:"absolute inset-x-0 top-0 h-[2px]",style:{background:`linear-gradient(90deg, transparent, ${r}, transparent)`},initial:{x:"-100%"},whileHover:{x:"100%",transition:{duration:1,repeat:1/0}}})]})})});X.displayName="BiomarkerCardPremium";const L=({title:i,value:a,unit:t,trend:r,trendValue:d,icon:s,status:o="normal",children:n})=>{const{theme:c}=b(),u=j.useRef(null),p=w(0),y=w(0),T=$(C(y,[-.5,.5],[5,-5]),{stiffness:150,damping:20}),E=$(C(p,[-.5,.5],[-5,5]),{stiffness:150,damping:20}),k=N=>{if(!u.current)return;const m=u.current.getBoundingClientRect(),H=m.left+m.width/2,I=m.top+m.height/2;p.set((N.clientX-H)/m.width),y.set((N.clientY-I)/m.height)},A=()=>{p.set(0),y.set(0)},h=c.status[o],x={border:`${h}66`,glow:`${h}33`,text:h},D={up:"↑",down:"↓",stable:"→"};return e.jsx(l.div,{ref:u,className:"relative group cursor-pointer",style:{perspective:1e3},onMouseMove:k,onMouseLeave:A,whileHover:{scale:1.02},transition:{type:"spring",stiffness:300,damping:20},children:e.jsxs(l.div,{className:"relative overflow-hidden rounded-2xl",style:{rotateX:T,rotateY:E,transformStyle:"preserve-3d",background:`${c.surfaceElevated}99`,backdropFilter:"blur(12px)",border:`1px solid ${x.border}`},children:[e.jsx(l.div,{className:"absolute inset-0 rounded-2xl pointer-events-none",style:{background:`linear-gradient(135deg, ${x.border}, transparent, ${x.border})`,opacity:0},whileHover:{opacity:1},transition:{duration:.3}}),e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-5",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")`,backgroundSize:"200px 200px"}}),e.jsx(l.div,{className:"absolute inset-0 rounded-2xl pointer-events-none",style:{boxShadow:`inset 0 0 60px ${x.glow}`,opacity:0},whileHover:{opacity:1},transition:{duration:.5}}),e.jsxs("div",{className:"relative z-10 p-8",style:{transform:"translateZ(20px)"},children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s&&e.jsx(l.div,{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{background:`linear-gradient(135deg, ${x.glow}, transparent)`,border:`1px solid ${x.border}`},whileHover:{rotate:360},transition:{duration:.6},children:s}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm uppercase tracking-wider font-semibold",style:{color:c.textSecondary},children:i}),r&&d&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("span",{style:{color:x.text},children:D[r]}),e.jsx("span",{className:"text-xs",style:{color:c.textTertiary},children:d})]})]})]})}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsx(l.div,{className:"text-6xl font-bold font-mono tabular-nums",style:{color:x.text,textShadow:`0 0 30px ${x.glow}`},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",delay:.1},children:a}),t&&e.jsx("span",{className:"text-2xl font-medium",style:{color:c.textTertiary},children:t})]}),n&&e.jsx("div",{className:"mt-6",children:n})]}),e.jsx(l.div,{className:"absolute inset-x-0 h-px pointer-events-none",style:{background:`linear-gradient(90deg, transparent, ${x.text}, transparent)`,boxShadow:`0 0 10px ${x.glow}`},animate:{top:["-10%","110%"]},transition:{duration:3,repeat:1/0,ease:"linear"}})]})})},W=({phases:i,currentPhase:a=1})=>{const{theme:t}=b(),[r,d]=j.useState(a);return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsx("div",{className:"absolute top-6 left-0 right-0 h-0.5",style:{backgroundColor:t.borderDefault},children:e.jsx(l.div,{className:"h-full",style:{background:`linear-gradient(to right, ${t.status.optimal}, ${t.primaryBlue})`},initial:{width:"0%"},animate:{width:`${(a-1)/(i.length-1)*100}%`},transition:{duration:1,ease:"easeOut"}})}),i.map((s,o)=>{const n=s.id===a,c=s.id<a||s.completed;return e.jsxs("div",{className:"relative flex flex-col items-center z-10",children:[e.jsx(l.button,{className:"w-12 h-12 rounded-full flex items-center justify-center relative",style:{background:n?`linear-gradient(135deg, ${t.primaryBlue}, ${t.status.normal})`:c?t.status.optimal:`${t.textTertiary}33`,border:n?`3px solid ${t.primaryBlue}80`:"none"},onClick:()=>d(r===s.id?null:s.id),whileHover:{scale:1.1},whileTap:{scale:.95},animate:n?{boxShadow:[`0 0 0 0 ${t.primaryBlue}66`,`0 0 0 20px ${t.primaryBlue}00`]}:{},transition:{duration:2,repeat:n?1/0:0},children:c?e.jsx(S,{className:"w-6 h-6",style:{color:c||n?"#fff":t.textSecondary}}):e.jsx("span",{className:"font-bold",style:{color:n?"#fff":t.textSecondary},children:s.id})}),e.jsxs("div",{className:"mt-4 text-center max-w-[120px]",children:[e.jsx("div",{className:"text-sm font-semibold",style:{color:n?t.primaryBlue:t.textSecondary},children:s.title}),e.jsx("div",{className:"text-xs mt-1",style:{color:t.textTertiary},children:s.duration})]}),o<i.length-1&&e.jsx(P,{className:"absolute top-4 -right-8 w-5 h-5",style:{display:"none",color:t.textTertiary}})]},s.id)})]})}),e.jsx("div",{className:"lg:hidden space-y-4",children:i.map(s=>{const o=s.id===a,n=s.id<a||s.completed;return e.jsxs(l.div,{className:"flex gap-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s.id*.1},children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:o?`linear-gradient(135deg, ${t.primaryBlue}, ${t.status.normal})`:n?t.status.optimal:`${t.textTertiary}33`},children:n?e.jsx(S,{className:"w-5 h-5",style:{color:n||o?"#fff":t.textSecondary}}):e.jsx("span",{className:"font-bold text-sm",style:{color:o?"#fff":t.textSecondary},children:s.id})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",style:{color:o?t.primaryBlue:t.textSecondary},children:s.title}),e.jsx("div",{className:"text-xs",style:{color:t.textTertiary},children:s.duration})]})]},s.id)})}),e.jsx(z,{mode:"wait",children:r!==null&&e.jsx(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:i.filter(s=>s.id===r).map(s=>e.jsxs("div",{className:"rounded-xl p-6",style:{background:`${t.surfaceElevated}99`,backdropFilter:"blur(12px)",border:`1px solid ${t.primaryBlue}4D`},children:[e.jsx("h4",{className:"text-lg font-bold mb-2",style:{color:t.primaryBlue},children:s.title}),e.jsx("p",{className:"text-sm mb-4",style:{color:t.textSecondary},children:s.description}),e.jsx("ul",{className:"space-y-2",children:s.items.map((o,n)=>e.jsxs(l.li,{className:"flex items-start gap-3 text-sm",style:{color:t.textSecondary},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:n*.05},children:[e.jsx(R,{className:"w-1.5 h-1.5 mt-2 flex-shrink-0",style:{fill:t.primaryBlue,color:t.primaryBlue}}),e.jsx("span",{children:o})]},n))})]},s.id))})})]})},f=new Map,g=new Map,v=new Map,B=/(Derek(?: de MPMD)?|MPMD|Huberman|Attia|Masterjohn|Examine(?:\.com)?)/gi,F=i=>{if(g.has(i))return g.get(i);const a=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();return g.set(i,a),a},_=i=>{if(f.has(i))return f.get(i);const a=[],t=/^##\s+(.+)$/gm,r=[];let d;for(;(d=t.exec(i))!==null;)r.push({title:d[1].trim(),start:d.index+d[0].length,end:i.length});for(let n=0;n<r.length-1;n++)r[n].end=i.lastIndexOf(`
`,r[n+1].start-r[n+1].title.length-3);for(const n of r){const c=i.slice(n.start,n.end).trim();n.title&&a.push({title:n.title,content:c})}const s=(...n)=>a.find(c=>n.some(u=>F(c.title).includes(u))),o={synthesis:s("synthese"),quality:s("qualite des donnees","qualite"),alerts:s("tableau de bord","alertes","vigilance"),potential:s("potentiel recomposition","potentiel"),systems:s("lecture compartimentee","analyse par axe","analyse par axes","systeme","systemes"),interconnections:s("interconnexions","interconnexion","correlations","correlation"),deepDive:s("deep dive"),plan90:s("plan d'action 90 jours","plan 90"),nutrition:s("nutrition"),supplements:s("supplements"),annexes:s("annexes"),sources:s("sources (bibliotheque)","sources scientifiques","sources")};return f.set(i,o),o},M=i=>{if(v.has(i))return v.get(i);const t=i.split(B).map((r,d)=>r.match(B)?e.jsx("span",{className:"font-semibold text-cyan-300",children:r},`hl-${d}`):r);return v.set(i,t),t},G=i=>typeof i=="string"?M(i):Array.isArray(i)?i.map((a,t)=>typeof a=="string"?e.jsx("span",{children:M(a)},`hl-${t}`):a):i;export{X as B,L as M,W as P,M as h,_ as p,G as r};
