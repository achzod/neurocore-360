const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MarkdownBlock-Bj1tjwsh.js","assets/vendor-Bxh4p1l9.js","assets/markdown-utils-DThyYP7r.js","assets/BloodThemeContext-MSlOtGFX.js"])))=>i.map(i=>d[i]);
import{_ as _e}from"./index-Hhcv7fUA.js";import{j as e,B as h,r as j,bf as Ue,u as Be,bg as Fe,b7 as pe,am as k,bh as E,aO as be,bb as he,bi as fe}from"./vendor-Bxh4p1l9.js";import{p as Ge,M as Ve,B as ze,P as He,h as Qe}from"./markdown-utils-DThyYP7r.js";import{R as De,A as ge}from"./AnimatedStatCard-CaYMYb-m.js";import{I as Ke}from"./InteractiveHeatmap-DjceaB3w.js";import{u as Je}from"./BloodThemeContext-MSlOtGFX.js";function We(){return e.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden opacity-20","aria-hidden":"true",children:[e.jsx(h.div,{className:"absolute -left-1/4 -top-1/4 h-1/2 w-1/2 rounded-full bg-cyan-500 blur-[100px]",animate:{x:[0,50,0],y:[0,30,0]},transition:{duration:30,repeat:1/0,ease:"easeInOut"}}),e.jsx(h.div,{className:"absolute -right-1/4 -bottom-1/4 h-1/2 w-1/2 rounded-full bg-blue-500 blur-[120px]",animate:{x:[0,-40,0],y:[0,-50,0]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}}),e.jsx(h.div,{className:"absolute right-1/3 top-1/3 h-1/3 w-1/3 rounded-full bg-purple-500 blur-[80px]",animate:{x:[0,30,0],y:[0,-30,0],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),e.jsx(h.div,{className:"absolute left-1/4 bottom-1/4 h-1/4 w-1/4 rounded-full bg-amber-500 blur-[90px]",animate:{x:[0,-20,0],y:[0,20,0]},transition:{duration:35,repeat:1/0,ease:"easeInOut"}})]})}function Xe(){return e.jsxs("div",{className:"BiomarkerCardPremium rounded-xl border border-[--border-primary] bg-[--bg-tertiary] p-6",children:[e.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-slate-200/70"}),e.jsx("div",{className:"mt-4 h-10 w-32 animate-pulse rounded bg-slate-200/70"}),e.jsx("div",{className:"mt-3 h-3 w-40 animate-pulse rounded bg-slate-200/70"})]})}const ve=j.memo(function({term:t,definition:i}){return e.jsxs("div",{className:"rounded-xl border border-[--border-primary] bg-[--bg-tertiary] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900 font-display",children:t}),e.jsx("p",{className:"mt-2 text-sm text-slate-700",children:i})]})});ve.displayName="GlossaryItem";const ye=j.memo(function({supp:t}){return e.jsx("div",{className:"rounded-xl border border-[--border-primary] bg-[--bg-tertiary] p-5 grain-texture",children:e.jsxs("div",{className:"space-y-2 text-sm text-slate-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"QUOI:"})," ",t.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"POURQUOI:"})," ",t.mechanism]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"COMMENT:"})," ",t.dosage]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"QUAND:"})," ",t.priority===1?"Urgent":"Phase d'optimisation"]}),t.citations&&t.citations.length>0&&e.jsxs("div",{className:"mt-3 rounded-lg bg-[--bg-secondary] p-3",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"EXPERT:"})," ",e.jsx("span",{className:"text-cyan-700",children:t.citations[0]})]})]})})});ye.displayName="SupplementCard";class Ye extends j.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,i){console.error("Report Error:",t,i)}render(){return this.state.hasError?e.jsx("div",{className:"blood-report-premium min-h-screen bg-[--bg-primary] flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-md rounded-xl border border-rose-200 bg-[--bg-secondary] p-8 text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-rose-600",children:"Erreur"}),e.jsx("p",{className:"mt-4 text-sm text-slate-700",children:"Une erreur est survenue lors du chargement du rapport."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 rounded-md bg-cyan-500 px-4 py-2 text-sm font-semibold text-white",children:"Recharger la page"})]})}):this.props.children}}const A=({label:r,variant:t="default",animated:i=!0})=>{const{theme:o}=Je(),c={default:{from:"#06b6d4",to:"#3b82f6",glow:"rgba(6, 182, 212, 0.4)"},accent:{from:"#8b5cf6",to:"#ec4899",glow:"rgba(139, 92, 246, 0.4)"},warning:{from:"#f59e0b",to:"#f97316",glow:"rgba(245, 158, 11, 0.4)"},success:{from:"#10b981",to:"#06b6d4",glow:"rgba(16, 185, 129, 0.4)"}}[t];return e.jsxs("div",{className:"relative flex items-center justify-center my-16",children:[e.jsx("div",{className:"absolute inset-x-0 h-px",style:{background:`linear-gradient(90deg, transparent, ${c.from}, ${c.to}, transparent)`,opacity:.3}}),i&&e.jsx(h.div,{className:"absolute inset-x-0 h-px",style:{background:`linear-gradient(90deg, transparent, ${c.glow}, transparent)`,boxShadow:`0 0 20px ${c.glow}`,width:"30%"},animate:{left:["-30%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear"}}),r&&e.jsx(h.div,{className:"relative z-10 px-6 text-xs uppercase tracking-widest font-semibold",style:{background:o.background,color:c.from},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5,duration:.5},children:r})]})},Ze={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},N={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.22,1,.36,1]}}},es={optimal:100,normal:80,suboptimal:55,critical:30};function Ne(r){return es[r.status]}function ss(r,t){const i=r.filter(c=>c.panel===t);if(!i.length)return 0;const o=i.reduce((c,f)=>c+Ne(f),0);return Math.round(o/i.length)}function ts(r){const t={hormonal:.25,metabolic:.2,thyroid:.15,inflammatory:.15,vitamins:.15,liver_kidney:.1};let i=0,o=0;return Object.keys(t).forEach(c=>{const f=ss(r,c);f>0&&(i+=f*t[c],o+=t[c])}),o>0?Math.round(i/o):0}const ns={testosterone_total:{homme:{"20-29":{p10:400,p25:500,p50:650,p75:800,p90:950},"30-39":{p10:350,p25:450,p50:600,p75:750,p90:900},"40-49":{p10:300,p25:400,p50:550,p75:700,p90:850}}},hdl:{homme:{"20-49":{p10:35,p25:42,p50:50,p75:58,p90:65}},femme:{"20-49":{p10:40,p25:48,p50:56,p75:64,p90:72}}},ldl:{homme:{"20-49":{p10:70,p25:90,p50:110,p75:130,p90:160}},femme:{"20-49":{p10:70,p25:90,p50:105,p75:125,p90:150}}},glycemie_jeun:{homme:{"20-49":{p10:75,p25:82,p50:88,p75:94,p90:100}},femme:{"20-49":{p10:72,p25:80,p50:86,p75:92,p90:98}}},hba1c:{homme:{"20-49":{p10:4.7,p25:4.9,p50:5.2,p75:5.5,p90:5.8}},femme:{"20-49":{p10:4.6,p25:4.8,p50:5.1,p75:5.4,p90:5.7}}}},as=r=>r<30?"20-29":r<40?"30-39":r<50?"40-49":"20-49";function rs(r,t,i,o){var m,p;const c=ns[r];if(!c)return null;const f=as(i),v=((m=c[o])==null?void 0:m[f])||((p=c[o])==null?void 0:p["20-49"]);return v?t<=v.p10?10:t<=v.p25?25:t<=v.p50?50:t<=v.p75?75:t<=v.p90?90:95:null}const ls={testosterone_total:{ageRanges:[{min:20,max:29,sex:"male",percentiles:{p10:350,p25:450,p50:550,p75:700,p90:850}},{min:30,max:39,sex:"male",percentiles:{p10:320,p25:420,p50:520,p75:650,p90:800}}]}},M=(r,t,i,o,c)=>Math.round(o+(r-t)*(c-o)/(i-t));function is(r,t,i,o){const f=rs(r,t,i,o==="male"?"homme":"femme");if(typeof f=="number")return f;const v=ls[r];if(!v)return null;const m=v.ageRanges.find(y=>i>=y.min&&i<=y.max&&y.sex===o);if(!m)return null;const{percentiles:p}=m;return t<=p.p10?10:t<=p.p25?M(t,p.p10,p.p25,10,25):t<=p.p50?M(t,p.p25,p.p50,25,50):t<=p.p75?M(t,p.p50,p.p75,50,75):t<=p.p90?M(t,p.p75,p.p90,75,90):90}class T extends Error{constructor(t,i){super(i),this.status=t}}const we=(r,t)=>{if(!t)return r;const i=r.includes("?")?"&":"?";return`${r}${i}key=${encodeURIComponent(t)}`},je=async(r,t)=>{const i=localStorage.getItem("apexlabs_token"),o={};i&&(o.Authorization=`Bearer ${i}`),t&&(o["x-admin-key"]=t);const c=await fetch(we(r,t),{headers:Object.keys(o).length?o:void 0});if(!c.ok){const f=await c.text();throw new T(c.status,`${c.status} ${f}`)}return c.json()},Ae=["hormonal","thyroid","metabolic","inflammatory","vitamins","liver_kidney"],os={hormonal:"Hormonal",thyroid:"Thyroide",metabolic:"Metabolisme",inflammatory:"Inflammation",vitamins:"Vitamines",liver_kidney:"Foie/Rein"},cs=r=>Ae.includes(r)?r:"metabolic",ds=r=>{if(!r)return null;const t=new Date(r);if(Number.isNaN(t.getTime()))return null;const i=Math.floor((Date.now()-t.getTime())/315576e5);return Number.isFinite(i)?i:null},ms={matin:"Matin (avant 10h)",milieu_journee:"Milieu de journee",apres_midi:"Apres-midi",soir:"Soir"},us={"<24h":"< 24h","24-48h":"24-48h","48-72h":"48-72h",">72h":"> 72h"},xs={0:"0 verre","1-2":"1-2 verres","3-5":"3-5 verres","6+":"6+ verres"},ps={seche:"Seche (deficit)",maintenance:"Maintenance",bulk:"Prise de masse"},bs=j.lazy(()=>_e(()=>import("./MarkdownBlock-Bj1tjwsh.js"),__vite__mapDeps([0,1,2,3]))),x=j.memo(({content:r})=>r?e.jsx(j.Suspense,{fallback:e.jsx("div",{className:"h-20 animate-pulse rounded bg-[--bg-tertiary]"}),children:e.jsx(bs,{content:r})}):null);x.displayName="MarkdownSection";const hs=r=>{const t=[r==null?void 0:r.prenom,r==null?void 0:r.nom].filter(Boolean).join(" ").trim();return t||r!=null&&r.email&&r.email.split("@")[0]||"Client ApexLabs"},fs=(r,t)=>r==null?"-":`${r}${t?` ${t}`:""}`,gs=[{term:"HOMA-IR",definition:"Indice de résistance à l'insuline calculé à partir de la glycémie et de l'insuline à jeun. >3 indique une résistance insulinique installée."},{term:"GGT",definition:"Enzyme hépatique qui augmente en cas de stress oxydatif du foie ou de stéatose. Marqueur précoce de souffrance hépatique."},{term:"Créatinine",definition:"Déchet musculaire éliminé par les reins. Un taux élevé suggère une filtration rénale diminuée ou une déshydratation."},{term:"DFG",definition:"Débit de filtration glomérulaire, estimation de la fonction rénale. >90 est idéal chez l'adulte."},{term:"VLDL",definition:"Lipoprotéines riches en triglycérides fabriquées par le foie. Trop de VLDL = hypertriglycéridémie."},{term:"NAFLD",definition:"Stéatose hépatique non alcoolique. Excès de graisse dans le foie lié au syndrome métabolique."},{term:"SREBP-1c",definition:"Facteur de transcription qui stimule la fabrication de lipides dans le foie. Activé par l'insuline."},{term:"GLUT4",definition:"Transporteur de glucose dans les muscles. L'exercice améliore son activation et baisse l'insuline requise."},{term:"Aromatase",definition:"Enzyme qui convertit la testostérone en estrogènes. Plus de graisse viscérale = plus d'aromatase."}],js=[{id:"introduction",label:"Introduction"},{id:"overview",label:"Vue d'ensemble"},{id:"alerts",label:"Alertes prioritaires"},{id:"strengths",label:"Tes forces"},{id:"systems",label:"Analyse détaillée"},{id:"interconnections",label:"Interconnexions"},{id:"protocol",label:"Protocole 90 jours"},{id:"full-report",label:"Rapport complet"},{id:"glossary",label:"Glossaire"},{id:"sources",label:"Sources"}];function vs(){var F,G,V,z,H,Q,D,K,J,W,X,Y,Z,ee,se,te,ne,ae,re,le,ie,oe,ce,de,me,ue,xe;j.useEffect(()=>{const s=document.documentElement,d=s.getAttribute("data-blood-theme");return s.setAttribute("data-blood-theme","medical-dark"),()=>{d?s.setAttribute("data-blood-theme",d):s.removeAttribute("data-blood-theme")}},[]);const t=Ue().id,[,i]=Be(),o=j.useMemo(()=>{if(typeof window>"u")return"";const s=new URLSearchParams(window.location.search).get("key");return s?s.trim():""},[]),[c,f]=Fe({queries:[{queryKey:["/api/me"],queryFn:()=>je("/api/me",o||void 0),retry:!1,enabled:!o},{queryKey:["/api/blood-tests",t],queryFn:()=>je(`/api/blood-tests/${t}`,o||void 0),retry:!1,refetchInterval:s=>{var u;const d=s.state.data;return((u=d==null?void 0:d.bloodTest)==null?void 0:u.status)==="processing"?5e3:!1}}]});c.data;const v=c.error,m=f.data,p=f.isLoading,y=f.error,Se=f.refetch;j.useEffect(()=>{o||v&&i(`/auth/login?next=/analysis/${encodeURIComponent(t)}`)},[o,v,i,t]),j.useEffect(()=>{o||y instanceof T&&y.status===401&&i(`/auth/login?next=/analysis/${encodeURIComponent(t)}`)},[o,y,i,t]);const a=j.useMemo(()=>{if(!m||!t)return null;const s=m.bloodTest.patient||m.analysis.patient||null,d=hs(s),b=ds(s==null?void 0:s.dob),u=(m.markers||[]).map(g=>{const $e=cs(g.category),Oe=b!==null&&(s!=null&&s.gender)?is(g.code,g.value,b,s.gender==="femme"?"female":"male"):null;return{code:g.code,name:g.name,value:g.value,unit:g.unit,status:g.status,score:Ne(g),optimalMin:g.optimalMin,optimalMax:g.optimalMax,normalMin:g.refMin,normalMax:g.refMax,panel:$e,percentile:Oe??void 0}}),S=m.analysis.globalScore??m.bloodTest.globalScore??(u.length?ts(u):0);return{reportId:t,patient:s,patientName:d,patientAge:b,markers:u,globalScore:S,createdAt:m.bloodTest.uploadedAt,aiAnalysis:m.analysis.aiAnalysis||"",comprehensiveData:m.analysis.comprehensiveData,categoryScores:m.analysis.categoryScores,systemScores:m.analysis.systemScores}},[m,t]),qe=p||!a,q=(a==null?void 0:a.patientName)??"Chargement...",Ce=(a==null?void 0:a.createdAt)??new Date().toISOString(),w=(a==null?void 0:a.globalScore)??0,P=(a==null?void 0:a.markers.length)??0,R=j.useMemo(()=>{const s=Ge((a==null?void 0:a.aiAnalysis)||""),d=Object.values(s).some(b=>!!(b!=null&&b.content));return{sections:s,hasContent:d}},[a==null?void 0:a.aiAnalysis]),l=R.sections,Me=R.hasContent,I=j.useMemo(()=>{if(!a)return{critical:[],strong:[]};const s=a.markers.filter(u=>u.status==="critical"),d=a.markers.filter(u=>u.status==="suboptimal"),b=a.markers.filter(u=>u.status==="optimal").slice(0,4);return{critical:(s.length?s:d).slice(0,4),strong:b}},[a==null?void 0:a.markers]),L=I.critical,$=I.strong,O=((F=a==null?void 0:a.comprehensiveData)==null?void 0:F.supplements)||[],_=((G=a==null?void 0:a.comprehensiveData)==null?void 0:G.protocols)||[],Pe=async()=>{if(t)try{const s=localStorage.getItem("apexlabs_token"),d=await fetch(we(`/api/blood-tests/${t}/export/pdf`,o||void 0),{headers:s?{Authorization:`Bearer ${s}`}:void 0});if(!d.ok)throw new Error("Export PDF indisponible.");const b=await d.blob(),u=window.URL.createObjectURL(b),S=document.createElement("a"),g=a!=null&&a.patientName?`Blood_Analysis_${q}`:"Blood_Analysis";S.href=u,S.download=`${g}_${new Date().toISOString().slice(0,10)}.pdf`,S.click(),window.URL.revokeObjectURL(u)}catch(s){console.error(s),alert("Erreur lors de l'export PDF.")}};if(!p&&(y||!m||!a)){const s=y instanceof T&&y.status===401;return e.jsx("div",{className:"blood-report-premium min-h-screen bg-[--bg-primary] text-slate-100",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-6 py-20 text-center font-body",children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s?"Connexion requise":"Rapport introuvable"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:s?"Connecte-toi pour ouvrir ce rapport.":"Le lien est invalide ou le rapport est indisponible."})]})})}if(((V=m==null?void 0:m.bloodTest)==null?void 0:V.status)==="processing")return e.jsx("div",{className:"blood-report-premium min-h-screen bg-[--bg-primary] text-slate-100",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-6 py-24 text-center font-body",children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Analyse en cours"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Je prepare ton rapport, la page se met a jour automatiquement."}),e.jsx("button",{className:"mt-6 rounded-md bg-cyan-500 px-4 py-2 text-sm font-semibold text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-cyan-400",onClick:()=>Se(),children:"Rafraichir"})]})});const C=Math.min(85,Math.max(w+15,78)),ke=Math.min(100,Math.round(w/C*100)),Ee=w>=85?"optimal":w>=70?"normal":w>=50?"suboptimal":"critical",Te=(a==null?void 0:a.markers.filter(s=>s.status==="optimal").length)??0,Re=(a==null?void 0:a.markers.filter(s=>s.status==="critical").length)??0,U=j.useMemo(()=>{if(!a)return[];const s=a.categoryScores||a.systemScores||{};return Ae.map(d=>{const b=a.markers.filter(u=>u.panel===d);return{key:d,label:os[d],score:Math.round(s[d]??0),markerCount:b.length,criticalCount:b.filter(u=>u.status==="critical").length}})},[a]),B=j.useMemo(()=>{var d;return(((d=a==null?void 0:a.analysis)==null?void 0:d.protocolPhases)||(a==null?void 0:a.protocolPhases)||[]).map((b,u)=>({id:u+1,title:`Phase ${u+1}`,duration:b.title??"Phase",description:"Actions prioritaires de la phase.",items:b.items||[],completed:!1}))},[a]),n=(a==null?void 0:a.patient)||void 0,Ie=[{label:"Nom",value:q},{label:"Age",value:a!=null&&a.patientAge?`${a.patientAge} ans`:null},{label:"Poids",value:n!=null&&n.poids?`${n.poids} kg`:null},{label:"Taille",value:n!=null&&n.taille?`${n.taille} cm`:null},{label:"Sommeil",value:typeof(n==null?void 0:n.sleepHours)=="number"?`${n.sleepHours} h/nuit`:null},{label:"Stress",value:typeof(n==null?void 0:n.stressLevel)=="number"?`${n.stressLevel}/10`:null},{label:"Jeune",value:typeof(n==null?void 0:n.fastingHours)=="number"?`${n.fastingHours} h`:null},{label:"Heure prelevement",value:n!=null&&n.drawTime?ms[n.drawTime]||n.drawTime:null},{label:"Dernier training",value:n!=null&&n.lastTraining?us[n.lastTraining]||n.lastTraining:null},{label:"Alcool 72h",value:n!=null&&n.alcoholLast72h?xs[n.alcoholLast72h]||n.alcoholLast72h:null},{label:"Phase nutrition",value:n!=null&&n.nutritionPhase?ps[n.nutritionPhase]||n.nutritionPhase:null},{label:"Infection recente",value:(n==null?void 0:n.infectionRecent)==="oui"?"Oui":(n==null?void 0:n.infectionRecent)==="non"?"Non":null},{label:"Supplements",value:(z=n==null?void 0:n.supplementsUsed)!=null&&z.length?n.supplementsUsed.join(", "):null},{label:"Medicaments",value:n!=null&&n.medications?n.medications:null}].filter(s=>s.value),Le=!(n!=null&&n.poids)||!(n!=null&&n.taille)||typeof(n==null?void 0:n.fastingHours)!="number"||!(n!=null&&n.drawTime)||!(n!=null&&n.lastTraining);return e.jsxs("div",{className:"blood-report-premium min-h-screen bg-[--bg-primary] text-slate-100",children:[e.jsx("a",{href:"#introduction",className:"sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-50 focus:rounded-md focus:bg-cyan-500 focus:px-4 focus:py-2 focus:text-sm focus:font-semibold focus:text-white",children:"Aller au contenu principal"}),e.jsxs("header",{className:"sticky top-0 z-20 border-b border-[--border-primary] bg-[--bg-secondary]/90 backdrop-blur relative overflow-hidden",children:[e.jsx(We,{}),e.jsxs("div",{className:"relative mx-auto flex max-w-6xl items-center justify-between px-6 py-4 font-body",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-cyan-500 p-2 text-white",children:e.jsx(pe,{className:"h-4 w-4","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm uppercase tracking-[0.2em] text-slate-600",children:"ApexLabs"}),e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Rapport sanguin premium"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:q}),e.jsx("div",{className:"text-xs text-slate-600",children:new Date(Ce).toLocaleDateString("fr-FR")})]}),e.jsx("button",{onClick:Pe,className:"rounded-md border border-[--border-primary] px-3 py-2 text-sm font-semibold text-slate-800 hover:bg-[--bg-tertiary] focus-visible:outline focus-visible:outline-2 focus-visible:outline-cyan-400",children:"Export PDF"})]})]})]}),e.jsxs("div",{className:"mx-auto flex max-w-6xl gap-10 px-6 py-10 font-body",children:[e.jsx("aside",{className:"hidden w-60 flex-shrink-0 lg:block",children:e.jsxs("div",{className:"sticky top-28 rounded-xl border border-[--border-primary] bg-[--bg-secondary] p-4",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-600",children:"Navigation"}),e.jsx("nav",{className:"mt-4 space-y-2 text-sm",children:js.map(s=>e.jsx("a",{href:`#${s.id}`,className:"block rounded-md px-2 py-1 text-slate-700 hover:bg-[--bg-tertiary] hover:text-slate-900 focus-visible:outline focus-visible:outline-2 focus-visible:outline-cyan-400",children:s.label},s.id))})]})}),e.jsxs(h.main,{className:"w-full max-w-[900px] font-body",style:{lineHeight:1.8},variants:Ze,initial:"hidden",animate:"visible",children:[e.jsx(h.section,{id:"introduction",className:"section-hero scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"bento-grid",children:[e.jsx("div",{className:"col-span-12 lg:col-span-7",children:e.jsxs(Ve,{title:"Score biometrique global",value:w,unit:"/100",status:Ee,icon:e.jsx(k,{className:"w-6 h-6 text-cyan-400","aria-hidden":"true"}),trend:w>=C?"up":"stable",trendValue:`${P} marqueurs analysés`,children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Lecture globale de ta physiologie. On vise un score stable et reproductible sur 90 jours."}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"Objectif 90 jours"}),e.jsxs("span",{className:"font-semibold text-emerald-400",children:[C,"/100"]})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx(h.div,{className:"h-full rounded-full",style:{background:"linear-gradient(90deg, #06b6d4, #3b82f6)"},initial:{width:0},animate:{width:`${ke}%`},transition:{duration:1.4,ease:"easeOut"}})})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-5 flex items-center justify-center",children:e.jsx(De,{score:w,targetScore:C,sublabel:`${P} marqueurs`})}),e.jsx("div",{className:"col-span-12",children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"h-5 w-5 text-cyan-500","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 text-slate-100 font-semibold font-display",children:"Introduction & guide de lecture"})]}),e.jsxs("p",{className:"mt-4 text-sm text-slate-300",children:["Bonjour ",q,","]}),e.jsxs("p",{className:"mt-3 text-sm text-slate-300",children:["Ce rapport analyse tes ",P," marqueurs sanguins pour identifier ce qui fonctionne bien et ce qui nécessite une optimisation. Il a été généré par ApexLabs, plateforme d'analyse de bilans sanguins orientée santé, performance et composition corporelle."]}),e.jsxs("div",{className:"mt-5 rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Notre approche combine"}),e.jsxs("ul",{className:"mt-3 list-disc pl-5 text-sm text-slate-300",children:[e.jsx("li",{children:'Analyse de tes marqueurs vs ranges optimaux (pas juste "normaux")'}),e.jsx("li",{children:"Protocoles basés sur la science et citations d'experts (Derek, Huberman, Attia)"}),e.jsx("li",{children:"Plan d'action personnalisé 90 jours avec résultats attendus chiffrés"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Comment lire ce rapport"}),e.jsxs("ol",{className:"mt-3 list-decimal space-y-2 pl-5 text-sm text-slate-300",children:[e.jsx("li",{children:"Vue d'ensemble: score global, priorités absolues, forces."}),e.jsx("li",{children:"Analyse détaillée: explication de chaque marqueur et impact sur toi."}),e.jsx("li",{children:"Protocole personnalisé: plan 90 jours, suppléments, lifestyle, retests."}),e.jsx("li",{children:"Annexes: glossaire + sources scientifiques."})]})]})]})})]})}),e.jsx(A,{label:"Overview"}),e.jsx(h.section,{id:"overview",className:"mt-10 scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"h-5 w-5 text-cyan-500","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 font-semibold font-display text-slate-100",children:"Score global expliqué"})]}),(H=l.synthesis)!=null&&H.content?e.jsxs("div",{className:"mt-5 rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Synthèse exécutive personnalisée"}),e.jsx(x,{content:l.synthesis.content})]}):null,(Q=l.quality)!=null&&Q.content?e.jsxs("div",{className:"mt-4 rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Qualité des données & limites"}),e.jsx(x,{content:l.quality.content})]}):null,(D=l.potential)!=null&&D.content?e.jsxs("div",{className:"mt-4 rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Potentiel recomposition"}),e.jsx(x,{content:l.potential.content})]}):null,e.jsxs("div",{className:"mt-8 bento-grid",children:[e.jsx("div",{className:"col-span-12 lg:col-span-8",children:U.length?e.jsx(Ke,{categories:U}):e.jsx("div",{className:"rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-6 text-sm text-slate-300",children:"Scores par systeme indisponibles pour ce rapport."})}),e.jsxs("div",{className:"col-span-12 lg:col-span-4 space-y-4",children:[e.jsx(ge,{label:"Marqueurs optimaux",value:Te,icon:be,color:"#06b6d4"}),e.jsx(ge,{label:"Alertes critiques",value:Re,icon:he,color:"#f43f5e"})]}),e.jsx("div",{className:"col-span-12",children:e.jsxs("div",{className:"rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Tes infos personnelles"}),e.jsx("div",{className:"mt-4 grid gap-2 text-sm text-slate-300",children:Ie.map(s=>e.jsxs("div",{children:[s.label,": ",s.value]},s.label))}),Le&&e.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"Complete ton profil pour des analyses encore plus precises (jeune, heure de prelevement, training)."})]})})]})]})}),e.jsx(A,{label:"Alertes",variant:"warning"}),e.jsx(h.section,{id:"alerts",className:"mt-10 scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{className:"h-5 w-5 text-rose-400","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 font-semibold font-display text-slate-100",children:"Alertes prioritaires (ce qui nécessite une action rapide)"})]}),e.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Voici les marqueurs qui demandent ton attention immédiate. Chaque alerte est expliquée pour que tu comprennes quoi faire, pourquoi, et avec quel impact attendu."}),e.jsxs("div",{className:"mt-6 space-y-6",children:[(K=l.alerts)!=null&&K.content?e.jsxs("div",{className:"rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Tableau de bord (scores & priorités)"}),e.jsx(x,{content:l.alerts.content})]}):null,qe?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Array.from({length:4}).map((s,d)=>e.jsx(Xe,{},`skeleton-${d}`))}):L.length?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:L.map(s=>e.jsx(ze,{marker:{name:s.name,value:s.value,unit:s.unit,status:s.status,normalMin:s.normalMin,normalMax:s.normalMax}},s.code))}):e.jsx("div",{className:"rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 text-sm text-slate-300",children:"Aucun marqueur critique détecté. Le rapport complet détaille les optimisations possibles."})]})]})}),e.jsx(A,{label:"Forces",variant:"success"}),e.jsx(h.section,{id:"strengths",className:"mt-10 scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"h-5 w-5 text-emerald-400","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 font-semibold font-display text-slate-100",children:"Tes forces (ce qui fonctionne déjà)"})]}),e.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Ces marqueurs sont solides. On va s'appuyer dessus pour accélérer le reste de ta progression."}),e.jsx("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:$.length?$.map(s=>e.jsxs("div",{className:"rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-4 grain-texture",children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-100 font-display",children:[s.name," (",fs(s.value,s.unit),")"]}),e.jsxs("p",{className:"mt-2 text-sm text-slate-300",children:["Ton ",s.name.toLowerCase()," est dans la zone optimale. Continue tes habitudes actuelles pour maintenir ce point fort."]})]},s.code)):e.jsx("div",{className:"rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-4 text-sm text-slate-300",children:"Tes marqueurs forts seront détaillés dans l'analyse complète."})})]})}),e.jsx(A,{label:"Analyse"}),e.jsx(h.section,{id:"systems",className:"mt-10 scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"h-5 w-5 text-cyan-400","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 font-semibold font-display text-slate-100",children:"Analyse système par système"})]}),e.jsx(x,{content:((J=l.systems)==null?void 0:J.content)||""}),!((W=l.systems)!=null&&W.content)&&e.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Analyse détaillée en cours de génération. Consulte le rapport complet ci-dessous pour le texte intégral."}),(X=l.deepDive)!=null&&X.content?e.jsxs("div",{className:"mt-6 rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Deep dive (explications détaillées)"}),e.jsx(x,{content:l.deepDive.content})]}):null]})}),e.jsx(A,{label:"Interconnexions"}),e.jsx(h.section,{id:"interconnections",className:"mt-10 scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"h-5 w-5 text-cyan-400","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 font-semibold font-display text-slate-100",children:"Interconnexions clés"})]}),e.jsx(x,{content:((Y=l.interconnections)==null?void 0:Y.content)||""}),!((Z=l.interconnections)!=null&&Z.content)&&e.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Les interconnexions détaillées sont disponibles dans le rapport complet."})]})}),e.jsx(A,{label:"Protocole",variant:"accent"}),e.jsx(h.section,{id:"protocol",className:"mt-10 scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"h-5 w-5 text-cyan-400","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 font-semibold font-display text-slate-100",children:"Protocole 90 jours (phase par phase)"})]}),B.length?e.jsx("div",{className:"mt-6",children:e.jsx(He,{phases:B,currentPhase:1})}):null,e.jsx(x,{content:((ee=l.plan90)==null?void 0:ee.content)||""}),!((se=l.plan90)!=null&&se.content)&&e.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Le plan 90 jours est en cours de génération et apparaît dans le rapport complet."}),(te=l.nutrition)!=null&&te.content?e.jsxs("div",{className:"mt-6 rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Nutrition & lifestyle"}),e.jsx(x,{content:l.nutrition.content})]}):null,(ne=l.supplements)!=null&&ne.content?e.jsxs("div",{className:"mt-6 rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-5 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Suppléments (contexte scientifique)"}),e.jsx(x,{content:l.supplements.content})]}):null,e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Recommandations supplements (format actionnable)"}),e.jsx("div",{className:"mt-4 space-y-4",children:O.length?O.map((s,d)=>e.jsx(ye,{supp:{name:s.name,mechanism:s.mechanism||"Optimiser tes marqueurs prioritaires.",dosage:[s.dosage,s.timing].filter(Boolean).join(" · "),priority:s.priority||2,citations:s.citations}},`${s.name}-${d}`)):e.jsx("div",{className:"rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-4 text-sm text-slate-300",children:"Aucun supplément recommandé pour ce profil."})})]}),_.length?e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:"Protocoles lifestyle & training"}),e.jsx("div",{className:"mt-4 space-y-4",children:_.map((s,d)=>e.jsxs("div",{className:"rounded-xl border border-[--blood-border-default] bg-[--blood-bg-surface] p-4 grain-texture",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-100 font-display",children:s.name}),e.jsxs("div",{className:"mt-2 text-sm text-slate-300",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-100",children:"QUOI:"})," ",s.description||s.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-100",children:"POURQUOI:"})," ",s.scienceContext||s.expectedOutcome||"Optimiser tes marqueurs."]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-100",children:"COMMENT:"})," ",s.steps&&s.steps.length?s.steps.join(" · "):s.frequency]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-100",children:"QUAND:"})," ",s.duration||"Phase actuelle"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-100",children:"IMPACT:"})," ",s.expectedOutcome||"Amélioration attendue sur tes objectifs."]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-100",children:"EXPERT:"})," ",s.citations&&s.citations.length?Qe(s.citations[0]):"-"]})]})]},`${s.name}-${d}`))})]}):null]})}),e.jsx(A,{label:"Rapport complet"}),e.jsx(h.section,{id:"full-report",className:"mt-10 scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"h-5 w-5 text-cyan-400","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 font-semibold font-display text-slate-100",children:"Rapport complet (texte intégral)"})]}),Me?e.jsxs("div",{className:"mt-4 space-y-6 text-sm text-slate-300",children:[((ae=l.synthesis)==null?void 0:ae.content)&&e.jsx(x,{content:l.synthesis.content}),((re=l.alerts)==null?void 0:re.content)&&e.jsx(x,{content:l.alerts.content}),((le=l.systems)==null?void 0:le.content)&&e.jsx(x,{content:l.systems.content}),((ie=l.interconnections)==null?void 0:ie.content)&&e.jsx(x,{content:l.interconnections.content}),((oe=l.deepDive)==null?void 0:oe.content)&&e.jsx(x,{content:l.deepDive.content}),((ce=l.plan90)==null?void 0:ce.content)&&e.jsx(x,{content:l.plan90.content}),((de=l.nutrition)==null?void 0:de.content)&&e.jsx(x,{content:l.nutrition.content}),((me=l.supplements)==null?void 0:me.content)&&e.jsx(x,{content:l.supplements.content}),((ue=l.sources)==null?void 0:ue.content)&&e.jsx(x,{content:l.sources.content})]}):e.jsx(x,{content:(a==null?void 0:a.aiAnalysis)??""})]})}),e.jsx(A,{label:"Glossaire & sources"}),e.jsx(h.section,{id:"glossary",className:"mt-10 scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"h-5 w-5 text-cyan-400","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 font-semibold font-display text-slate-100",children:"Glossaire & explications"})]}),e.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Ce glossaire vulgarise les termes techniques utilisés dans ton rapport."}),e.jsx("div",{className:"mt-6 space-y-4",children:gs.map(s=>e.jsx(ve,{term:s.term,definition:s.definition},s.term))})]})}),e.jsx(h.section,{id:"sources",className:"mt-10 scroll-mt-24 report-section",variants:N,children:e.jsxs("div",{className:"rounded-2xl border border-[--blood-border-default] bg-[--blood-bg-elevated] p-8 grain-texture",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"h-5 w-5 text-cyan-400","aria-hidden":"true"}),e.jsx("h2",{className:"text-heading-3 font-semibold font-display text-slate-100",children:"Sources (bibliothèque)"})]}),(xe=l.sources)!=null&&xe.content?e.jsx(x,{content:l.sources.content}):e.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Sources disponibles dans la base scientifique ApexLabs."})]})})]})]})]})}function Cs(){return e.jsx(Ye,{children:e.jsx(vs,{})})}export{Cs as default};
