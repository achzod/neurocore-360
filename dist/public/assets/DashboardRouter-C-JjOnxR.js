import{j as e,aZ as se,a_ as te,a$ as ae,b0 as re,b1 as ie,b2 as le,b3 as ne,u as oe,r as N,b4 as ce,s as w,B as p,b5 as F,b6 as R,at as C,b7 as M,b8 as H,aC as G,aR as de,ax as D,aq as me,au as xe,b9 as B,ay as z,az as ue,al as _,ba as K,am as Q,aj as P,bb as W,bc as J,bd as he,aO as pe,aG as je,be as fe,aM as be}from"./vendor-C1l_5e97.js";import{B as S}from"./button-DbeSfvws.js";import{C as f,c as b,a as k,b as L}from"./card-BKpuV6l2.js";import{B as V}from"./badge-CpqRZvJG.js";import{H as E,F as $}from"./index-CImFIChq.js";import{U as ge}from"./themes-DjiGQari.js";function ye({data:s,title:i,color:l="hsl(164, 100%, 78%)",size:c="md"}){const n={sm:{height:220,outerRadius:50},md:{height:320,outerRadius:70},lg:{height:420,outerRadius:95}},{height:d,outerRadius:a}=n[c];return e.jsxs("div",{className:"w-full",children:[i&&e.jsx("h4",{className:"mb-2 text-center text-sm font-medium text-muted-foreground",children:i}),e.jsx(se,{width:"100%",height:d,children:e.jsxs(te,{cx:"50%",cy:"50%",outerRadius:a,data:s,margin:{top:20,right:40,bottom:20,left:40},children:[e.jsx(ae,{stroke:"hsl(var(--border))"}),e.jsx(re,{dataKey:"subject",tick:{fill:"hsl(var(--muted-foreground))",fontSize:11},tickLine:!1}),e.jsx(ie,{angle:90,domain:[0,100],tick:{fill:"hsl(var(--muted-foreground))",fontSize:10},tickCount:5}),e.jsx(le,{name:"Score",dataKey:"score",stroke:l,fill:l,fillOpacity:.3,strokeWidth:2}),e.jsx(ne,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",fontSize:"12px"},formatter:o=>[`${o}%`,"Score"]})]})})]})}const j={profilbase:{label:"Profil de Base",shortLabel:"Profil",icon:Q,color:"hsl(160, 84%, 39%)"},compositioncorporelle:{label:"Composition Corporelle",shortLabel:"Composition",icon:C,color:"hsl(200, 80%, 50%)"},metabolismeenergie:{label:"Metabolisme et Energie",shortLabel:"Metabolisme",icon:K,color:"hsl(30, 90%, 55%)"},nutritiontracking:{label:"Nutrition et Tracking",shortLabel:"Nutrition",icon:_,color:"hsl(120, 60%, 45%)"},digestionmicrobiome:{label:"Digestion et Microbiome",shortLabel:"Digestion",icon:B,color:"hsl(45, 85%, 50%)"},activiteperformance:{label:"Activite et Performance",shortLabel:"Activite",icon:ue,color:"hsl(280, 70%, 55%)"},sommeilrecuperation:{label:"Sommeil et Recuperation",shortLabel:"Sommeil",icon:z,color:"hsl(240, 60%, 60%)"},hrvcardiaque:{label:"HRV et Sante Cardiaque",shortLabel:"Cardiaque",icon:D,color:"hsl(0, 75%, 55%)"},analysesbiomarqueurs:{label:"Analyses et Biomarqueurs",shortLabel:"Biomarqueurs",icon:B,color:"hsl(180, 70%, 45%)"},hormonesstress:{label:"Hormones et Stress",shortLabel:"Hormones",icon:G,color:"hsl(50, 90%, 50%)"},lifestylesubstances:{label:"Lifestyle et Substances",shortLabel:"Lifestyle",icon:xe,color:"hsl(320, 65%, 50%)"},biomecaniquemobilite:{label:"Biomecanique et Mobilite",shortLabel:"Mobilite",icon:C,color:"hsl(170, 75%, 40%)"},psychologiemental:{label:"Psychologie et Mental",shortLabel:"Mental",icon:me,color:"hsl(260, 70%, 60%)"},neurotransmetteurs:{label:"Neurotransmetteurs",shortLabel:"Neuro",icon:R,color:"hsl(300, 65%, 55%)"},hormonessexuelles:{label:"Hormones Sexuelles et Libido",shortLabel:"Libido",icon:D,color:"hsl(340, 70%, 50%)"}},U=[{id:"dashboard-core",name:"ApexLabs",type:"dark",colors:{primary:"#FCDD00",background:"#050505",surface:"#0B0B0F",border:"rgba(255,255,255,0.08)",text:"#F5F5F5",textMuted:"#9CA3AF",grid:"rgba(255,255,255,0.05)",glow:"rgba(252,221,0,0.18)"}},...ge];function A(s,i){return i?s==="GRATUIT"?`/scan/${i}`:s==="PREMIUM"?`/anabolic/${i}`:s==="ELITE"?`/ultimate/${i}`:`/dashboard/${i}`:"/dashboard"}function I(s){return s>=80?{label:"Excellent",color:"text-primary"}:s>=65?{label:"Bon",color:"text-chart-3"}:s>=50?{label:"Moyen",color:"text-yellow-500"}:{label:"A ameliorer",color:"text-destructive"}}function X({type:s}){const i={GRATUIT:{label:"Discovery Scan",icon:de,className:"bg-muted text-muted-foreground"},PREMIUM:{label:"Anabolic Bioscan",icon:H,className:"bg-primary text-primary-foreground"},ELITE:{label:"Ultimate Scan",icon:G,className:"bg-accent text-accent-foreground"}},l=i[s]||i.GRATUIT,c=l.icon;return e.jsxs(V,{className:`${l.className} text-sm px-4 py-1`,"data-testid":`badge-audit-type-${s}`,children:[e.jsx(c,{className:"mr-2 h-4 w-4"}),l.label]})}function Ne({score:s}){const i=I(s);return e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[e.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${s/100*352} 352`,className:"text-primary",strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-4xl font-bold","data-testid":"text-global-score",children:[s,"%"]}),e.jsx("span",{className:`text-sm font-medium ${i.color}`,children:i.label})]})]})})}function ve({scores:s,cardStyle:i}){const l=Object.entries(s).filter(([c])=>c!=="global"&&j[c]).map(([c,n])=>{var d;return{subject:((d=j[c])==null?void 0:d.shortLabel)||c,score:n,fullMark:100}});return e.jsxs(f,{style:i,children:[e.jsx(k,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-primary"}),"Vue d'ensemble des 15 domaines"]})}),e.jsx(b,{children:e.jsx(ye,{data:l,size:"lg"})})]})}function we({scores:s,cardStyle:i,mutedStyle:l}){const c=Object.entries(s).filter(([a])=>a!=="global"&&j[a]).sort(([,a],[,o])=>o-a),n=c.filter(([,a])=>a>=70).slice(0,3),d=c.filter(([,a])=>a<60).slice(-3).reverse();return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(f,{className:"border-primary/30 bg-primary/5",style:i,children:[e.jsx(k,{className:"pb-3",children:e.jsxs(L,{className:"flex items-center gap-2 text-lg",children:[e.jsx(J,{className:"h-5 w-5 text-primary"}),"Tes points forts"]})}),e.jsx(b,{children:n.length>0?e.jsx("div",{className:"space-y-3",children:n.map(([a,o])=>{const t=j[a];if(!t)return null;const r=t.icon;return e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg",style:{backgroundColor:`${t.color}20`},children:e.jsx(r,{className:"h-4 w-4",style:{color:t.color}})}),e.jsx("span",{className:"font-medium",children:t.shortLabel})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{className:"font-bold text-primary",children:[o,"%"]})]})]},a)})}):e.jsx("p",{className:"text-sm",style:l,children:"Aucun point fort identifie pour le moment."})})]}),e.jsxs(f,{className:"border-destructive/30 bg-destructive/5",style:i,children:[e.jsx(k,{className:"pb-3",children:e.jsxs(L,{className:"flex items-center gap-2 text-lg",children:[e.jsx(W,{className:"h-5 w-5 text-destructive"}),"Priorites d'amelioration"]})}),e.jsx(b,{children:d.length>0?e.jsx("div",{className:"space-y-3",children:d.map(([a,o])=>{const t=j[a];if(!t)return null;const r=t.icon;return e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg",style:{backgroundColor:`${t.color}20`},children:e.jsx(r,{className:"h-4 w-4",style:{color:t.color}})}),e.jsx("span",{className:"font-medium",children:t.shortLabel})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-destructive"}),e.jsxs("span",{className:"font-bold text-destructive",children:[o,"%"]})]})]},a)})}):e.jsx("p",{className:"text-sm",style:l,children:"Tous tes domaines sont au-dessus de 60%. Excellent !"})})]})]})}function Se({scores:s,cardStyle:i,mutedStyle:l}){const c=s.nutritiontracking||0,n=s.activiteperformance||0,d=s.sommeilrecuperation||0,a=s.metabolismeenergie||0,o=[];return c<60&&o.push({icon:_,title:"Timing nutritionnel",description:"Optimise le timing de tes glucides pour maximiser la lipolyse et reduire l'inflammation.",color:"hsl(120, 60%, 45%)",metric:`${c}%`}),n<60&&o.push({icon:be,title:"Strategie peri-workout",description:"Ameliore ta nutrition autour de l'entrainement pour eviter le catabolisme.",color:"hsl(280, 70%, 55%)",metric:`${n}%`}),d<60&&o.push({icon:z,title:"Recuperation nocturne",description:"Ton sommeil impacte directement tes hormones et ta capacite de recuperation.",color:"hsl(240, 60%, 60%)",metric:`${d}%`}),a<60&&o.push({icon:K,title:"Energie metabolique",description:"Ton metabolisme energetique peut etre optimise pour plus de vitalite.",color:"hsl(30, 90%, 55%)",metric:`${a}%`}),o.length===0&&o.push({icon:J,title:"Profil equilibre",description:"Tes domaines cles sont bien optimises. Continue ainsi !",color:"hsl(160, 84%, 39%)",metric:"OK"}),e.jsxs(f,{style:i,children:[e.jsx(k,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-accent"}),"Insights rapides"]})}),e.jsx(b,{children:e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:o.slice(0,4).map((t,r)=>{const h=t.icon;return e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border p-4",children:[e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg",style:{backgroundColor:`${t.color}20`},children:e.jsx(h,{className:"h-5 w-5",style:{color:t.color}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"font-medium",children:t.title}),e.jsx(V,{variant:"outline",children:t.metric})]}),e.jsx("p",{className:"mt-1 text-sm",style:l,children:t.description})]})]},r)})})})]})}function Ce({scores:s,cardStyle:i,mutedStyle:l}){const c=s.global||0,n=Object.keys(s).filter(t=>t!=="global"&&j[t]).length,d=Object.entries(s).filter(([t,r])=>t!=="global"&&j[t]&&r>=70).length,a=Object.entries(s).filter(([t,r])=>t!=="global"&&j[t]&&r<50).length;Math.round(Object.entries(s).filter(([t])=>t!=="global"&&j[t]).reduce((t,[,r])=>t+r,0)/n);const o=[{label:"Score global",value:`${c}%`,icon:Q,color:"primary"},{label:"Domaines analyses",value:n.toString(),icon:C,color:"chart-3"},{label:"Points forts",value:d.toString(),icon:P,color:"primary"},{label:"A ameliorer",value:a.toString(),icon:W,color:"destructive"}];return e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:o.map((t,r)=>{const h=t.icon;return e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:r*.05},children:e.jsx(f,{style:i,children:e.jsxs(b,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded bg-${t.color}/10`,children:e.jsx(h,{className:`h-6 w-6 text-${t.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",style:l,children:t.label}),e.jsx("p",{className:"text-2xl font-bold","data-testid":`metric-${t.label.replace(/\s/g,"-").toLowerCase()}`,children:t.value})]})]})})},r)})})}function ke({scores:s,cardStyle:i,mutedStyle:l}){const c=Object.entries(s).filter(([n])=>n!=="global"&&j[n]).sort(([,n],[,d])=>d-n);return e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:c.map(([n,d])=>{const a=j[n];if(!a)return null;const o=a.icon,t=I(d);return e.jsx(f,{className:"group hover:border-primary/50",style:i,children:e.jsxs(b,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg",style:{backgroundColor:`${a.color}20`},children:e.jsx(o,{className:"h-5 w-5",style:{color:a.color}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium leading-tight",children:a.shortLabel}),e.jsx("p",{className:`text-xs ${t.color}`,style:l,children:t.label})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-2xl font-bold","data-testid":`score-${n}`,children:[d,"%"]})})]}),e.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-muted overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${d}%`,backgroundColor:a.color}})})]})},n)})})}function Le({audit:s,index:i,themeColors:l}){var t;const c=s.status==="COMPLETED",n=((t=s.scores)==null?void 0:t.global)||0,d=I(n),a=l?{backgroundColor:l.surface,borderColor:l.border}:void 0,o=l?{color:l.textMuted}:void 0;return e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:i*.1},children:e.jsxs(f,{className:"group hover:border-primary/50",style:a,children:[e.jsxs(k,{className:"flex flex-row items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded bg-primary/10 text-primary",children:e.jsx(M,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx(L,{className:"text-lg",children:"Audit APEXLABS"}),e.jsx("p",{className:"mt-1 text-sm",style:o,children:new Date(s.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]})]}),e.jsx(X,{type:s.type})]}),e.jsxs(b,{children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:c?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:"Analyse completee"})]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"En cours de traitement"})]})}),c&&s.scores&&e.jsx("div",{className:"mt-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary","data-testid":`card-score-global-${s.id}`,children:[n,"%"]}),e.jsx("p",{className:`text-xs ${d.color}`,children:d.label})]}),e.jsx("div",{className:"h-12 w-px bg-border"}),e.jsxs("div",{className:"text-sm",style:o,children:[e.jsx("p",{children:"15 domaines analyses"}),e.jsxs("p",{className:"flex items-center gap-1 text-primary",children:[e.jsx(P,{className:"h-3 w-3"}),Object.values(s.scores).filter(r=>typeof r=="number"&&r>=70).length," points forts"]})]})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(w,{href:A(s.type,s.id),children:e.jsxs(S,{className:"w-full","data-testid":`button-view-${s.id}`,children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"Consulter le rapport complet"]})})})]})]})})}function Te({themeColors:s}){const i=s?{backgroundColor:s.surface,borderColor:s.border}:void 0,l=s?{color:s.textMuted}:void 0;return e.jsx(f,{className:"border-dashed",style:i,children:e.jsxs(b,{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-sm",style:{backgroundColor:(s==null?void 0:s.surface)||"var(--muted)"},children:e.jsx(M,{className:"h-8 w-8",style:l})}),e.jsx("h3",{className:"mt-6 text-lg font-semibold",children:"Aucun audit pour le moment"}),e.jsx("p",{className:"mt-2 max-w-sm text-sm",style:l,children:"Commence ton premier audit APEXLABS pour decouvrir ton profil metabolique complet."}),e.jsx(w,{href:"/audit-complet/questionnaire",children:e.jsxs(S,{className:"mt-6","data-testid":"button-start-first-audit",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Commencer mon premier audit"]})})]})})}function Ee(){const[,s]=oe(),[i,l]=N.useState(null),[c,n]=N.useState(!1),[d,a]=N.useState(null),[o,t]=N.useState(U[0]),r=o.colors,h=N.useMemo(()=>({backgroundColor:r.surface,borderColor:r.border}),[r]),y=N.useMemo(()=>({color:r.textMuted}),[r]);N.useEffect(()=>{const x=new URLSearchParams(window.location.search),T=x.get("session_id"),Y=x.get("success");if(T&&Y){n(!0),a(null),window.history.replaceState({},"","/dashboard"),(async()=>{try{const O=await fetch("/api/stripe/confirm-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:T})}),u=await O.json();if(O.ok&&u.success&&u.auditId){const ee=A(u.auditType||"",u.auditId);s(ee);return}(u==null?void 0:u.error)==="QUESTIONNAIRE_MISSING"?a("Questionnaire manquant. Reprends le questionnaire pour finaliser ton audit."):(u==null?void 0:u.error)==="NEED_PHOTOS"?a("Photos manquantes pour l'Ultimate Scan. Ajoute les 3 photos (face, profil, dos)."):a((u==null?void 0:u.error)||"Erreur de confirmation du paiement.")}catch{a("Erreur de confirmation du paiement.")}finally{n(!1)}})();return}const q=localStorage.getItem("neurocore_email");if(!q){s("/auth/login");return}l(q)},[s]);const{data:g,isLoading:Z}=ce({queryKey:[`/api/audits?email=${encodeURIComponent(i||"")}&light=1`],enabled:!!i}),m=g==null?void 0:g[0],v=(m==null?void 0:m.status)==="COMPLETED"&&(m==null?void 0:m.scores);return c?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(E,{}),e.jsx("div",{className:"flex min-h-[60vh] items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Confirmation du paiement en cours..."})]})}),e.jsx($,{})]}):d?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(E,{}),e.jsxs("div",{className:"mx-auto max-w-2xl px-4 py-20 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Paiement confirmé"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:d}),e.jsx(w,{href:"/audit-complet/questionnaire",children:e.jsx(S,{className:"mt-6",children:"Reprendre le questionnaire"})})]}),e.jsx($,{})]}):Z?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(E,{}),e.jsx("div",{className:"flex min-h-[60vh] items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement de tes audits..."})]})})]}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden",style:{backgroundColor:r.background,color:r.text},children:[e.jsx("div",{className:"pointer-events-none fixed inset-0",style:{backgroundImage:`linear-gradient(to right, ${r.grid} 1px, transparent 1px), linear-gradient(to bottom, ${r.grid} 1px, transparent 1px)`,backgroundSize:"60px 60px",opacity:.6}}),e.jsx(E,{}),e.jsxs("main",{className:"relative mx-auto max-w-7xl px-4 py-8 sm:py-12",children:[e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em]",style:y,children:"ApexLabs • Tableau de bord"}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold tracking-tight leading-tight mt-2",children:i?`${i.split("@")[0]}, voici tes analyses.`:"Tes analyses."}),e.jsx("p",{className:"mt-2 text-sm",style:y,children:"Je consolide tous tes scans ici. Passe en revue, upgrade, et relance un audit quand tu veux."})]}),e.jsxs("div",{className:"flex flex-col sm:items-end gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:U.slice(0,3).map(x=>e.jsx("button",{onClick:()=>t(x),className:`h-9 px-3 rounded-full border text-xs uppercase tracking-widest transition-all ${o.id===x.id?"opacity-100":"opacity-60 hover:opacity-100"}`,style:{borderColor:r.border,color:r.text,backgroundColor:o.id===x.id?r.surface:"transparent"},children:x.name},x.id))}),e.jsx(w,{href:"/audit-complet/questionnaire",children:e.jsxs(S,{"data-testid":"button-new-audit",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Nouvel audit"]})})]})]})}),!g||g.length===0?e.jsx("div",{className:"mt-8",children:e.jsx(Te,{themeColors:r})}):e.jsxs(e.Fragment,{children:[v&&m.scores&&e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"mt-8",children:e.jsx(f,{className:"overflow-hidden",style:h,children:e.jsx("div",{className:"p-6 sm:p-8",style:{background:`linear-gradient(135deg, ${r.glow} 0%, transparent 65%)`},children:e.jsxs("div",{className:"flex flex-col items-center gap-6 lg:flex-row lg:justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:flex-row",children:[e.jsx(Ne,{score:m.scores.global||0}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx(X,{type:m.type}),e.jsx("h2",{className:"mt-3 text-xl font-semibold",children:"Ton Score Global"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Base sur l'analyse de 15 domaines metaboliques"})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:e.jsx(w,{href:A(m.type,m.id),children:e.jsxs(S,{size:"lg","data-testid":"button-view-report-complet",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Rapport complet"]})})})]})})})}),v&&m.scores&&e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.15},className:"mt-8",children:e.jsx(Ce,{scores:m.scores,cardStyle:h,mutedStyle:y})}),v&&m.scores&&e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-8",children:e.jsx(we,{scores:m.scores,cardStyle:h,mutedStyle:y})}),v&&m.scores&&e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.25},className:"mt-8",children:e.jsx(Se,{scores:m.scores,cardStyle:h,mutedStyle:y})}),v&&m.scores&&e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mt-8",children:e.jsx(ve,{scores:m.scores,cardStyle:h})}),v&&m.scores&&e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.35},className:"mt-8",children:[e.jsxs("h2",{className:"mb-4 text-xl font-semibold flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-primary"}),"Scores par domaine"]}),e.jsx(ke,{scores:m.scores,cardStyle:h,mutedStyle:y})]}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mt-12",children:[e.jsxs("h2",{className:"mb-6 text-xl font-semibold flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-primary"}),"Historique des audits (",g.length,")"]}),e.jsx("div",{className:"grid gap-6 lg:grid-cols-2",children:g.map((x,T)=>e.jsx(Le,{audit:x,index:T,themeColors:r},x.id))})]}),g.some(x=>x.type==="GRATUIT")&&e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"mt-12",children:e.jsx(f,{className:"overflow-hidden",style:h,children:e.jsxs(b,{className:"flex flex-col items-center gap-6 p-8 text-center sm:flex-row sm:text-left",style:{background:`linear-gradient(120deg, ${r.glow} 0%, transparent 70%)`},children:[e.jsx("div",{className:"flex h-16 w-16 shrink-0 items-center justify-center rounded-sm",style:{backgroundColor:r.primary},children:e.jsx(H,{className:"h-8 w-8 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Passe au niveau superieur"}),e.jsx("p",{className:"mt-2 text-sm",style:y,children:"Je debloque toutes tes sections, j ajoute les protocoles et la stack complete. Choisis ton scan payant."})]}),e.jsx(w,{href:"/#pricing",children:e.jsx(S,{size:"lg","data-testid":"button-upgrade-banner",children:"Voir les offres payantes"})})]})})})]})]}),e.jsx($,{})]})}function qe(){return e.jsx(Ee,{})}export{qe as default};
