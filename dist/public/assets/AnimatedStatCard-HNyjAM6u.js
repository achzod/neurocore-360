import{r as p,j as t,B as i,cp as S}from"./vendor-C1l_5e97.js";import{u as G}from"./BloodThemeContext-E2xwPxg0.js";const E=({score:d,maxScore:o=100,size:s=280,strokeWidth:u=14,label:n="Score Global",sublabel:a,targetScore:f,percentile:x,showComparison:h=!1})=>{const{theme:e}=G(),m=p.useId(),b=`scoreGrid-${m}`,v=`scoreGradient-${m}`,y=`scoreGlow-${m}`,[D,$]=p.useState(0),j=(s-u*2)/2,r=2*Math.PI*j,k=d/o*100,N=r-k/100*r;p.useEffect(()=>{let c=0;const g=d,I=(g-c)/(2e3/16),w=setInterval(()=>{c+=I,c>=g?($(g),clearInterval(w)):$(Math.floor(c))},16);return()=>clearInterval(w)},[d]);const l=(c=>c>=85?{from:e.status.optimal,to:e.status.normal,glow:`${e.status.optimal}4D`}:c>=70?{from:e.status.normal,to:e.primaryBlue,glow:`${e.status.normal}4D`}:c>=50?{from:e.status.suboptimal,to:e.status.suboptimal,glow:`${e.status.suboptimal}4D`}:{from:e.status.critical,to:e.status.critical,glow:`${e.status.critical}4D`})(k);return t.jsxs("div",{className:"relative inline-flex items-center justify-center",role:"figure","aria-label":`${n}: ${d} sur ${o}${a?`, ${a}`:""}${x!==void 0&&h?`, Top ${100-x}%`:""}`,children:[t.jsxs("svg",{width:s,height:s,className:"transform -rotate-90",role:"img","aria-hidden":"true",children:[t.jsxs("defs",{children:[t.jsx("pattern",{id:b,width:"12",height:"12",patternUnits:"userSpaceOnUse",children:t.jsx("path",{d:"M 12 0 L 0 0 0 12",fill:"none",stroke:e.grid,strokeWidth:"0.5"})}),t.jsxs("linearGradient",{id:v,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:l.from}),t.jsx("stop",{offset:"100%",stopColor:l.to})]}),t.jsxs("filter",{id:y,children:[t.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),t.jsxs("feMerge",{children:[t.jsx("feMergeNode",{in:"coloredBlur"}),t.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),t.jsx("circle",{cx:s/2,cy:s/2,r:j,fill:`url(#${b})`,stroke:e.borderSubtle,strokeWidth:u}),f&&t.jsx(i.circle,{cx:s/2,cy:s/2,r:j,fill:"none",stroke:`${e.status.optimal}4D`,strokeWidth:u/2,strokeDasharray:r,strokeDashoffset:r-f/o*r,strokeLinecap:"round",initial:{strokeDashoffset:r},animate:{strokeDashoffset:r-f/o*r},transition:{duration:2,delay:.5,ease:"easeOut"}}),t.jsx(i.circle,{cx:s/2,cy:s/2,r:j,fill:"none",stroke:`url(#${v})`,strokeWidth:u,strokeLinecap:"round",strokeDasharray:r,initial:{strokeDashoffset:r},animate:{strokeDashoffset:N},transition:{duration:2,ease:[.22,1,.36,1]},filter:`url(#${y})`}),t.jsx(i.circle,{cx:s/2,cy:s/2,r:j,fill:"none",stroke:l.from,strokeWidth:u/3,strokeLinecap:"round",strokeDasharray:r,strokeDashoffset:N,opacity:.5,animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{filter:"blur(6px)"}})]}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[t.jsx(i.div,{className:"text-7xl font-bold font-mono tabular-nums",style:{color:l.from,textShadow:`0 0 40px ${l.glow}`},initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:200},"aria-live":"polite","aria-atomic":"true",children:D}),t.jsx("div",{className:"text-xs uppercase tracking-widest mt-2 font-semibold",style:{color:e.textTertiary},children:n}),a&&t.jsx("div",{className:"text-[10px] mt-1",style:{color:e.textTertiary},children:a}),x!==void 0&&h&&t.jsxs(i.div,{className:"mt-4 px-3 py-1.5 rounded-full text-xs font-semibold",style:{background:`linear-gradient(135deg, ${l.glow}, transparent)`,border:`1px solid ${l.from}`,color:l.from},initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.5},children:["Top ",100-x,"%"]})]}),f&&t.jsxs(i.div,{className:"absolute text-xs font-semibold",style:{top:"20%",right:"10%",color:e.status.optimal},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:1.5,duration:.5},children:["Objectif: ",f]})]})},L=({label:d,value:o,unit:s,icon:u,color:n="#06b6d4",trend:a})=>{const[f,x]=p.useState(0),h=p.useRef(null),e=S(h,{once:!0,margin:"-100px"});return p.useEffect(()=>{if(!e)return;let m=0;const v=o/(2e3/16),y=setInterval(()=>{m+=v,m>=o?(x(o),clearInterval(y)):x(Math.floor(m))},16);return()=>clearInterval(y)},[e,o]),t.jsx(i.div,{ref:h,className:"relative group cursor-default",initial:{opacity:0,y:20},animate:e?{opacity:1,y:0}:{},transition:{duration:.5},whileHover:{scale:1.05,y:-4},role:"article","aria-label":`${d}: ${o}${s||""}${a?`, tendance ${a.direction==="up"?"en hausse":"en baisse"} de ${a.value}`:""}`,children:t.jsxs("div",{className:"rounded-xl p-6",style:{background:"var(--color-surface, rgba(26, 29, 36, 0.4))",backdropFilter:"blur(8px)",border:"1px solid var(--color-border, rgba(148, 163, 184, 0.2))"},children:[t.jsx(i.div,{className:"w-12 h-12 rounded-xl flex items-center justify-center mb-4",style:{background:`${n}20`,border:`1px solid ${n}40`},whileHover:{rotate:15},transition:{duration:.3},children:t.jsx(u,{className:"w-6 h-6",style:{color:n}})}),t.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[t.jsx(i.span,{className:"text-4xl font-bold font-mono tabular-nums",style:{color:n,textShadow:`0 0 20px ${n}40`},"aria-live":"polite","aria-atomic":"true",children:f}),s&&t.jsx("span",{className:"text-lg",style:{color:"var(--color-text-muted, #94a3b8)"},children:s})]}),t.jsx("div",{className:"text-sm",style:{color:"var(--color-text-muted, #94a3b8)"},children:d}),a&&t.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs",style:{color:a.direction==="up"?"#10b981":"#f43f5e"},children:[t.jsx("span",{children:a.direction==="up"?"↑":"↓"}),t.jsx("span",{className:"font-semibold",children:a.value})]}),t.jsx(i.div,{className:"absolute inset-0 rounded-xl pointer-events-none",style:{boxShadow:`inset 0 0 40px ${n}20`,opacity:0},whileHover:{opacity:1},transition:{duration:.3}})]})})};export{L as A,E as R};
