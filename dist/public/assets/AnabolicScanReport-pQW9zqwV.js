import{bf as jt,j as e,r as m,aV as $e,E as Nt,s as wt,bJ as Le,bK as kt,M as St,at as Ct,ce as oe,aq as ae,ba as De,ax as Rt,az as Be,cf as Pt,bv as Mt,aB as At,aC as U,ay as Et,b8 as Tt,aR as ze,aO as $t,bj as Lt}from"./vendor-C1l_5e97.js";import{S as Dt}from"./Sidebar-BrqQpKwp.js";import{R as Bt,M as zt,P as It}from"./Charts-CaZjqiSM.js";import{U as qt}from"./themes-DjiGQari.js";import{R as Ht,g as Ft,f as le,C as Ot}from"./ReportErrorBoundary-By7qDKT4.js";const Ie=qt,qe=a=>{const o=a==null?"":String(a);return o?o.trim().split(/\s+/).map(d=>d&&d[0].toUpperCase()+d.slice(1).toLowerCase()).join(" "):"Profil"},He={sommeil:Et,stress:ae,energie:U,digestion:De,training:Be,nutrition:At,lifestyle:Mt,mindset:Pt,entrainement:Be,cardio:Rt,metabolisme:De,hormones:ae},B=a=>a>=8?{label:"FORT",color:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"}:a>=6?{label:"MOYEN",color:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"}:a>=4?{label:"FAIBLE",color:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"}:{label:"CRITIQUE",color:"bg-[var(--color-primary)]/10 text-[var(--color-primary)]"},Fe=a=>/<\s*[a-z][\s\S]*>/i.test(a),_=(a,o)=>{const d=a.replace("#","");if(d.length!==6)return a;const N=parseInt(d.slice(0,2),16),h=parseInt(d.slice(2,4),16),R=parseInt(d.slice(4,6),16);return`rgba(${N}, ${h}, ${R}, ${o})`},Oe="KAN0746",_t="fr.iherb.com",_e=a=>{if(!a||!a.includes("iherb.com"))return a;const o=N=>{let h=N.replace(/https?:\/\/[^/]*iherb\.com\//i,`https://${_t}/`);return/rcode=/i.test(h)?h=h.replace(/rcode=[^&\"']*/i,`rcode=${Oe}`):h+=`${h.includes("?")?"&":"?"}rcode=${Oe}`,h},d=/https?:\/\/[^\s"'<>]*iherb\.com[^\s"'<>]*/gi;return a.replace(d,N=>o(N))},f=a=>a?typeof a=="string"?a:Array.isArray(a)?a.map(o=>f(o)).filter(Boolean).join(`

`):typeof a=="object"?Object.values(a).map(o=>f(o)).filter(Boolean).join(`

`):String(a):"",Ut=a=>a&&a.split(`
`).filter(o=>{const d=o.trim();return d?!(/^(sources?|references?|références?)\s*[:\-]/i.test(d)||/\bpmid\b/i.test(d)||/\bdoi\b/i.test(d)||/pubmed/i.test(d)):!0}).join(`
`),C=a=>{const o=f(a);return Ut(o)},Gt=a=>{const o=C(a);if(!o)return{paragraphs:[],bullets:[],promoLine:"",bonusLine:"",emailLine:"",siteLine:""};const d=o.split(`
`).map(t=>t.trim()).filter(Boolean).filter(t=>!/^[-=]{3,}$/.test(t)).filter(t=>!/rapport genere/i.test(t)).filter(t=>!/^tu\s+as\s+les\s+cl(?:e|\u00e9)s/i.test(t)).filter(t=>!/^prochaines?\s+etapes?/i.test(t)),N=d.find(t=>/code promo/i.test(t))||"",h=d.find(t=>/bonus/i.test(t))||"",R=d.find(t=>/^email\s*:/i.test(t))||"",w=d.find(t=>/^site\s*:/i.test(t))||"",I=d.filter(t=>/^(\+|\-|\d+\.)\s+/.test(t)).map(t=>t.replace(/^(\+|\-|\d+\.)\s+/,"").trim());return{paragraphs:d.filter(t=>/^(rappel coaching|rappel important|infos importantes|coaching apexlabs|prochaines etapes|pret a transformer ces insights)$/i.test(t)||/^tu\s+as\s+les\s+cl(?:e|\u00e9)s/i.test(t)||/^prochaines?\s+etapes?/i.test(t)||/^(formules?\s+disponibles|mes\s+formules)$/i.test(t)||t===N||t===h||t===R||t===w?!1:!/^(\+|\-|\d+\.)\s+/.test(t)),bullets:I,promoLine:N,bonusLine:h,emailLine:R,siteLine:w}},Vt=a=>/analyse/i.test(a.title),Kt=({auditId:a})=>{const[o,d]=m.useState(null),[N,h]=m.useState(!0),[R,w]=m.useState(null),[I,z]=m.useState("dashboard"),[t,Ue]=m.useState(Ie[0]),[ne,G]=m.useState(!1),[Ge,Ve]=m.useState(0),[Ke,We]=m.useState("Profil"),[Je,Ye]=m.useState(null),[Ze,ce]=m.useState(""),[ie,de]=m.useState(0),[me,ue]=m.useState(""),V=m.useRef(null),T=m.useRef(null),[K,Qe]=m.useState(0),[q,Xe]=m.useState(""),[W,xe]=m.useState(""),[pe,fe]=m.useState(!1),[et,tt]=m.useState(!1),[he,J]=m.useState(null);m.useEffect(()=>{let s=!1;const l=async()=>{var u;const c=await fetch(`/api/audits/${a}/narrative`);if(!c.ok)throw new Error("Erreur chargement rapport");const i=await c.json();if(i.error||i.message)throw new Error(i.error||i.message);d(i),((u=i.sections)==null?void 0:u.length)>0&&z(i.sections[0].id)},r=async(c=0)=>{if(!s){try{const u=await(await fetch(`/api/audits/${a}/narrative-status`)).json();if(ce(u.status||""),de(u.progress??0),ue(u.currentSection||""),u.status==="completed"){await l(),h(!1);return}if(u.status==="failed"){w(u.error||"Generation echouee. Reessaie dans quelques minutes."),h(!1);return}}catch{w("Erreur de connexion"),h(!1);return}c<120?V.current=window.setTimeout(()=>r(c+1),5e3):(w("Generation trop longue. Reviens plus tard."),h(!1))}},n=async()=>{var c,i;if(!a){w("ID audit manquant"),h(!1);return}try{const u=await fetch(`/api/audits/${a}?light=1`);if(!u.ok){w("Audit non trouve"),h(!1);return}const p=await u.json();Ye(p.type||p.auditType||null);const x=(c=p.responses)==null?void 0:c.prenom;if(We(qe(x||((i=p.email)==null?void 0:i.split("@")[0])||"Profil")),xe(p.email||""),p.reportDeliveryStatus!=="READY"&&p.reportDeliveryStatus!=="SENT"){ce("generating"),de(0),ue("Initialisation..."),await fetch(`/api/audits/${a}/generate-narrative`,{method:"POST"}),await r(0);return}await l(),h(!1)}catch{w("Erreur de connexion"),h(!1)}};return h(!0),w(null),n(),()=>{s=!0,V.current&&clearTimeout(V.current)}},[a]),m.useEffect(()=>{const s=document.documentElement;s.style.setProperty("--color-bg",t.colors.background),s.style.setProperty("--color-surface",t.colors.surface),s.style.setProperty("--color-border",t.colors.border),s.style.setProperty("--color-text",t.colors.text),s.style.setProperty("--color-text-muted",t.colors.textMuted),s.style.setProperty("--color-primary",t.colors.primary),s.style.setProperty("--color-grid",t.colors.grid),s.style.setProperty("--color-on-primary",t.type==="dark"?"#000":"#fff"),s.style.setProperty("--text",t.colors.text),s.style.setProperty("--text-secondary",t.colors.textMuted),s.style.setProperty("--text-muted",t.colors.textMuted),s.style.setProperty("--surface-1",t.colors.surface),s.style.setProperty("--surface-2",t.colors.background),s.style.setProperty("--border",t.colors.border),s.style.setProperty("--primary",t.colors.primary),s.style.setProperty("--accent-ok",t.colors.primary),s.style.setProperty("--accent-warning",t.colors.primary)},[t]);const be=s=>{const l=f(s);return l?Fe(l)?l:l.split(/\n\s*\n/).map(r=>r.trim()).filter(Boolean).map(r=>`<p>${r}</p>`).join(""):""},st=s=>{const l=C(s.introduction).trim(),r=[{label:"Analyse",text:l},{label:"Ce qui bloque",text:C(s.whatIsWrong)},{label:"Analyse personnalisee",text:C(s.personalizedAnalysis)},{label:"Recommandations",text:C(s.recommendations)},{label:"Plan d'action",text:C(s.actionPlan)},{label:"Science",text:C(s.scienceDeepDive)}].filter(n=>n.text&&n.text.trim().length>0);return l&&Fe(l)&&r.length===1?l:r.map(n=>`<h4>${n.label}</h4>${be(n.text||"")}`).join("")},H=(Array.isArray(o==null?void 0:o.sections)?o.sections:[]).filter(s=>!!(s&&typeof s=="object")).map((s,l)=>{const r=f(s.id)||`section-${l+1}`,n=f(s.title)||`Section ${l+1}`,c=typeof s.score=="number"?s.score:Number(s.score),i=Number.isFinite(c)?c:0;return{...s,id:r,title:n,score:i}}),Y=Array.isArray(o==null?void 0:o.supplementStack)?o.supplementStack:[],rt=(Array.isArray(o==null?void 0:o.radarMetrics)?o.radarMetrics:[]).filter(s=>!!(s&&typeof s=="object")).map((s,l)=>{const r=typeof s.value=="number"?s.value:Number(s.value),n=typeof s.max=="number"?s.max:Number(s.max),c=f(s.label)||`Metric ${l+1}`,i=f(s.key)||c.toLowerCase().replace(/\s+/g,"-");return{...s,label:c,key:i,value:Number.isFinite(r)?r:0,max:Number.isFinite(n)&&n>0?n:10}}),v=m.useMemo(()=>{var c,i,u,p;if(!o)return[];const s=H.map(x=>{const j=x.score>0?`Score ${Math.round(x.score)}%`:x.level?x.level.toUpperCase():"";return{id:x.id,title:x.title,subtitle:j,content:st(x)}}),l=!!(o.supplementsHtml||Y.length>0),r=!!((c=o.weeklyPlan)!=null&&c.week1||(i=o.weeklyPlan)!=null&&i.week2||(u=o.weeklyPlan)!=null&&u.weeks3_4||(p=o.weeklyPlan)!=null&&p.months2_3),n=o.auditType==="ANABOLIC_BIOSCAN"||o.auditType==="PREMIUM";return[{id:"dashboard",title:"Dashboard",subtitle:"Vue globale",content:""},...o.ctaDebut?[{id:"cta-debut",title:"Rappel Coaching",subtitle:"Important",content:""}]:[],...s,...l?[{id:"supplements",title:"Stack Supplements",subtitle:"Protocole",content:""}]:[],...r?[{id:"plan",title:"Plan 12 Semaines",subtitle:"Action",content:""}]:[],...o.ctaFin?[{id:"cta-fin",title:"Coaching",subtitle:"Prochaine etape",content:""}]:[],...n?[{id:"upgrade",title:"Ultimate Scan",subtitle:"Upgrade",content:""}]:[],{id:"review",title:"Ton Avis",subtitle:"Feedback",content:""}]},[o]);m.useEffect(()=>{const s=()=>{if(!T.current||v.length===0)return;const r=T.current,n=r.scrollTop,c=r.clientHeight,i=r.scrollHeight-c,u=i>0?n/i*100:0;Ve(u);const p=v.map(j=>document.getElementById(j.id)),x=r.scrollTop+300;for(let j=p.length-1;j>=0;j--){const $=p[j];if($&&$.offsetTop<=x){z(v[j].id);break}}},l=T.current;if(l)return l.addEventListener("scroll",s),s(),()=>l.removeEventListener("scroll",s)},[v]),m.useEffect(()=>{v.length>0&&z(v[0].id)},[v]);const ye=s=>{const l=s>0;return e.jsxs("div",{className:"mt-6 rounded-xl border overflow-hidden",style:{borderColor:t.colors.border},children:[e.jsxs("div",{className:"px-4 py-3 flex flex-wrap items-center justify-between gap-2",style:{backgroundColor:F,borderBottom:`1px solid ${k}`},children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",style:{color:b},children:"Formules coaching"}),e.jsx("span",{className:"text-xs",style:{color:t.colors.textMuted},children:l?`Deduction appliquee : -${le(s)}`:"Aucune deduction appliquee sur ce rapport"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{color:t.colors.textMuted},children:[e.jsx("th",{className:"text-left font-semibold px-4 py-3",children:"Offre"}),e.jsx("th",{className:"text-left font-semibold px-4 py-3",children:"Duree"}),e.jsx("th",{className:"text-right font-semibold px-4 py-3",children:"Prix standard"}),e.jsx("th",{className:"text-right font-semibold px-4 py-3",children:"Prix apres deduction"})]})}),e.jsx("tbody",{children:Ot.map(r=>e.jsxs(oe.Fragment,{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 pt-4 pb-2",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-widest",style:{color:t.colors.textMuted},children:r.label}),e.jsxs("a",{href:r.href,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold",style:{color:b},children:["Voir ",r.label]})]})})}),r.offers.map((n,c)=>{const i=Math.max(0,n.price-s);return e.jsxs("tr",{style:{borderBottom:`1px solid ${t.colors.border}`},children:[e.jsx("td",{className:"px-4 py-3",children:r.label}),e.jsx("td",{className:"px-4 py-3",children:n.duration}),e.jsx("td",{className:"px-4 py-3 text-right",style:{color:t.colors.textMuted},children:e.jsx("span",{style:l?{textDecoration:"line-through"}:void 0,children:le(n.price)})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold",style:{color:b},children:le(i)})]},`${r.id}-${c}`)})]},r.id))})]})}),e.jsx("div",{className:"px-4 py-3 text-xs",style:{color:t.colors.textMuted},children:"Le montant de ton scan est deduit a 100% sur chaque formule. Tu gardes la meme qualite de suivi, simplement moins cher."})]})},ge=(s,l,r)=>{var n;try{const c=Gt(s),{paragraphs:i,bullets:u,promoLine:p,bonusLine:x,emailLine:j,siteLine:$}=c,L=j.replace(/^email\s*:\s*/i,"").trim()||"coaching@achzodcoaching.com",E=$.replace(/^site\s*:\s*/i,"").trim()||"achzodcoaching.com",S=((n=p.match(/[A-Z0-9_-]{6,}/i))==null?void 0:n[0])||"",D=i.join(" ").replace(/\s+/g," ").trim(),re=D.length>380?`${D.slice(0,380).trim()}...`:D,Me=E.startsWith("http")?E:`https://${E}`,O=r==="debut",Ae=O?"Rappel coaching":"Passe a l'action",Ee=O?"Deduction 100% du scan":"Execution + ajustements",Te=Ft(o==null?void 0:o.auditType),bt=O?["Deduction 100% du scan si coaching","Ajustements hebdo personnalises","Acces direct pour accelerer les decisions"]:["Pilotage des KPIs et corrections","Protocoles adaptes a ton quotidien","Suivi humain, pas un plan generique"],yt=u.length>0?u.slice(0,6):bt;return O?e.jsxs("div",{className:"rounded-xl border p-6 md:p-8",style:{background:`linear-gradient(135deg, ${b}12 0%, ${t.colors.surface} 100%)`,borderColor:k},children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest px-2 py-1 rounded-full",style:{backgroundColor:F,color:b,border:`1px solid ${k}`},children:l}),e.jsx("span",{className:"text-xs uppercase tracking-widest",style:{color:t.colors.textMuted},children:Ee})]}),e.jsx("h4",{className:"text-2xl font-bold",style:{color:t.colors.text},children:Ae}),re&&e.jsx("p",{className:"text-sm leading-relaxed",style:{color:t.colors.textMuted},children:re})]}),S&&e.jsx("span",{className:"text-xs font-mono px-2 py-1 rounded",style:{color:b,border:`1px solid ${k}`},children:S})]}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-3 mb-6",children:yt.map((gt,vt)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",style:{color:t.colors.textMuted},children:[e.jsx("span",{style:{color:b},children:"-"}),e.jsx("span",{children:gt})]},vt))}),ye(Te),x&&e.jsx("div",{className:"text-xs uppercase tracking-widest mb-4",style:{color:b},children:x}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs",style:{color:t.colors.textMuted},children:[e.jsxs("span",{children:["Email: ",e.jsx("a",{href:`mailto:${L}`,className:"font-semibold",style:{color:t.colors.text},children:L})]}),e.jsxs("span",{children:["Site: ",e.jsx("a",{href:Me,target:"_blank",rel:"noreferrer",className:"font-semibold",style:{color:t.colors.text},children:E})]})]})]}):e.jsxs("div",{className:"rounded-xl border p-6 md:p-8",style:{backgroundColor:t.colors.surface,borderColor:t.colors.border},children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest px-2 py-1 rounded-full",style:{backgroundColor:F,color:b,border:`1px solid ${k}`},children:l}),e.jsx("span",{className:"text-xs uppercase tracking-widest",style:{color:t.colors.textMuted},children:Ee})]}),e.jsx("h4",{className:"text-2xl font-bold mb-2",style:{color:t.colors.text},children:Ae}),e.jsx("p",{className:"text-sm leading-relaxed",style:{color:t.colors.textMuted},children:re||"Tu as la cartographie. Ce qui manque, c'est l'execution avec feedback et ajustements continus."})]}),S&&e.jsx("span",{className:"text-xs font-mono px-2 py-1 rounded",style:{color:b,border:`1px solid ${k}`},children:S})]}),ye(Te),e.jsxs("div",{className:"mt-6 p-4 rounded-lg",style:{background:_(b,.08),border:`1px solid ${k}`},children:[e.jsx("p",{className:"text-sm font-medium",style:{color:b},children:"Deduction 100% du scan sur le coaching"}),e.jsxs("p",{className:"text-xs mt-1",style:{color:t.colors.textMuted},children:[S?`Code promo : ${S}.`:"Code promo disponible apres validation."," Pour toute question, ecris-moi."]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-xs",style:{color:t.colors.textMuted},children:[e.jsxs("span",{children:["Email: ",e.jsx("a",{href:`mailto:${L}`,className:"font-semibold",style:{color:t.colors.text},children:L})]}),e.jsxs("span",{children:["Site: ",e.jsx("a",{href:Me,target:"_blank",rel:"noreferrer",className:"font-semibold",style:{color:t.colors.text},children:E})]})]})]})}catch(c){console.error("[Anabolic CTA] Render error:",c);const i=C(s);return e.jsx("div",{className:"rounded-xl border p-6 md:p-8 text-sm whitespace-pre-wrap",style:{backgroundColor:t.colors.surface,borderColor:t.colors.border,color:t.colors.text},children:i||"CTA indisponible pour le moment."})}},Z=qe(Ke),Q=H.map(s=>s.score).filter(s=>Number.isFinite(s)),X=Q.length>0?Math.round(Q.reduce((s,l)=>s+l,0)/Q.length):0,ve=o&&Number.isFinite(o.global)?o.global:X,je=ve<=10&&X>=20?X:ve,P=Number.isFinite(je)?je:60,M=Math.round(P/10*10)/10,b=t.colors.primary,F=_(b,.12),k=_(b,.25),ot={"analyse-entrainement-et-periodisation":"Entrainement","analyse-systeme-cardiovasculaire":"Cardio","analyse-metabolisme-et-nutrition":"Metabolisme","analyse-sommeil-et-recuperation":"Sommeil","analyse-digestion-et-microbiote":"Digestion","analyse-axes-hormonaux":"Hormones","analyse-visuelle-et-posturale-complete":"Posture","analyse-biomecanique-et-sangle-profonde":"Biomeca","analyse-energie-et-recuperation":"Energie","profil-base":"Profil","composition-corporelle":"Composition","metabolisme-energie":"Metabolisme","nutrition-tracking":"Nutrition","digestion-microbiome":"Digestion","activite-performance":"Entrainement","sommeil-recuperation":"Sommeil","hrv-cardiaque":"HRV","cardio-endurance":"Cardio","analyses-biomarqueurs":"Bio","hormones-stress":"Hormones","lifestyle-substances":"Style de vie","biomecanique-mobilite":"Mobilite","psychologie-mental":"Mental",neurotransmetteurs:"Neuro"},lt=(s,l)=>{const n=s.replace(/^analyse\s+/i,"").replace(/^protocole\s+/i,"").replace(/^plan\s+/i,"").replace(/^synthese\s+/i,"").replace(/^kpi\s+et\s+tableau\s+de\s+bord\s*/i,"KPI ").trim().split(/\s+/);return n.length>1?n.slice(0,2).join(" "):l},Ne=H.filter(Vt),at=(Ne.length>0?Ne:H).slice(0,8),nt=s=>{const l=ot[s.id];if(l)return l;const r=s.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return r.includes("entrainement")?"Entrainement":r.includes("cardio")||r.includes("cardiovasculaire")||r.includes("hrv")?"Cardio":r.includes("metabolisme")||r.includes("nutrition")?"Metabolisme":r.includes("sommeil")?"Sommeil":r.includes("digestion")?"Digestion":r.includes("hormon")?"Hormones":r.includes("postur")||r.includes("biomecanique")?"Posture":r.includes("energie")?"Energie":lt(s.title,s.title)},ct=at.map((s,l)=>{const r=s.score>0?s.score:P;return{label:f(nt(s))||`Metric ${l+1}`,value:Math.round(r/10*10)/10,max:10,description:f(s.title)||`Metric ${l+1}`,key:f(s.id)||`metric-${l+1}`}}),ee=rt,it=ee.map(s=>f(s.label).toLowerCase()),we=ee.length>=4&&it.some(s=>s&&!s.includes("analyse"))?ee:ct,A=M>0?M:6.5,ke=[{label:"Entrainement",value:A,max:10,description:"Entrainement",key:"entrainement"},{label:"Cardio",value:A,max:10,description:"Cardio",key:"cardio"},{label:"Metabolisme",value:A,max:10,description:"Metabolisme",key:"metabolisme"},{label:"Sommeil",value:A,max:10,description:"Sommeil",key:"sommeil"},{label:"Digestion",value:A,max:10,description:"Digestion",key:"digestion"},{label:"Hormones",value:A,max:10,description:"Hormones",key:"hormones"}],Se=(we.length?we:ke).map((s,l)=>{const r=typeof s.value=="number"&&!Number.isNaN(s.value)?s.value:A,n=f(s.label)||`Metric ${l+1}`,c=f(s.key)||n.toLowerCase().replace(/\s+/g,"-");return{...s,label:n,key:c,value:Math.max(1,Math.min(10,r)),max:10}}).filter(s=>typeof s.value=="number"),Ce=Se.length>=4?Se:ke,te=[...Ce].sort((s,l)=>s.value-l.value),y=te[0],g=te[te.length-1],dt=v.filter(s=>s.id!=="dashboard"),se=s=>{const l=document.getElementById(s);l&&T.current&&T.current.scrollTo({top:l.offsetTop-100,behavior:"smooth"}),z(s),G(!1)},Re=s=>{if(!o)return;const l=v.findIndex(n=>n.id===I);let r=s==="next"?l+1:l-1;r<0&&(r=0),r>=v.length&&(r=v.length-1),se(v[r].id)},mt=async s=>{if(s.preventDefault(),!a||K===0||q.length<10||!W){J("Veuillez remplir tous les champs (commentaire 10 caracteres minimum)");return}fe(!0);try{const r=await(await fetch("/api/submit-review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auditId:a,email:W,auditType:"ANABOLIC_BIOSCAN",rating:K,comment:q})})).json();if(r.success)tt(!0);else{const n=Array.isArray(r.details)?r.details.map(c=>c.message).filter(Boolean).join(" "):"";J(n||r.error||"Erreur")}}catch{J("Erreur de connexion")}finally{fe(!1)}},Pe=Je||(o==null?void 0:o.auditType)||null,ut=Pe&&Pe!=="ELITE"&&/photo|postur/i.test(me)?"Analyse de ton profil...":me;if(N)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:t.colors.background,color:t.colors.text},children:e.jsxs("div",{className:"text-center max-w-md px-6",children:[e.jsx($e,{className:"w-12 h-12 animate-spin mx-auto mb-4",style:{color:t.colors.primary}}),e.jsx("p",{className:"font-semibold mb-2",children:"Preparation du rapport Anabolic..."}),Ze&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm",style:{color:t.colors.textMuted},children:ut||"Analyse en cours"}),e.jsx("div",{className:"mt-4 h-2 w-full rounded-full overflow-hidden",style:{backgroundColor:t.colors.surface},children:e.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${ie}%`,backgroundColor:t.colors.primary}})}),e.jsxs("p",{className:"text-xs mt-2",style:{color:t.colors.textMuted},children:[ie,"%"]})]})]})});if(R||!o)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:t.colors.background,color:t.colors.text},children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[e.jsx(Nt,{className:"w-16 h-16 mx-auto mb-4",style:{color:t.colors.primary}}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:R||"Rapport non disponible"}),e.jsx("p",{className:"text-sm mb-6",style:{color:t.colors.textMuted},children:"Le rapport n'est pas encore accessible. Reessaie dans quelques minutes."}),e.jsx(wt,{href:"/dashboard",children:e.jsx("button",{className:"px-6 py-3 font-bold rounded-lg transition",style:{backgroundColor:t.colors.primary,color:t.type==="dark"?"#000":"#fff"},children:"Retour au dashboard"})})]})});const xt={"--color-bg":t.colors.background,"--color-surface":t.colors.surface,"--color-border":t.colors.border,"--color-text":t.colors.text,"--color-text-muted":t.colors.textMuted,"--color-primary":t.colors.primary,"--color-grid":t.colors.grid,"--color-on-primary":t.type==="dark"?"#000":"#fff","--text":t.colors.text,"--text-secondary":t.colors.textMuted,"--text-muted":t.colors.textMuted,"--surface-1":t.colors.surface,"--surface-2":t.colors.background,"--border":t.colors.border,"--primary":t.colors.primary,"--accent-ok":t.colors.primary,"--accent-warning":t.colors.primary},pt=P>=75?"Une base solide.":P>=60?"Des axes d'optimisation identifies.":"Plusieurs blocages a debloquer.",ft=()=>e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(ze,{className:"w-10 h-10 mx-auto mb-4",style:{color:t.colors.primary}}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Ton avis compte"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:["Laisse un avis et recois ton code promo ",e.jsx("strong",{children:"-20%"})," sur le coaching Achzod par email."]})]}),et?e.jsxs("div",{className:"text-center p-8 rounded-sm",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx($t,{className:"w-16 h-16 mx-auto mb-4 text-green-500"}),e.jsx("h4",{className:"text-xl font-bold mb-2",children:"Merci pour ton avis !"}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"Ton retour m'aide a livrer des analyses encore plus precises."})]}):e.jsxs("form",{onSubmit:mt,className:"space-y-6 p-8 rounded-sm",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"text-sm font-medium block mb-3",style:{color:"var(--color-text-muted)"},children:"Ta note"}),e.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>Qe(s),className:"p-1 transition-transform hover:scale-110",children:e.jsx(ze,{size:32,className:s<=K?"fill-yellow-400 text-yellow-400":"text-gray-400"})},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium block mb-2",style:{color:"var(--color-text-muted)"},children:"Ton email (pour recevoir le code promo)"}),e.jsx("input",{type:"email",value:W,onChange:s=>xe(s.target.value),placeholder:"ton@email.com",required:!0,className:"w-full px-4 py-3 rounded text-sm focus:outline-none focus:ring-2 transition-all",style:{backgroundColor:"var(--color-bg)",border:"1px solid var(--color-border)",color:"var(--color-text)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium block mb-2",style:{color:"var(--color-text-muted)"},children:"Ton commentaire (min. 10 caracteres)"}),e.jsx("textarea",{value:q,onChange:s=>Xe(s.target.value),placeholder:"Ton retour sur l'Anabolic Bioscan...",rows:4,required:!0,minLength:10,className:"w-full px-4 py-3 rounded text-sm focus:outline-none focus:ring-2 transition-all resize-none",style:{backgroundColor:"var(--color-bg)",border:"1px solid var(--color-border)",color:"var(--color-text)"}}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--color-text-muted)"},children:[q.length,"/10 caracteres minimum"]})]}),he&&e.jsx("div",{className:"text-red-500 text-sm text-center p-3 rounded-lg bg-red-500/10",children:he}),e.jsx("button",{type:"submit",disabled:pe,className:"w-full py-3 rounded font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:t.colors.primary,color:t.type==="dark"?"#000":"#fff"},children:pe?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx($e,{className:"w-4 h-4 animate-spin"}),"Envoi..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4"}),"Envoyer mon avis"]})})]})]}),ht=s=>{var n,c,i,u;if(s.id==="cta-debut"&&o.ctaDebut)return ge(o.ctaDebut,"Rappel","debut");if(s.id==="cta-fin"&&o.ctaFin)return ge(o.ctaFin,"Execution","fin");if(s.id==="supplements"){const p=o.supplementsHtml?_e(o.supplementsHtml):"";return e.jsxs("div",{className:"p-6 rounded-sm border",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[p&&e.jsx("div",{className:`mb-8 prose max-w-none ${t.type==="dark"?"prose-invert":""}`,style:{color:t.colors.text,"--tw-prose-body":t.colors.text,"--tw-prose-headings":t.colors.text,"--tw-prose-strong":t.colors.text,"--tw-prose-bullets":t.colors.primary},dangerouslySetInnerHTML:{__html:p}}),Y.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[var(--color-border)]",children:[e.jsx("th",{className:"text-left py-3 px-2 text-[var(--color-text-muted)] font-bold",children:"Supplement"}),e.jsx("th",{className:"text-left py-3 px-2 text-[var(--color-text-muted)] font-bold",children:"Dosage"}),e.jsx("th",{className:"text-left py-3 px-2 text-[var(--color-text-muted)] font-bold",children:"Timing"}),e.jsx("th",{className:"text-left py-3 px-2 text-[var(--color-text-muted)] font-bold hidden md:table-cell",children:"Duree"})]})}),e.jsx("tbody",{children:Y.slice(0,10).map((x,j)=>{const $=f(x.name),L=f(x.dosage),E=f(x.timing),S=f(x.duration),D=Array.isArray(x.brands)&&x.brands.length>0?f(x.brands[0]):"";return e.jsxs("tr",{className:"border-b border-[var(--color-border)]/50",children:[e.jsxs("td",{className:"py-3 px-2",children:[e.jsx("span",{className:"font-medium",style:{color:t.colors.primary},children:$}),D&&e.jsx("div",{className:"text-xs text-[var(--color-text-muted)]",children:D})]}),e.jsx("td",{className:"py-3 px-2",children:e.jsx("span",{className:"px-2 py-1 rounded bg-[var(--color-bg)] text-xs font-mono",children:L})}),e.jsx("td",{className:"py-3 px-2 text-[var(--color-text-muted)]",children:E}),e.jsx("td",{className:"py-3 px-2 text-[var(--color-text-muted)] hidden md:table-cell",children:S})]},j)})})]})})]})}if(s.id==="plan")return e.jsx("div",{className:"space-y-4",children:[{title:"Semaine 1",subtitle:"Fondations",content:f((n=o.weeklyPlan)==null?void 0:n.week1),alpha:.7},{title:"Semaine 2",subtitle:"Consolidation",content:f((c=o.weeklyPlan)==null?void 0:c.week2),alpha:.55},{title:"Semaines 3-4",subtitle:"Optimisation",content:f((i=o.weeklyPlan)==null?void 0:i.weeks3_4),alpha:.45},{title:"Mois 2-3",subtitle:"Maintenance",content:f((u=o.weeklyPlan)==null?void 0:u.months2_3),alpha:.35}].map((p,x)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-1 rounded-full",style:{backgroundColor:_(b,p.alpha)}}),e.jsxs("div",{className:"flex-1 p-4 rounded border",style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-bold",children:p.title}),e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-[var(--color-bg)] text-[var(--color-text-muted)]",children:p.subtitle})]}),e.jsx("p",{className:"text-sm text-[var(--color-text-muted)] leading-relaxed",children:p.content})]})]},x))});if(s.id==="review")return ft();if(s.id==="upgrade")return e.jsxs("div",{className:"p-8 rounded-xl border text-center",style:{borderColor:k,backgroundColor:F},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(Tt,{className:"w-6 h-6",style:{color:t.colors.primary}}),e.jsx("span",{className:"text-sm font-medium uppercase tracking-wider",style:{color:t.colors.primary},children:"Niveau Superieur"})]}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Passe a l'Ultimate Scan"}),e.jsx("p",{className:"mb-6 max-w-xl mx-auto",style:{color:t.colors.textMuted},children:"L'Ultimate Scan inclut l'analyse photo complete (posture, masse musculaire, repartition graisse), des protocoles correctifs biomecaniques, et un accompagnement personnalise pour des resultats encore plus precis."}),e.jsxs("a",{href:"/offers/ultimate-scan",className:"inline-flex items-center gap-2 px-8 py-4 rounded font-semibold text-lg transition-all hover:scale-105",style:{backgroundColor:t.colors.primary,color:t.type==="dark"?"#000":"#FFF"},children:[e.jsx(U,{className:"w-5 h-5"}),"Debloquer l'Ultimate Scan"]}),e.jsx("p",{className:"mt-4 text-sm",style:{color:t.colors.textMuted},children:"Garantie satisfait ou rembourse 30 jours"})]});const l=typeof s.content=="string"?s.content:be(s.content),r=_e(l);return e.jsx("div",{className:`prose prose-lg max-w-none ${t.type==="dark"?"prose-invert":""} prose-p:text-[var(--color-text)] prose-p:leading-relaxed prose-headings:text-[var(--color-text)] prose-strong:text-[var(--color-text)]`,style:{color:t.colors.text,"--tw-prose-body":t.colors.text,"--tw-prose-headings":t.colors.text,"--tw-prose-strong":t.colors.text,"--tw-prose-bullets":t.colors.primary},dangerouslySetInnerHTML:{__html:r}})};return e.jsxs("div",{className:"ultrahuman-report flex h-screen font-sans overflow-hidden selection:bg-white/20 relative transition-colors duration-500",style:{...xt,backgroundColor:t.colors.background,color:t.colors.text},children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 z-[60]",style:{backgroundColor:"var(--color-border)"},children:e.jsx("div",{className:"h-full transition-all duration-150 ease-out",style:{width:`${Ge}%`,backgroundColor:t.colors.primary}})}),e.jsx("div",{className:"fixed inset-0 pointer-events-none",style:{backgroundImage:`linear-gradient(to right, ${t.colors.grid} 1px, transparent 1px), linear-gradient(to bottom, ${t.colors.grid} 1px, transparent 1px)`,backgroundSize:"60px 60px"}}),e.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-80 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 ${ne?"translate-x-0":"-translate-x-full"} border-r flex flex-col`,style:{backgroundColor:"var(--color-bg)",borderColor:"var(--color-border)"},children:e.jsx(Dt,{sections:v,activeSection:I,onNavigate:se,themes:Ie,currentTheme:t,onThemeChange:Ue,clientName:Z,auditType:"ANABOLIC_BIOSCAN"})}),ne&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>G(!1)}),e.jsxs("main",{ref:T,className:"flex-1 overflow-y-auto relative z-10 scroll-smooth",children:[e.jsxs("div",{className:"fixed bottom-8 right-8 z-50 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>se("dashboard"),className:"w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-xl",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",color:"var(--color-text-muted)"},children:e.jsx(Le,{size:16})}),e.jsxs("div",{className:"flex flex-col rounded-full shadow-xl overflow-hidden",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx("button",{onClick:()=>Re("prev"),className:"w-10 h-10 flex items-center justify-center hover:opacity-70 transition-colors",style:{color:"var(--color-text)"},children:e.jsx(Le,{size:16})}),e.jsx("div",{className:"h-[1px] w-full",style:{backgroundColor:"var(--color-border)"}}),e.jsx("button",{onClick:()=>Re("next"),className:"w-10 h-10 flex items-center justify-center hover:opacity-70 transition-colors",style:{color:"var(--color-text)"},children:e.jsx(kt,{size:16})})]})]}),e.jsxs("div",{className:"lg:hidden sticky top-0 z-40 backdrop-blur-md px-4 py-4 flex items-center justify-between",style:{backgroundColor:"var(--color-bg)",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("span",{className:"font-bold text-sm tracking-widest uppercase",children:Z}),e.jsx("button",{onClick:()=>G(!0),children:e.jsx(St,{size:20})})]}),e.jsxs("div",{className:"max-w-[1200px] mx-auto p-6 lg:p-12 space-y-12 lg:space-y-32",children:[e.jsxs("div",{id:"dashboard",className:"pt-8 lg:pt-12",children:[e.jsxs("header",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-8 mb-12",children:[e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full",style:{border:"1px solid var(--color-border)",backgroundColor:"var(--color-surface)"},children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full animate-pulse bg-green-500"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",style:{color:"var(--color-text-muted)"},children:"Anabolic Bioscan"})]}),e.jsxs("h1",{className:"text-5xl lg:text-7xl font-medium tracking-tighter leading-[0.9]",children:[Z,", ",e.jsx("br",{}),e.jsx("span",{style:{color:t.colors.textMuted},children:"voici ton bioscan."})]}),e.jsxs("p",{className:"text-lg leading-relaxed max-w-lg",style:{color:"var(--color-text-muted)"},children:[Math.round(P),"/100 — ",pt]})]}),e.jsx("div",{className:"flex gap-4 items-end",children:e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsxs("div",{className:"text-3xl font-bold font-mono",children:[Math.round(P),e.jsx("span",{className:"text-lg opacity-50",children:"/100"})]}),e.jsx("div",{className:"text-[10px] uppercase tracking-widest",style:{color:"var(--color-text-muted)"},children:"Score Global"})]})})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"lg:col-span-1 lg:row-span-2 rounded-sm p-8 flex flex-col justify-between relative overflow-hidden group",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity duration-500",children:e.jsx(Ct,{size:80})}),e.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest",style:{color:"var(--color-text-muted)"},children:"Performance Globale"}),e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Bt,{score:Math.round(P),max:100,size:180,strokeWidth:4,color:t.colors.primary})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full ${B(M).color}`,children:B(M).label})})]}),e.jsxs("div",{className:"lg:col-span-2 lg:row-span-2 rounded-sm p-1 relative group",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsx("div",{className:"absolute top-6 left-6 z-10",children:e.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest",style:{color:"var(--color-text-muted)"},children:"Balance Systemique"})}),e.jsx("div",{className:"h-full w-full min-h-[300px] flex items-center justify-center pt-8",children:e.jsx(zt,{data:Ce,color:t.colors.primary,gridColor:t.colors.grid,labelColor:t.colors.textMuted,tooltipBg:t.colors.surface,tooltipBorder:t.colors.border,tooltipText:t.colors.text})})]}),e.jsxs("div",{className:"rounded-sm p-6 flex flex-col justify-between hover:opacity-90 transition-colors cursor-default",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[oe.createElement(He[(y==null?void 0:y.key)||"stress"]||ae,{size:20,style:{color:"var(--color-text-muted)"}}),e.jsx("span",{className:`text-[10px] font-mono px-1.5 py-0.5 rounded ${B((y==null?void 0:y.value)||0).color}`,children:B((y==null?void 0:y.value)||0).label})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-medium mt-4",children:[(y==null?void 0:y.value)??M,e.jsx("span",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"/10"})]}),e.jsx("div",{className:"text-xs font-mono uppercase mt-1",style:{color:"var(--color-text-muted)"},children:(y==null?void 0:y.label)||"Priorite"})]})]}),e.jsxs("div",{className:"rounded-sm p-6 flex flex-col justify-between hover:opacity-90 transition-colors cursor-default",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[oe.createElement(He[(g==null?void 0:g.key)||"energie"]||U,{size:20,style:{color:"var(--color-text-muted)"}}),e.jsx("span",{className:`text-[10px] font-mono px-1.5 py-0.5 rounded ${B((g==null?void 0:g.value)||0).color}`,children:B((g==null?void 0:g.value)||0).label})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-medium mt-4",children:[(g==null?void 0:g.value)??M,e.jsx("span",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"/10"})]}),e.jsx("div",{className:"text-xs font-mono uppercase mt-1",style:{color:"var(--color-text-muted)"},children:(g==null?void 0:g.label)||"Point fort"})]})]}),e.jsxs("div",{className:"lg:col-span-4 rounded-sm p-6 relative overflow-hidden flex flex-col md:flex-row gap-8 items-center",style:{backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsxs("h3",{className:"text-sm font-bold mb-2 flex items-center gap-2",style:{color:"var(--color-primary)"},children:[e.jsx(U,{size:16})," Potentiel"]}),e.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"En debloquant tes systemes prioritaires, projection d'amelioration sur 90 jours."})]}),e.jsx("div",{className:"w-full md:w-2/3 h-[150px]",children:e.jsx(It,{color:t.colors.primary,currentScore:M})})]})]})]}),e.jsxs("div",{className:"space-y-0 relative",children:[e.jsx("div",{className:"absolute left-0 lg:left-[240px] top-0 bottom-0 w-[1px] hidden lg:block",style:{backgroundColor:"var(--color-border)"}}),dt.map((s,l)=>e.jsx("section",{id:s.id,className:"scroll-mt-32 group relative pb-24 lg:pb-32",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-24",children:[e.jsx("div",{className:"lg:w-[240px] flex-shrink-0",children:e.jsxs("div",{className:"sticky top-24 pr-8 lg:text-right",children:[e.jsx("span",{className:"font-mono text-4xl lg:text-5xl font-bold group-hover:opacity-50 transition-colors block mb-2 opacity-20",style:{color:"var(--color-border)"},children:l+1<10?`0${l+1}`:l+1}),e.jsx("h2",{className:"text-xl font-bold tracking-tight mb-2 leading-tight",style:{color:"var(--color-text)"},children:s.title}),s.subtitle&&e.jsx("p",{className:"text-xs font-mono uppercase tracking-widest mb-4",style:{color:t.colors.primary},children:s.subtitle}),s.chips&&s.chips.length>0&&e.jsx("div",{className:"flex flex-wrap lg:justify-end gap-2 mt-4",children:s.chips.map(r=>e.jsx("span",{className:"px-2 py-1 text-[9px] font-mono uppercase rounded",style:{border:"1px solid var(--color-border)",color:"var(--color-text-muted)"},children:r},r))})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:ht(s)})]})},s.id))]})]})]})]})},ss=()=>{const{auditId:a}=jt(),o=()=>{a&&fetch(`/api/audit/${a}/regenerate`,{method:"POST"}).catch(()=>{}),typeof window<"u"&&window.location.reload()};return e.jsx(Ht,{onRetry:o,children:e.jsx(Kt,{auditId:a})})};export{ss as default};
