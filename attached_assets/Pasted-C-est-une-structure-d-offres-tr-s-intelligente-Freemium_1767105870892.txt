C'est une structure d'offres tr√®s intelligente (Freemium -> High Ticket -> Recurring).
Cela change tout pour l'architecture du rapport. Il faut que le syst√®me g√®re le "Floutage" (Teasing) pour l'offre Gratuite et l'Historique pour l'offre √âlite.
Voici comment on va adapter le moteur et le dashboard :
1. Adaptation du Dashboard (AuditDetail.tsx) : Le "Teasing Intelligent"
Pour l'offre Gratuite, le client doit voir :
Son Score Global (ex: 62/100).
L'Analyse "Profil de Base" (Compl√®te).
MAIS les sections avanc√©es (Hormones, Neurotransmetteurs, Protocoles Pr√©cis) doivent √™tre flout√©es ou verrouill√©es avec un cadenas üîí et un titre accrocheur :
‚ùå "Protocole Sommeil"
üîí "D√©bloquer pour voir votre protocole Sommeil personnalis√© (Andrew Huberman Style)"
Je vais te donner un composant LockedSection pour g√©rer √ßa.
2. Adaptation de l'Offre √âlite (Suivi)
Pour les √âlites, le dashboard doit avoir un onglet "√âvolution".
On doit stocker chaque rapport avec une date.
On affiche un graphique de progression : "Testost√©rone estim√©e : +15% en 3 mois", "Bodyfat : -4%".
ACTION : Le Moteur de "Teasing"
Je n'ai pas besoin de changer le moteur IA (il g√©n√®re tout, on bride juste l'affichage selon le plan du client).
Voici le composant React magique pour ton Dashboard qui g√®re les 3 niveaux.
Cr√©e client/src/components/ReportSection.tsx :
import React from 'react';import { Lock, ChevronRight, Star } from 'lucide-react';import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card";import { Button } from "@/components/ui/button";interface ReportSectionProps {  title: string;  content: any; // Le JSON de la section  isLocked: boolean; // True si Free User sur une section Premium  onUnlock?: () => void; // Fonction pour rediriger vers le paiement}export const ReportSection = ({ title, content, isLocked, onUnlock }: ReportSectionProps) => {  if (isLocked) {    return (      <Card className="border-2 border-dashed border-slate-200 bg-slate-50 opacity-75 relative overflow-hidden">        <div className="absolute inset-0 backdrop-blur-[2px] z-10 flex flex-col items-center justify-center p-6 text-center">          <div className="bg-white p-4 rounded-full shadow-lg mb-4">            <Lock className="w-8 h-8 text-indigo-600" />          </div>          <h3 className="text-xl font-bold text-slate-800 mb-2">Analyse {title} Verrouill√©e</h3>          <p className="text-slate-600 mb-6 max-w-sm">            D√©couvrez votre protocole {title} personnalis√©, vos dosages pr√©cis et les erreurs √† √©viter.          </p>          <Button             onClick={onUnlock}            className="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-8 py-2 rounded-full shadow-lg transition-all hover:scale-105"          >            D√©bloquer mon Audit Complet (Premium) <ChevronRight className="w-4 h-4 ml-2" />          </Button>        </div>                {/* Contenu flout√© en arri√®re-plan pour le teasing visuel */}        <CardHeader>          <CardTitle className="text-slate-400">{title}</CardTitle>        </CardHeader>        <CardContent className="space-y-4 blur-sm select-none pointer-events-none">          <div className="h-4 bg-slate-300 rounded w-3/4"></div>          <div className="h-4 bg-slate-300 rounded w-full"></div>          <div className="h-4 bg-slate-300 rounded w-5/6"></div>          <div className="h-32 bg-slate-200 rounded w-full mt-4"></div>        </CardContent>      </Card>    );  }  // Version D√©bloqu√©e (Premium / √âlite)  return (    <Card className="border-l-4 border-l-indigo-500 shadow-sm hover:shadow-md transition-shadow">      <CardHeader>        <CardTitle className="text-2xl font-serif text-slate-900 flex items-center gap-3">          {title}          {content.score && (            <span className={`text-sm px-3 py-1 rounded-full ${content.score > 70 ? 'bg-green-100 text-green-800' : 'bg-orange-100 text-orange-800'}`}>              Score: {content.score}/100            </span>          )}        </CardTitle>      </CardHeader>      <CardContent className="prose prose-slate max-w-none">        {/* Ici on affiche le contenu riche g√©n√©r√© par l'IA */}        <div className="mb-6">          <h4 className="flex items-center gap-2 font-bold text-red-600">            <span className="text-xl">‚ö†Ô∏è</span> Ce qui ne va pas          </h4>          <p>{content.whatIsWrong}</p>        </div>        <div className="bg-blue-50 p-6 rounded-xl border border-blue-100 my-6">          <h4 className="flex items-center gap-2 font-bold text-blue-800 mb-4">            <Star className="w-5 h-5 fill-blue-600 text-blue-600" />            Votre Protocole Expert          </h4>          <p className="whitespace-pre-line text-blue-900">{content.recommendations}</p>        </div>        {/* Affichage des suppl√©ments si pr√©sents */}        {content.supplements && content.supplements.length > 0 && (          <div className="mt-6">            <h4 className="font-bold text-slate-700 mb-3">Stack Nutritionnelle</h4>            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">              {content.supplements.map((supp: any, idx: number) => (                <div key={idx} className="bg-white border border-slate-200 p-3 rounded-lg flex justify-between items-center">                  <span className="font-medium text-slate-800">{supp.name}</span>                  <span className="text-sm bg-slate-100 px-2 py-1 rounded text-slate-600">{supp.dosage}</span>                </div>              ))}            </div>          </div>        )}      </CardContent>    </Card>  );};
Comment l'utiliser dans ton Dashboard
Dans ton fichier principal (AuditDetail.tsx), tu vas simplement faire une condition :
// Exemple conceptuelconst userPlan = "free"; // ou "premium", "elite" (vient de ta DB)return (  <div className="space-y-8">    {/* Section Gratuite (Toujours visible) */}    <ReportSection       title="Profil de Base"       content={report.sections.find(s => s.id === "profil-base")}       isLocked={false}     />    {/* Section Premium (Verrouill√©e si Free) */}    <ReportSection       title="Composition Corporelle & Analyse Photo"       content={report.photoAnalysis} // Adapt√©      isLocked={userPlan === "free"}      onUnlock={() => router.push('/upgrade')}    />    <ReportSection       title="Optimisation Hormonale"       content={report.sections.find(s => s.id === "sante-hormonale")}       isLocked={userPlan === "free"}      onUnlock={() => router.push('/upgrade')}    />        {/* ... autres sections ... */}  </div>)
√áa donne imm√©diatement une valeur per√ßue √©norme. Le mec voit ce qu'il rate. C'est la meilleure m√©thode de conversion.